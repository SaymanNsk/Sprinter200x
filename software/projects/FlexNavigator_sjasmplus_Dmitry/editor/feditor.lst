0001   0000             	device zxspectrum128
0002   0000             	INCLUDE	"..\FNEQU.z80";,#0B
0001+  0000             
0002+  0000             ;[]----------------------------------------------------------[]
0003+  0000             
0004+  0000             BORDER	EQU	#FE
0005+  0000             YPORT	EQU	#89
0006+  0000             PAGE0	EQU	#82
0007+  0000             PAGE1	EQU	#A2
0008+  0000             PAGE2	EQU	#C2
0009+  0000             PAGE3	EQU	#E2
0010+  0000             
0011+  0000             PanelCol EQU	#09
0012+  0000             FileCol	 EQU	#0A
0013+  0000             SFileCol EQU	#0B
0014+  0000             InvSCol	 EQU	#0C
0015+  0000             InvPCol	 EQU	#05
0016+  0000             InvICol	 EQU	#06
0017+  0000             
0018+  0000             BarXl	 EQU	+#00
0019+  0000             BarXh	 EQU	+#01
0020+  0000             BarYl	 EQU	+#02
0021+  0000             BarYh	 EQU	+#03
0022+  0000             BarMaxLl EQU	+#04
0023+  0000             BarMaxLh EQU	+#05
0024+  0000             BarLENl	 EQU	+#06
0025+  0000             BarLENh	 EQU	+#07
0026+  0000             BarLEFTl EQU	+#08
0027+  0000             BarLEFTh EQU	+#09
0028+  0000             BarRGHTl EQU	+#0A
0029+  0000             BarRGHTh EQU	+#0B
0030+  0000             BarPAGEl EQU	+#0C
0031+  0000             BarPAGEh EQU	+#0D
0032+  0000             BarMAXl	 EQU	+#0E
0033+  0000             BarMAXh	 EQU	+#0F
0034+  0000             BarFRSTl EQU	+#10
0035+  0000             BarFRSTh EQU	+#11
0036+  0000             
0037+  0000             ProcXl	  EQU	 +#00
0038+  0000             ProcXh	  EQU	 +#01
0039+  0000             ProcYl	  EQU	 +#02
0040+  0000             ProcYh	  EQU	 +#03
0041+  0000             ProcMaxLl EQU	 +#04
0042+  0000             ProcMaxLh EQU	 +#05
0043+  0000             ProcCOEFl EQU	 +#06
0044+  0000             ProcCOEFh EQU	 +#07
0045+  0000             ProcCORRl EQU	 +#08
0046+  0000             ProcCORRh EQU	 +#09
0047+  0000             ProcMAXl1 EQU	 +#0A
0048+  0000             ProcMAXh1 EQU	 +#0B
0049+  0000             ProcMAXl2 EQU	 +#0C
0050+  0000             ProcMAXh2 EQU	 +#0D
0051+  0000             ProcCURl1 EQU	 +#0E
0052+  0000             ProcCURh1 EQU	 +#0F
0053+  0000             ProcCURl2 EQU	 +#10
0054+  0000             ProcCURh2 EQU	 +#11
0055+  0000             ProcCOLOR EQU	 +#12
0056+  0000             
0057+  0000             WorkBuffer	EQU	#8000
0058+  0000             PagesList	EQU	#8400
0059+  0000             ClearScreen	EQU	#8603
0060+  0000             MakeWindow	EQU	#8606
0061+  0000             InvertRectan	EQU	#8609
0062+  0000             PrnTxtLnIFF	EQU	#860C
0063+  0000             PrnTxtLnNorm	EQU	#860F
0064+  0000             PrnTxtLnNormC	EQU	#8612
0065+  0000             PrnRangPathL	EQU	#8615
0066+  0000             PrnRangPathR	EQU	#8618
0067+  0000             PrnRangPathC	EQU	#861B
0068+  0000             InputLine	EQU	#861E
0069+  0000             InpLnExtN	EQU	#8621
0070+  0000             InpLnExtC	EQU	#8624
0071+  0000             
0072+  0000             InitScrBar	EQU	#862A
0073+  0000             PrnHScrBar	EQU	#862D
0074+  0000             PrnVScrBar	EQU	#8630
0075+  0000             InitProcess	EQU	#8633
0076+  0000             PrnProcess	EQU	#8636
0077+  0000             
0078+  0000             ResFire		EQU	#8648
0079+  0000             TestCoords	EQU	#864B
0080+  0000             SetCMOSPrint	EQU	#864E
0081+  0000             ResCMOSPrint	EQU	#8651
0082+  0000             SetClock	EQU	#8654
0083+  0000             SetMouse	EQU	#8657
0084+  0000             
0085+  0000             MoveBytes	EQU	#8669
0086+  0000             MoveBytesUp	EQU	#866C
0087+  0000             Mult8		EQU	#866F
0088+  0000             Mult16X8	EQU	#8672
0089+  0000             Mult16		EQU	#8675
0090+  0000             Mult16X16	EQU	#8678
0091+  0000             Mult32		EQU	#867B
0092+  0000             Divis16X16	EQU	#867E
0093+  0000             Divis24X16	EQU	#8681
0094+  0000             Divis32X16	EQU	#8684
0095+  0000             Divis32		EQU	#8687
0096+  0000             ConvNumTxt32	EQU	#868A
0097+  0000             ConvNumTxt16	EQU	#868D
0098+  0000             ConvNumTxt8	EQU	#8690
0099+  0000             ConvTxtNum32	EQU	#8693
0100+  0000             ConvTxtNum16	EQU	#8696
0101+  0000             
0102+  0000             DOSError	EQU	#86A8
0103+  0000             
0104+  0000             
0003   0000             	ORG	#C000;,EDITpg
0004   C000             StartOfEditor
0005   C000             CursorX	  EQU	#00
0006   C000             StringX	  EQU	#01
0007   C000             CursAddX  EQU	#02
0008   C000             CursorY	  EQU	#03
0009   C000             LenString EQU	#04
0010   C000             PrvLenStr EQU	#05
0011   C000             ReadyStr  EQU	#06
0012   C000             ReadyFile EQU	#07
0013   C000             LineBuffer=WorkBuffer+#200
0014   C000             TempBuffer=WorkBuffer+#300
0015   C000             Step	  EQU	#08
0016   C000             CursTimer EQU	#0E
0017   C000             ;[]==========================================================[]
0018   C000             FileEditor
0019   C000 CD 02 C8    	CALL	LoadFile
0020   C003 D8          	RET	C
0021   C004 FD 21 8F C1 	LD	IY,EditData
0022   C008 97          	SUB	A
0023   C009 32 8D C1    	LD	(EditMode),A
0024   C00C 32 8E C1    	LD	(HEXmode),A
0025   C00F FD 77 00    	LD	(IY+CursorX),A
0026   C012 FD 77 01    	LD	(IY+StringX),A
0027   C015 FD 77 02    	LD	(IY+CursAddX),A
0028   C018 FD 77 03    	LD	(IY+CursorY),A
0029   C01B FD 77 06    	LD	(IY+ReadyStr),A
0030   C01E FD 77 07    	LD	(IY+ReadyFile),A
0031   C021 3C          	INC	A
0032   C022 32 CC C6    	LD	(CrTimer),A
0033   C025 21 00 00    	LD	HL,#0000
0034   C028 22 97 C1    	LD	(CurLine),HL
0035   C02B 22 9B C1    	LD	(LineShift),HL
0036   C02E 22 9D C1    	LD	(PageShift),HL
0037   C031 CD D3 C2    	CALL	InitScreen
0038   C034             EditorBegin
0039   C034 CD BC C3    	CALL	InitStatus
0040   C037 CD 3C C5    	CALL	InitFile
0041   C03A CD 0C C6    	CALL	PrintPage
0042   C03D             EditorLoop
0043   C03D CD 20 C6    	CALL	ChCursor
0044   C040 3A 8D C1    	LD	A,(EditMode)
0045   C043 B7          	OR	A
0046   C044 C2 D9 C0    	JP	NZ,HEditLoop
0047   C047             TEditLoop
0048   C047 DD 21 81 E4 	LD	IX,ASCIItab
0049   C04B CD 4B 86    	CALL	TestCoords
0050   C04E 0E 31       	LD	C,#31		;Ожидаем нажатия клавиш
0051   C050 D7          	RST	#10
0052   C051 28 EA       	JR	Z,EditorLoop
0053   C053 7A          	LD	A,D
0054   C054 FE 44       	CP	#44
0055   C056 CA 17 C2    	JP	Z,EditorExit
0056   C059 7B          	LD	A,E		;Е-ASCII код
0057   C05A FE 1B       	CP	#1B		;Esc
0058   C05C CA 17 C2    	JP	Z,EditorExit
0059   C05F 21 3D C0    	LD	HL,EditorLoop
0060   C062 E5          	PUSH	HL
0061   C063 B7          	OR	A
0062   C064 C2 53 D2    	JP	NZ,TInsertSymbol
0063   C067 7A          	LD	A,D
0064   C068 FE 3B       	CP	#3B
0065   C06A CA D8 C6    	JP	Z,About
0066   C06D FE 3C       	CP	#3C
0067   C06F CA FA CA    	JP	Z,SaveFile
0068   C072 FE 3E       	CP	#3E
0069   C074 CA A8 C1    	JP	Z,ChEditor	;Просмотр в HEX
0070   C077 FE 43       	CP	#43
0071   C079 CA 27 E2    	JP	Z,PrintFile
0072   C07C FE 4F       	CP	#4F
0073   C07E CA 04 D3    	JP	Z,TDeleteSymbol
0074   C081 FE 54       	CP	#54
0075   C083 CA 21 D4    	JP	Z,TCursorLeft
0076   C086 FE 56       	CP	#56
0077   C088 CA 89 D4    	JP	Z,TCursorRight
0078   C08B FE 58       	CP	#58
0079   C08D CA E8 D5    	JP	Z,TCursorUp
0080   C090 FE 52       	CP	#52
0081   C092 CA 0B D6    	JP	Z,TCursorDown
0082   C095 FE 57       	CP	#57		;Home
0083   C097 CA 7E D5    	JP	Z,THomeString
0084   C09A FE 51       	CP	#51		;End
0085   C09C CA C1 D5    	JP	Z,TEndString
0086   C09F FE 59       	CP	#59		;PageUp
0087   C0A1 CA 04 D7    	JP	Z,TPageUp
0088   C0A4 FE 53       	CP	#53		;PageDown
0089   C0A6 CA 2A D7    	JP	Z,TPageDown
0090   C0A9 78          	LD	A,B
0091   C0AA E6 30       	AND	#30
0092   C0AC FE 30       	CP	#30
0093   C0AE C8          	RET	Z
0094   C0AF CB 68       	BIT	5,B
0095   C0B1 C8          	RET	Z
0096   C0B2 7A          	LD	A,D
0097   C0B3 E6 7F       	AND	#7F
0098   C0B5 FE 0E       	CP	#0E
0099   C0B7 CA 9A D3    	JP	Z,TDeleteWord
0100   C0BA FE 54       	CP	#54
0101   C0BC CA F6 D4    	JP	Z,TWordLeft
0102   C0BF FE 56       	CP	#56
0103   C0C1 CA 36 D5    	JP	Z,TWordRight
0104   C0C4 FE 58       	CP	#58
0105   C0C6 CA 35 D6    	JP	Z,TScrollUp
0106   C0C9 FE 52       	CP	#52
0107   C0CB CA 70 D6    	JP	Z,TScrollDown
0108   C0CE FE 57       	CP	#57		;Ctrl+Home
0109   C0D0 CA BF D7    	JP	Z,TBegFile	;в начало файла
0110   C0D3 FE 51       	CP	#51		;Ctrl+PageEnd
0111   C0D5 CA DA D7    	JP	Z,TEndFile	;в конец файла
0112   C0D8 C9          	RET 
0113   C0D9             HEditLoop
0114   C0D9 DD 21 63 E5 	LD	IX,HEXtab
0115   C0DD CD 4B 86    	CALL	TestCoords
0116   C0E0 0E 31       	LD	C,#31		;Ожидаем нажатия клавиш
0117   C0E2 D7          	RST	#10
0118   C0E3 CA 3D C0    	JP	Z,EditorLoop
0119   C0E6 7A          	LD	A,D		;
0120   C0E7 FE 44       	CP	#44		;F10
0121   C0E9 CA 17 C2    	JP	Z,EditorExit
0122   C0EC 7B          	LD	A,E		;Е-ASCII код
0123   C0ED FE 1B       	CP	#1B		;Esc
0124   C0EF CA 17 C2    	JP	Z,EditorExit
0125   C0F2 21 3D C0    	LD	HL,EditorLoop
0126   C0F5 E5          	PUSH	HL
0127   C0F6 B7          	OR	A
0128   C0F7 C2 16 DB    	JP	NZ,HPutSymbol
0129   C0FA 7A          	LD	A,D
0130   C0FB FE 3B       	CP	#3B
0131   C0FD CA D8 C6    	JP	Z,About
0132   C100 FE 3C       	CP	#3C
0133   C102 CA FA CA    	JP	Z,SaveFile
0134   C105 FE 3E       	CP	#3E		;F4
0135   C107 CA A8 C1    	JP	Z,ChEditor	;Просмотр в тексте
0136   C10A FE 3F       	CP	#3F		;F5
0137   C10C CA 4C E0    	JP	Z,HGoTo		;Переход на адрес пользователя
0138   C10F FE 43       	CP	#43
0139   C111 CA 27 E2    	JP	Z,PrintFile
0140   C114 FE 54       	CP	#54
0141   C116 CA 74 DC    	JP	Z,HCursorLeft
0142   C119 FE 56       	CP	#56
0143   C11B CA 9F DC    	JP	Z,HCursorRight
0144   C11E FE 57       	CP	#57		;Home
0145   C120 CA E1 DC    	JP	Z,HHomeString
0146   C123 FE 51       	CP	#51		;End
0147   C125 CA F5 DC    	JP	Z,HEndString
0148   C128 FE 58       	CP	#58		 ;Стрелка вверх
0149   C12A CA 09 DD    	JP	Z,HCursorUp
0150   C12D FE 52       	CP	#52		 ;Стрелка вниз
0151   C12F CA 2A DD    	JP	Z,HCursorDown
0152   C132 FE 59       	CP	#59		 ;PageUp
0153   C134 CA D9 DD    	JP	Z,HPageUp
0154   C137 FE 53       	CP	#53		 ;PageDown
0155   C139 CA FF DD    	JP	Z,HPageDown
0156   C13C 78          	LD	A,B
0157   C13D E6 30       	AND	#30
0158   C13F FE 30       	CP	#30
0159   C141 C8          	RET	Z
0160   C142 CB 68       	BIT	5,B
0161   C144 C8          	RET	Z
0162   C145 7A          	LD	A,D
0163   C146 E6 7F       	AND	#7F
0164   C148 FE 58       	CP	#58
0165   C14A CA 5F DD    	JP	Z,HScrollUp
0166   C14D FE 52       	CP	#52
0167   C14F CA 8B DD    	JP	Z,HScrollDown
0168   C152 FE 57       	CP	#57		;Ctrl+PageUp
0169   C154 CA 40 DE    	JP	Z,HBegFile	;в начало файла
0170   C157 FE 51       	CP	#51		;Ctrl+PageDown
0171   C159 CA 60 DE    	JP	Z,HEndFile	;в конец файла
0172   C15C C9          	RET 
0173   C15D             ;[]==========================================================[]
0174   C15D             EditingFile
0175   C15D 00          	DEFS	#30,0
0176   C18D             EditMode
0177   C18D 00          	DEFB	#00
0178   C18E             HEXmode
0179   C18E 00          	DEFB	#00
0180   C18F             EditData
0181   C18F 00          	DEFB	#00	;Cursor	X
0182   C190 00          	DEFB	#00	;String	X
0183   C191 00          	DEFB	#00	;Cursor	add X
0184   C192 00          	DEFB	#00	;Cursor	Y
0185   C193 00          	DEFB	#00	;Len String
0186   C194 00          	DEFB	#00	;Previos Len String
0187   C195 00          	DEFB	#00	;Ready String
0188   C196 00          	DEFB	#00	;Ready File
0189   C197             CurLine
0190   C197 00 00       	DEFW	#0000
0191   C199             EquipLines
0192   C199 00 00       	DEFW	#0000
0193   C19B             LineShift
0194   C19B 00 00       	DEFW	#0000
0195   C19D             PageShift
0196   C19D 00 00       	DEFW	#0000
0197   C19F             TempShift
0198   C19F 00 00       	DEFW	#0000
0199   C1A1             FileLenght
0200   C1A1 00 00       	DEFW	#0000	;Длина файла (16бит)
0201   C1A3             EmptyLines
0202   C1A3 00          	DEFB	#00
0203   C1A4             MemIndef
0204   C1A4 00          	DEFB	#00
0205   C1A5             FHandle
0206   C1A5 00          	DEFB	#00
0207   C1A6             ReadLen
0208   C1A6             SaveLen
0209   C1A6 00 00       	DEFW	#0000
0210   C1A8             ;[]==========================================================[]
0211   C1A8             ChEditor
0212   C1A8 21 34 C0    	LD	HL,EditorBegin
0213   C1AB E3          	EX	(SP),HL
0214   C1AC 3A 8D C1    	LD	A,(EditMode)
0215   C1AF EE 01       	XOR	#01
0216   C1B1 32 8D C1    	LD	(EditMode),A
0217   C1B4 20 36       	JR	NZ,HEXEdit
0218   C1B6             ASCIIEdit
0219   C1B6 2A 9B C1    	LD	HL,(LineShift)
0220   C1B9 FD 5E 00    	LD	E,(IY+CursorX)
0221   C1BC CB 3B       	SRL	E
0222   C1BE 16 00       	LD	D,#00
0223   C1C0 19          	ADD	HL,DE
0224   C1C1 E5          	PUSH	HL
0225   C1C2 23          	INC	HL
0226   C1C3 CD 97 CE    	CALL	SearchUp
0227   C1C6 22 9B C1    	LD	(LineShift),HL
0228   C1C9 22 9D C1    	LD	(PageShift),HL
0229   C1CC 97          	SUB	A
0230   C1CD FD 77 01    	LD	(IY+StringX),A
0231   C1D0 FD 77 03    	LD	(IY+CursorY),A
0232   C1D3 E5          	PUSH	HL
0233   C1D4 CD 9D CF    	CALL	GetString
0234   C1D7 D1          	POP	DE
0235   C1D8 E1          	POP	HL
0236   C1D9 B7          	OR	A
0237   C1DA ED 52       	SBC	HL,DE
0238   C1DC 7D          	LD	A,L
0239   C1DD FD BE 04    	CP	(IY+LenString)
0240   C1E0 38 03       	JR	C,$+5
0241   C1E2 FD 7E 04    	LD	A,(IY+LenString)
0242   C1E5 3D          	DEC	A
0243   C1E6 FD 77 01    	LD	(IY+StringX),A
0244   C1E9 C3 89 D4    	JP	TCursorRight
0245   C1EC             HEXEdit
0246   C1EC CD 0D D0    	CALL	PutString
0247   C1EF 2A 9B C1    	LD	HL,(LineShift)
0248   C1F2 FD 7E 01    	LD	A,(IY+StringX)
0249   C1F5 FD BE 04    	CP	(IY+LenString)
0250   C1F8 38 03       	JR	C,$+5
0251   C1FA FD 7E 04    	LD	A,(IY+LenString)
0252   C1FD 5F          	LD	E,A
0253   C1FE 16 00       	LD	D,#00
0254   C200 19          	ADD	HL,DE
0255   C201 7D          	LD	A,L
0256   C202 E6 0F       	AND	#0F
0257   C204 87          	ADD	A,A
0258   C205 FD 77 00    	LD	(IY+CursorX),A
0259   C208 7D          	LD	A,L
0260   C209 E6 F0       	AND	#F0
0261   C20B 6F          	LD	L,A
0262   C20C 22 9B C1    	LD	(LineShift),HL
0263   C20F 22 9D C1    	LD	(PageShift),HL
0264   C212 97          	SUB	A
0265   C213 FD 77 03    	LD	(IY+CursorY),A
0266   C216 C9          	RET 
0267   C217             ;[]==========================================================[]
0268   C217             EditorExit
0269   C217 CD 0D D0    	CALL	PutString
0270   C21A CD 87 C6    	CALL	ResCursor
0271   C21D FD 7E 07    	LD	A,(IY+ReadyFile)
0272   C220 B7          	OR	A
0273   C221 CA CB C2    	JP	Z,EditorE
0274   C224 CD 06 86    	CALL	MakeWindow
0275   C227 01          	DEFB	#01
0276   C228 D0 00 50 00 	DEFW	#00D0,#0050
0277   C22C E0 00 3C 00 	DEFW	#00E0,#003C
0278   C230 02          	DEFB	#02	;Head place
0279   C231 04 00 02 00 	DEFW	#0004,#0002
0280   C235 D8 00 0A 00 	DEFW	#00D8,#000A
0281   C239 00          	DEFB	#00
0282   C23A 01          	DEFB	#01	;Text Line
0283   C23B 58 00 03 00 	DEFW	#0058,#0003
0284   C23F 0F          	DEFB	#0F
0285   C240             	DEFB	"Information",0
0285   C240 496E666F726D6174696F6E00
0286   C24C 01          	DEFB	#01	;Text Line
0287   C24D 40 00 13 00 	DEFW	#0040,#0013
0288   C251 80          	DEFB	#80
0289   C252             	DEFB	"File has been modifi.",0
0289   C252 46696C6520686173206265656E206D6F646966692E00
0290   C268 01          	DEFB	#01	;Text Line
0291   C269 60 00 1D 00 	DEFW	#0060,#001D
0292   C26D 80          	DEFB	#80
0293   C26E             	DEFB	"Save ?",0
0293   C26E 53617665203F00
0294   C275 04          	DEFB	#04	;UpRectan
0295   C276 20 00 2A 00 	DEFW	#0020,#002A
0296   C27A 48 00 0E 00 	DEFW	#0048,#000E
0297   C27E 01          	DEFB	#01	;Text Line
0298   C27F 3A 00 2D 00 	DEFW	#003A,#002D
0299   C283 80          	DEFB	#80
0300   C284 59 65 73 00 	DEFB	"Yes",0
0301   C288 04          	DEFB	#04	;UpRectan
0302   C289 78 00 2A 00 	DEFW	#0078,#002A
0303   C28D 48 00 0E 00 	DEFW	#0048,#000E
0304   C291 01          	DEFB	#01	;Text Line
0305   C292 96 00 2D 00 	DEFW	#0096,#002D
0306   C296 80          	DEFB	#80
0307   C297 4E 6F 00    	DEFB	"No",0
0308   C29A 00          	DEFB	#00
0309   C29B             SureLoop
0310   C29B DD 21 77 E6 	LD	IX,SureTab
0311   C29F CD 4B 86    	CALL	TestCoords
0312   C2A2 0E 31       	LD	C,#31
0313   C2A4 D7          	RST	#10
0314   C2A5 28 F4       	JR	Z,SureLoop
0315   C2A7 78          	LD	A,B
0316   C2A8 B7          	OR	A
0317   C2A9 20 F0       	JR	NZ,SureLoop
0318   C2AB 7B          	LD	A,E
0319   C2AC FE 1B       	CP	#1B
0320   C2AE 37          	SCF 
0321   C2AF 28 12       	JR	Z,SureExit
0322   C2B1 FE 0D       	CP	#0D
0323   C2B3 28 0E       	JR	Z,SureExit
0324   C2B5 CB AF       	RES	5,A
0325   C2B7 FE 4E       	CP	"N"
0326   C2B9 28 08       	JR	Z,SureExit
0327   C2BB FE 59       	CP	"Y"
0328   C2BD 20 DC       	JR	NZ,SureLoop
0329   C2BF             SureOkey
0330   C2BF CD FA CA    	CALL	SaveFile
0331   C2C2 B7          	OR	A
0332   C2C3             SureExit
0333   C2C3 CD 06 86    	CALL	MakeWindow
0334   C2C6 7F          	DEFB	#7F
0335   C2C7 00          	DEFB	#00
0336   C2C8 DA 3D C0    	JP	C,EditorLoop
0337   C2CB 3A A4 C1    EditorE	LD	A,(MemIndef)
0338   C2CE 0E 3E       	LD	C,#3E
0339   C2D0 D7          	RST	#10
0340   C2D1 B7          	OR	A
0341   C2D2 C9          	RET 
0342   C2D3             ;[]==========================================================[]
0343   C2D3             InitScreen
0344   C2D3 CD 06 86    	CALL	MakeWindow
0345   C2D6 00          	DEFB	#00	;Main window
0346   C2D7 00 00 00 00 	DEFW	#0000,#0000
0347   C2DB 80 02 00 01 	DEFW	#0280,#0100
0348   C2DF 02          	DEFB	#02	;Head place
0349   C2E0 04 00 02 00 	DEFW	#0004,#0002
0350   C2E4 78 02 0A 00 	DEFW	#0278,#000A
0351   C2E8 00          	DEFB	#00
0352   C2E9 01          	DEFB	#01	;Text Line
0353   C2EA 10 00 03 00 	DEFW	#0010,#0003
0354   C2EE 0F          	DEFB	#0F
0355   C2EF             	DEFB	"FN File Editor v1.00",0
0355   C2EF 464E2046696C6520456469746F722076312E303000
0356   C304 06          	DEFB	#06	;Horizontal line
0357   C305 00 00 0D 00 	DEFW	#0000,#000D
0358   C309 80 02       	DEFW	#0280
0359   C30B 01          	DEFB	#01	;Text Line
0360   C30C 08 00 11 00 	DEFW	#0008,#0011
0361   C310 80          	DEFB	#80
0362   C311             	DEFB	"Editing:",0
0362   C311 45646974696E673A00
0363   C31A             
0364   C31A 07          	DEFB	#07	;Vertical line
0365   C31B 6E 01 10 00 	DEFW	#016E,#0010
0366   C31F 0A 00       	DEFW	#000A
0367   C321             
0368   C321 01          	DEFB	#01	;Text Line
0369   C322 90 01 11 00 	DEFW	#0190,#0011
0370   C326 80          	DEFB	#80
0371   C327             	DEFB	"Line:",0
0371   C327 4C696E653A00
0372   C32D             
0373   C32D 01          	DEFB	#01	;Text Line
0374   C32E E0 01 11 00 	DEFW	#01E0,#0011
0375   C332 80          	DEFB	#80
0376   C333 436F6C3A00  	DEFB	"Col:",0
0377   C338             
0378   C338 01          	DEFB	#01	;Text Line
0379   C339 28 02 11 00 	DEFW	#0228,#0011
0380   C33D 80          	DEFB	#80
0381   C33E             	DEFB	"Free:",0
0381   C33E 467265653A00
0382   C344             
0383   C344 06          	DEFB	#06	;Horizontal line
0384   C345 00 00 1B 00 	DEFW	#0000,#001B
0385   C349 80 02       	DEFW	#0280
0386   C34B             
0387   C34B 06          	DEFB	#06	;Horizontal line
0388   C34C 00 00 E3 00 	DEFW	#0000,#00E3
0389   C350 80 02       	DEFW	#0280
0390   C352             
0391   C352 0A          	DEFB	#0A		;Кнопка	SB верхняя
0392   C353 70 02 1C 00 	DEFW	#0270,#001C
0393   C357             
0394   C357 02          	DEFB	#02		;Fill
0395   C358 70 02 24 00 	DEFW	#0270,#0024
0396   C35C 10 00 B8 00 	DEFW	#0010,#00B8
0397   C360 08          	DEFB	#08
0398   C361             
0399   C361 0B          	DEFB	#0B		;Кнопка	SB нижняя
0400   C362 70 02 DC 00 	DEFW	#0270,#00DC
0401   C366             
0402   C366 00          	DEFB	#00
0403   C367             
0404   C367 0E 02       	LD	C,#02
0405   C369 D7          	RST	#10
0406   C36A 21 00 80    	LD	HL,WorkBuffer
0407   C36D C6 41       	ADD	A,"A"
0408   C36F 77          	LD	(HL),A
0409   C370 23          	INC	HL
0410   C371 36 3A       	LD	(HL),":"
0411   C373 23          	INC	HL
0412   C374 0E 1E       	LD	C,#1E
0413   C376 E5          	PUSH	HL
0414   C377 D7          	RST	#10
0415   C378 E1          	POP	HL
0416   C379 97          	SUB	A
0417   C37A 23          	INC	HL
0418   C37B BE          	CP	(HL)
0419   C37C 20 FC       	JR	NZ,$-2
0420   C37E 2B          	DEC	HL
0421   C37F 3E 5C       	LD	A,"\\"
0422   C381 BE          	CP	(HL)
0423   C382 23          	INC	HL
0424   C383 28 02       	JR	Z,$+4
0425   C385 77          	LD	(HL),A
0426   C386 23          	INC	HL
0427   C387 EB          	EX	DE,HL
0428   C388 21 7E C1    	LD	HL,EditingFile+33
0429   C38B 97          	SUB	A
0430   C38C ED A0       	LDI 
0431   C38E BE          	CP	(HL)
0432   C38F 20 FB       	JR	NZ,$-3
0433   C391 12          	LD	(DE),A
0434   C392 DD 21 30 01 	LD	IX,#0130
0435   C396 21 00 80    	LD	HL,WorkBuffer
0436   C399 11 30 00    	LD	DE,#0030
0437   C39C 01 11 00    	LD	BC,#0011
0438   C39F 3E 80       	LD	A,#80
0439   C3A1 CD 15 86    	CALL	PrnRangPathL
0440   C3A4 21 FC 01    	LD	HL,#01FC
0441   C3A7 11 03 00    	LD	DE,#0003
0442   C3AA 06 08       	LD	B,#08
0443   C3AC D9          	EXX 
0444   C3AD 21 2E 02    	LD	HL,#022E
0445   C3B0 11 03 00    	LD	DE,#0003
0446   C3B3 06 08       	LD	B,#08
0447   C3B5 D9          	EXX 
0448   C3B6 3E 02       	LD	A,#02
0449   C3B8 CD 4E 86    	CALL	SetCMOSPrint
0450   C3BB C9          	RET 
0451   C3BC             ;[]==========================================================[]
0452   C3BC             InitStatus
0453   C3BC 3A 8D C1    	LD	A,(EditMode)
0454   C3BF B7          	OR	A
0455   C3C0 C2 7B C4    	JP	NZ,InitHEXStatus
0456   C3C3             
0457   C3C3 CD 06 86    	CALL	MakeWindow
0458   C3C6 80          	DEFB	#80
0459   C3C7             
0460   C3C7 02          	DEFB	#02	;Head Place
0461   C3C8 00 00 1C 00 	DEFW	#0000,#001C
0462   C3CC 70 02 C8 00 	DEFW	#0270,#00C8
0463   C3D0 09          	DEFB	PanelCol
0464   C3D1             
0465   C3D1 06          	DEFB	#06	;Horizontal line
0466   C3D2 00 00 EB 00 	DEFW	#0000,#00EB
0467   C3D6 72 02       	DEFW	#0272
0468   C3D8             
0469   C3D8 07          	DEFB	#07	;Vertical line
0470   C3D9 6E 02 E4 00 	DEFW	#026E,#00E4
0471   C3DD 08 00       	DEFW	#0008
0472   C3DF             
0473   C3DF 08          	DEFB	#08		;Кнопка	SB левая
0474   C3E0 00 00 E4 00 	DEFW	#0000,#00E4
0475   C3E4             
0476   C3E4 02          	DEFB	#02		;Fill
0477   C3E5 10 00 E4 00 	DEFW	#0010,#00E4
0478   C3E9 50 02 08 00 	DEFW	#0250,#0008
0479   C3ED 08          	DEFB	#08
0480   C3EE             
0481   C3EE 09          	DEFB	#09		;Кнопка	SB правая
0482   C3EF 60 02 E4 00 	DEFW	#0260,#00E4
0483   C3F3             
0484   C3F3 06          	DEFB	#06	;Horizontal line
0485   C3F4 00 00 F1 00 	DEFW	#0000,#00F1
0486   C3F8 80 02       	DEFW	#0280
0487   C3FA             
0488   C3FA 02          	DEFB	#02
0489   C3FB 02 00 F3 00 	DEFW	#0002,#00F3
0490   C3FF 7C 02 0C 00 	DEFW	#027C,#000C
0491   C403 08          	DEFB	#08
0492   C404             
0493   C404 04          	DEFB	#04	;UpRectan
0494   C405 00 00 F2 00 	DEFW	#0000,#00F2
0495   C409 50 00 0E 00 	DEFW	#0050,#000E
0496   C40D 01          	DEFB	#01	;Text Line
0497   C40E 12 00 F5 00 	DEFW	#0012,#00F5
0498   C412 80          	DEFB	#80
0499   C413             	DEFB	"F1 About",0
0499   C413 46312041626F757400
0500   C41C             
0501   C41C 04          	DEFB	#04	;UpRectan
0502   C41D 50 00 F2 00 	DEFW	#0050,#00F2
0503   C421 50 00 0E 00 	DEFW	#0050,#000E
0504   C425 01          	DEFB	#01	;Text Line
0505   C426 64 00 F5 00 	DEFW	#0064,#00F5
0506   C42A 80          	DEFB	#80
0507   C42B             	DEFB	"F2 Save",0
0507   C42B 4632205361766500
0508   C433             
0509   C433 04          	DEFB	#04	;UpRectan
0510   C434 A0 00 F2 00 	DEFW	#00A0,#00F2
0511   C438 50 00 0E 00 	DEFW	#0050,#000E
0512   C43C 01          	DEFB	#01	;Text Line
0513   C43D B8 00 F5 00 	DEFW	#00B8,#00F5
0514   C441 80          	DEFB	#80
0515   C442             	DEFB	"F4 Hex",0
0515   C442 46342048657800
0516   C449             
0517   C449 04          	DEFB	#04	;UpRectan
0518   C44A E0 01 F2 00 	DEFW	#01E0,#00F2
0519   C44E 50 00 0E 00 	DEFW	#0050,#000E
0520   C452 01          	DEFB	#01	;Text Line
0521   C453 F6 01 F5 00 	DEFW	#01F6,#00F5
0522   C457 80          	DEFB	#80
0523   C458             	DEFB	"F9 Print",0
0523   C458 4639205072696E7400
0524   C461             
0525   C461 04          	DEFB	#04	;UpRectan
0526   C462 30 02 F2 00 	DEFW	#0230,#00F2
0527   C466 50 00 0E 00 	DEFW	#0050,#000E
0528   C46A 01          	DEFB	#01	;Text Line
0529   C46B 44 02 F5 00 	DEFW	#0244,#00F5
0530   C46F 80          	DEFB	#80
0531   C470             	DEFB	"F10 Quit",0
0531   C470 463130205175697400
0532   C479 00          	DEFB	#00
0533   C47A C9          	RET 
0534   C47B             InitHEXStatus
0535   C47B CD 06 86    	CALL	MakeWindow
0536   C47E 80          	DEFB	#80
0537   C47F             
0538   C47F 06          	DEFB	#06	;Horizontal line
0539   C480 00 00 E3 00 	DEFW	#0000,#00E3
0540   C484 80 02       	DEFW	#0280
0541   C486             
0542   C486 02          	DEFB	#02	;Head Place
0543   C487 00 00 1C 00 	DEFW	#0000,#001C
0544   C48B 70 02 C8 00 	DEFW	#0270,#00C8
0545   C48F 09          	DEFB	PanelCol
0546   C490             
0547   C490 02          	DEFB	#02		;Fill
0548   C491 02 00 E5 00 	DEFW	#0002,#00E5
0549   C495 7C 02 0A 00 	DEFW	#027C,#000A
0550   C499 08          	DEFB	#08
0551   C49A             
0552   C49A 06          	DEFB	#06	;Horizontal line
0553   C49B 00 00 F1 00 	DEFW	#0000,#00F1
0554   C49F 80 02       	DEFW	#0280
0555   C4A1             
0556   C4A1 02          	DEFB	#02
0557   C4A2 02 00 F3 00 	DEFW	#0002,#00F3
0558   C4A6 7C 02 0C 00 	DEFW	#027C,#000C
0559   C4AA 08          	DEFB	#08
0560   C4AB 04          	DEFB	#04	;UpRectan
0561   C4AC 00 00 F2 00 	DEFW	#0000,#00F2
0562   C4B0 50 00 0E 00 	DEFW	#0050,#000E
0563   C4B4 01          	DEFB	#01	;Text Line
0564   C4B5 12 00 F5 00 	DEFW	#0012,#00F5
0565   C4B9 80          	DEFB	#80
0566   C4BA             	DEFB	"F1 About",0
0566   C4BA 46312041626F757400
0567   C4C3 04          	DEFB	#04	;UpRectan
0568   C4C4 50 00 F2 00 	DEFW	#0050,#00F2
0569   C4C8 50 00 0E 00 	DEFW	#0050,#000E
0570   C4CC 01          	DEFB	#01	;Text Line
0571   C4CD 64 00 F5 00 	DEFW	#0064,#00F5
0572   C4D1 80          	DEFB	#80
0573   C4D2             	DEFB	"F2 Save",0
0573   C4D2 4632205361766500
0574   C4DA 04          	DEFB	#04	;UpRectan
0575   C4DB A0 00 F2 00 	DEFW	#00A0,#00F2
0576   C4DF 50 00 0E 00 	DEFW	#0050,#000E
0577   C4E3 01          	DEFB	#01	;Text Line
0578   C4E4 B6 00 F5 00 	DEFW	#00B6,#00F5
0579   C4E8 80          	DEFB	#80
0580   C4E9             	DEFB	"F4 ASCII",0
0580   C4E9 463420415343494900
0581   C4F2 04          	DEFB	#04	;UpRectan
0582   C4F3 F0 00 F2 00 	DEFW	#00F0,#00F2
0583   C4F7 50 00 0E 00 	DEFW	#0050,#000E
0584   C4FB 01          	DEFB	#01	;Text Line
0585   C4FC 02 01 F5 00 	DEFW	#0102,#00F5
0586   C500 80          	DEFB	#80
0587   C501             	DEFB	"F5 Go to",0
0587   C501 463520476F20746F00
0588   C50A 04          	DEFB	#04	;UpRectan
0589   C50B E0 01 F2 00 	DEFW	#01E0,#00F2
0590   C50F 50 00 0E 00 	DEFW	#0050,#000E
0591   C513 01          	DEFB	#01	;Text Line
0592   C514 F6 01 F5 00 	DEFW	#01F6,#00F5
0593   C518 80          	DEFB	#80
0594   C519             	DEFB	"F9 Print",0
0594   C519 4639205072696E7400
0595   C522 04          	DEFB	#04	;UpRectan
0596   C523 30 02 F2 00 	DEFW	#0230,#00F2
0597   C527 50 00 0E 00 	DEFW	#0050,#000E
0598   C52B 01          	DEFB	#01	;Text Line
0599   C52C 44 02 F5 00 	DEFW	#0244,#00F5
0600   C530 80          	DEFB	#80
0601   C531             	DEFB	"F10 Quit",0
0601   C531 463130205175697400
0602   C53A 00          	DEFB	#00
0603   C53B C9          	RET 
0604   C53C             ;[]==========================================================[]
0605   C53C             InitFile
0606   C53C 3A 8D C1    	LD	A,(EditMode)
0607   C53F B7          	OR	A
0608   C540 20 57       	JR	NZ,InitFileHex
0609   C542 CD 54 86    	CALL	SetClock
0610   C545 21 00 00    	LD	HL,#0000
0611   C548 5D          	LD	E,L
0612   C549 54          	LD	D,H
0613   C54A E5          InitAlp	PUSH	HL
0614   C54B ED 4B 9B C1 	LD	BC,(LineShift)
0615   C54F B7          	OR	A
0616   C550 ED 42       	SBC	HL,BC
0617   C552 E1          	POP	HL
0618   C553 20 04       	JR	NZ,$+6
0619   C555 ED 53 97 C1 	LD	(CurLine),DE
0620   C559 D5          	PUSH	DE
0621   C55A CD 18 CF    	CALL	SearchDown
0622   C55D D1          	POP	DE
0623   C55E 13          	INC	DE
0624   C55F 30 E9       	JR	NC,InitAlp
0625   C561 1B          	DEC	DE
0626   C562 ED 53 99 C1 	LD	(EquipLines),DE
0627   C566 ED 53 F6 C5 	LD	(ELines),DE
0628   C56A 21 07 E5    	LD	HL,TBarU
0629   C56D 22 F0 C5    	LD	(BarPgU),HL
0630   C570 21 15 E5    	LD	HL,TBarD
0631   C573 22 F2 C5    	LD	(BarPgD),HL
0632   C576 DD 21 E8 C5 	LD	IX,EditVBar
0633   C57A CD 2A 86    	CALL	InitScrBar
0634   C57D 21 F0 00    	LD	HL,#00F0
0635   C580 22 08 C6    	LD	(CScrnX),HL
0636   C583 DD 21 FA C5 	LD	IX,EditHBar
0637   C587 CD 2A 86    	CALL	InitScrBar
0638   C58A 21 FF FF    	LD	HL,#FFFF
0639   C58D 22 F8 C5    	LD	(CLine),HL
0640   C590 26 00       	LD	H,#00
0641   C592 22 0A C6    	LD	(CAddX),HL
0642   C595 CD 57 86    	CALL	SetMouse
0643   C598 C9          	RET 
0644   C599             InitFileHex
0645   C599 2A A1 C1    	LD	HL,(FileLenght)
0646   C59C 7D          	LD	A,L
0647   C59D CB 3C       	SRL	H
0648   C59F CB 1D       	RR	L
0649   C5A1 CB 3C       	SRL	H
0650   C5A3 CB 1D       	RR	L
0651   C5A5 CB 3C       	SRL	H
0652   C5A7 CB 1D       	RR	L
0653   C5A9 CB 3C       	SRL	H
0654   C5AB CB 1D       	RR	L
0655   C5AD E6 0F       	AND	#0F
0656   C5AF 28 01       	JR	Z,$+3
0657   C5B1 23          	INC	HL
0658   C5B2 22 99 C1    	LD	(EquipLines),HL
0659   C5B5 22 F6 C5    	LD	(ELines),HL
0660   C5B8 2A 9B C1    	LD	HL,(LineShift)
0661   C5BB CB 3C       	SRL	H
0662   C5BD CB 1D       	RR	L
0663   C5BF CB 3C       	SRL	H
0664   C5C1 CB 1D       	RR	L
0665   C5C3 CB 3C       	SRL	H
0666   C5C5 CB 1D       	RR	L
0667   C5C7 CB 3C       	SRL	H
0668   C5C9 CB 1D       	RR	L
0669   C5CB 22 97 C1    	LD	(CurLine),HL
0670   C5CE 21 09 E6    	LD	HL,HBarU
0671   C5D1 22 F0 C5    	LD	(BarPgU),HL
0672   C5D4 21 17 E6    	LD	HL,HBarD
0673   C5D7 22 F2 C5    	LD	(BarPgD),HL
0674   C5DA DD 21 E8 C5 	LD	IX,EditVBar
0675   C5DE CD 2A 86    	CALL	InitScrBar
0676   C5E1 21 FF FF    	LD	HL,#FFFF
0677   C5E4 22 F8 C5    	LD	(CLine),HL
0678   C5E7 C9          	RET 
0679   C5E8             EditVBar
0680   C5E8 70 02       	DEFW	#0270	;X позиция скролбара
0681   C5EA 24 00       	DEFW	#0024	;Y позиция скролбара
0682   C5EC B8 00       	DEFW	#00B8	;Max длина скролбара
0683   C5EE 00 00       	DEFW	#0000	;тек.длина скролбара
0684   C5F0 00 00       BarPgU	DEFW	#0000	;Адрес ячейки BarLeft
0685   C5F2 00 00       BarPgD	DEFW	#0000	;Адрес ячейки BarRight
0686   C5F4 19 00       	DEFW	#0019	;Кол-во	строк на странице
0687   C5F6 00 00       ELines	DEFW	#0000	;Общее кол-во строк
0688   C5F8 00 00       CLine	DEFW	#0000	;Первая	строка на странице
0689   C5FA             EditHBar
0690   C5FA 10 00       	DEFW	#0010	;X позиция скролбара
0691   C5FC E4 00       	DEFW	#00E4	;Y позиция скролбара
0692   C5FE 50 02       	DEFW	#0250	;Max длина скролбара
0693   C600 00 00       	DEFW	#0000	;тек.длина скролбара
0694   C602 43 E5       	DEFW	TBarL	;Адрес ячейки BarLeft
0695   C604 51 E5       	DEFW	TBarR	;Адрес ячейки BarRight
0696   C606 4E 00       	DEFW	#004E	;Кол-во	строк на странице
0697   C608 00 00       CScrnX	DEFW	#0000	;Общее кол-во строк
0698   C60A 00 00       CAddX	DEFW	#0000	;Первая	строка на странице
0699   C60C             ;[]==========================================================[]
0700   C60C             PrintPage
0701   C60C 3A 8D C1    	LD	A,(EditMode)
0702   C60F B7          	OR	A
0703   C610 CA AD CC    	JP	Z,PrnASCIIpage
0704   C613 C3 D5 D8    	JP	PrnHEXpage
0705   C616             PrnEDITinfo
0706   C616 3A 8D C1    	LD	A,(EditMode)
0707   C619 B7          	OR	A
0708   C61A CA 5F D1    	JP	Z,PrnASCIIinfo
0709   C61D C3 43 DA    	JP	PrnHEXinfo
0710   C620             ;[]==========================================================[]
0711   C620             ChCursor
0712   C620 76          	HALT 
0713   C621 21 CC C6    	LD	HL,CrTimer
0714   C624 35          	DEC	(HL)
0715   C625 C0          	RET	NZ
0716   C626 36 0E       	LD	(HL),CursTimer
0717   C628 3A CD C6    	LD	A,(CurCursor)
0718   C62B EE 01       	XOR	#01
0719   C62D 32 CD C6    	LD	(CurCursor),A
0720   C630 28 5D       	JR	Z,ResCurs
0721   C632 18 0E       	JR	SetCurs
0722   C634             SetCursor
0723   C634 ED 53 CE C6 	LD	(CursorPos),DE
0724   C638 3E 01       	LD	A,#01
0725   C63A 32 CD C6    	LD	(CurCursor),A
0726   C63D 3E 0E       	LD	A,CursTimer
0727   C63F 32 CC C6    	LD	(CrTimer),A
0728   C642 DB A2       SetCurs	IN	A,(PAGE1)
0729   C644 F5          	PUSH	AF
0730   C645 DB 89       	IN	A,(YPORT)
0731   C647 F5          	PUSH	AF
0732   C648 3E 50       	LD	A,#50
0733   C64A D3 A2       	OUT	(PAGE1),A
0734   C64C ED 5B CE C6 	LD	DE,(CursorPos)
0735   C650 6B          	LD	L,E
0736   C651 26 00       	LD	H,#00
0737   C653 29          	ADD	HL,HL
0738   C654 29          	ADD	HL,HL
0739   C655 CB F4       	SET	6,H
0740   C657 7A          	LD	A,D
0741   C658 87          	ADD	A,A
0742   C659 87          	ADD	A,A
0743   C65A 87          	ADD	A,A
0744   C65B C6 22       	ADD	A,#22
0745   C65D 4F          	LD	C,A
0746   C65E 06 AA       	LD	B,FileCol*#10+FileCol
0747   C660 F3          	DI 
0748   C661 11 D0 C6    	LD	DE,CursBuffer
0749   C664 79          	LD	A,C
0750   C665 D3 89       	OUT	(YPORT),A
0751   C667 52          	LD	D,D
0752   C668 3E 04       	LD	A,#04
0753   C66A 6D          	LD	L,L
0754   C66B 7E          	LD	A,(HL)
0755   C66C 12          	LD	(DE),A
0756   C66D 40          	LD	B,B
0757   C66E 49          	LD	C,C
0758   C66F 70          	LD	(HL),B
0759   C670 40          	LD	B,B
0760   C671 0C          	INC	C
0761   C672 11 D4 C6    	LD	DE,CursBuffer+4
0762   C675 79          	LD	A,C
0763   C676 D3 89       	OUT	(YPORT),A
0764   C678 6D          	LD	L,L
0765   C679 7E          	LD	A,(HL)
0766   C67A 12          	LD	(DE),A
0767   C67B 40          	LD	B,B
0768   C67C 49          	LD	C,C
0769   C67D 70          	LD	(HL),B
0770   C67E 40          	LD	B,B
0771   C67F FB          	EI 
0772   C680 F1          	POP	AF
0773   C681 D3 89       	OUT	(YPORT),A
0774   C683 F1          	POP	AF
0775   C684 D3 A2       	OUT	(PAGE1),A
0776   C686 C9          	RET 
0777   C687             ResCursor
0778   C687 97          	SUB	A
0779   C688 32 CD C6    	LD	(CurCursor),A
0780   C68B 3C          	INC	A
0781   C68C 32 CC C6    	LD	(CrTimer),A
0782   C68F DB A2       ResCurs	IN	A,(PAGE1)
0783   C691 F5          	PUSH	AF
0784   C692 DB 89       	IN	A,(YPORT)
0785   C694 F5          	PUSH	AF
0786   C695 3E 50       	LD	A,#50
0787   C697 D3 A2       	OUT	(PAGE1),A
0788   C699 ED 5B CE C6 	LD	DE,(CursorPos)
0789   C69D 6B          	LD	L,E
0790   C69E 26 00       	LD	H,#00
0791   C6A0 29          	ADD	HL,HL
0792   C6A1 29          	ADD	HL,HL
0793   C6A2 CB F4       	SET	6,H
0794   C6A4 7A          	LD	A,D
0795   C6A5 87          	ADD	A,A
0796   C6A6 87          	ADD	A,A
0797   C6A7 87          	ADD	A,A
0798   C6A8 C6 22       	ADD	A,#22
0799   C6AA 4F          	LD	C,A
0800   C6AB F3          	DI 
0801   C6AC 11 D0 C6    	LD	DE,CursBuffer
0802   C6AF 79          	LD	A,C
0803   C6B0 D3 89       	OUT	(YPORT),A
0804   C6B2 52          	LD	D,D
0805   C6B3 3E 04       	LD	A,#04
0806   C6B5 6D          	LD	L,L
0807   C6B6 1A          	LD	A,(DE)
0808   C6B7 77          	LD	(HL),A
0809   C6B8 40          	LD	B,B
0810   C6B9 0C          	INC	C
0811   C6BA 11 D4 C6    	LD	DE,CursBuffer+4
0812   C6BD 79          	LD	A,C
0813   C6BE D3 89       	OUT	(YPORT),A
0814   C6C0 6D          	LD	L,L
0815   C6C1 1A          	LD	A,(DE)
0816   C6C2 77          	LD	(HL),A
0817   C6C3 40          	LD	B,B
0818   C6C4 FB          	EI 
0819   C6C5 F1          	POP	AF
0820   C6C6 D3 89       	OUT	(YPORT),A
0821   C6C8 F1          	POP	AF
0822   C6C9 D3 A2       	OUT	(PAGE1),A
0823   C6CB C9          	RET 
0824   C6CC             CrTimer
0825   C6CC 01          	DEFB	#01
0826   C6CD             CurCursor
0827   C6CD 00          	DEFB	#00
0828   C6CE             CursorPos
0829   C6CE 00 00       	DEFW	#0000
0830   C6D0             CursBuffer
0831   C6D0 00          	DEFS	8,0
0832   C6D8             ;[]==========================================================[]
0833   C6D8             About
0834   C6D8 CD 87 C6    	CALL	ResCursor
0835   C6DB CD 06 86    	CALL	MakeWindow
0836   C6DE 01          	DEFB	#01
0837   C6DF A0 00 48 00 	DEFW	#00A0,#0048
0838   C6E3 40 01 55 00 	DEFW	#0140,#0055
0839   C6E7 02          	DEFB	#02	;Head place
0840   C6E8 04 00 02 00 	DEFW	#0004,#0002
0841   C6EC 38 01 0A 00 	DEFW	#0138,#000A
0842   C6F0 00          	DEFB	#00
0843   C6F1 01          	DEFB	#01	;Text Line
0844   C6F2 90 00 03 00 	DEFW	#0090,#0003
0845   C6F6 0F          	DEFB	#0F
0846   C6F7             	DEFB	"About",0
0846   C6F7 41626F757400
0847   C6FD 01          	DEFB	#01	;Text Line
0848   C6FE 60 00 12 00 	DEFW	#0060,#0012
0849   C702 80          	DEFB	#80
0850   C703             	DEFB	"Flex Navigator File Editor",0
0850   C703 466C6578204E6176696761746F722046696C6520456469746F7200
0851   C71E 01          	DEFB	#01	;Text Line
0852   C71F 90 00 1C 00 	DEFW	#0090,#001C
0853   C723 80          	DEFB	#80
0854   C724             	DEFB	"v1.00",0
0854   C724 76312E303000
0855   C72A 01          	DEFB	#01	;Text Line
0856   C72B 12 00 28 00 	DEFW	#0012,#0028
0857   C72F 80          	DEFB	#80
0858   C730             	DEFB	"Programming:  Enin Anton      "
0858   C730 50726F6772616D6D696E673A2020456E696E20416E746F6E202020202020
0859   C74E             	DEFB	"Release data:  25/08/1999",0
0859   C74E 52656C6561736520646174613A202032352F30382F3139393900
0860   C768 01          	DEFB	#01	;Text Line
0861   C769 44 00 35 00 	DEFW	#0044,#0035
0862   C76D 80          	DEFB	#80
0863   C76E             	DEFB	"All right reserved. "
0863   C76E 416C6C2072696768742072657365727665642E20
0864   C782             	DEFB	"Copyright (C)1999",0
0864   C782 436F70797269676874202843293139393900
0865   C794 04          	DEFB	#04	;UpRectan
0866   C795 7C 00 42 00 	DEFW	#007C,#0042
0867   C799 48 00 0E 00 	DEFW	#0048,#000E
0868   C79D 01          	DEFB	#01	;Text Line
0869   C79E 9A 00 45 00 	DEFW	#009A,#0045
0870   C7A2 80          	DEFB	#80
0871   C7A3 4F 6B 00    	DEFB	"Ok",0
0872   C7A6 00          	DEFB	#00
0873   C7A7             AboutLoop
0874   C7A7 DD 21 25 E6 	LD	IX,AboutTab
0875   C7AB CD 4B 86    	CALL	TestCoords
0876   C7AE 0E 31       	LD	C,#31
0877   C7B0 D7          	RST	#10
0878   C7B1 28 F4       	JR	Z,AboutLoop
0879   C7B3 78          	LD	A,B
0880   C7B4 B7          	OR	A
0881   C7B5 20 F0       	JR	NZ,AboutLoop
0882   C7B7 7B          	LD	A,E
0883   C7B8 FE 1B       	CP	#1B
0884   C7BA 28 0A       	JR	Z,AboutExt
0885   C7BC FE 0D       	CP	#0D
0886   C7BE 28 06       	JR	Z,AboutExt
0887   C7C0 CB AF       	RES	5,A
0888   C7C2 FE 4F       	CP	"O"
0889   C7C4 20 E1       	JR	NZ,AboutLoop
0890   C7C6             AboutExt
0891   C7C6 CD 06 86    	CALL	MakeWindow
0892   C7C9 7F          	DEFB	#7F
0893   C7CA 00          	DEFB	#00
0894   C7CB C9          	RET 
0895   C7CC             ;[]==========================================================[]
0896   C7CC             ScrollSCRup
0897   C7CC 11 1C 24    	LD	DE,#241C
0898   C7CF 18 03       	JR	ScrlSCRDnUp
0899   C7D1             ScrollSCRdown
0900   C7D1 11 24 1C    	LD	DE,#1C24
0901   C7D4             ;На вход:
0902   C7D4             ;	 D  - Y	откуда
0903   C7D4             ;	 Е  - Y	куда
0904   C7D4             ScrlSCRDnUp
0905   C7D4 F3          	DI 
0906   C7D5 0E 83       	LD	C,#83
0907   C7D7 D5          	PUSH	DE
0908   C7D8 F7          	RST	#30
0909   C7D9 D1          	POP	DE
0910   C7DA DB A2       	IN	A,(PAGE1)
0911   C7DC F5          	PUSH	AF
0912   C7DD 3E 50       	LD	A,#50
0913   C7DF D3 A2       	OUT	(PAGE1),A
0914   C7E1 21 00 40    	LD	HL,#4000
0915   C7E4 01 38 01    	LD	BC,312
0916   C7E7 52          	LD	D,D
0917   C7E8 3E C0       	LD	A,#C0
0918   C7EA 40          	LD	B,B
0919   C7EB 7A          ScSCRN1	LD	A,D
0920   C7EC D3 89       	OUT	(YPORT),A
0921   C7EE 7F          	LD	A,A
0922   C7EF 7E          	LD	A,(HL)
0923   C7F0 40          	LD	B,B
0924   C7F1 7B          	LD	A,E
0925   C7F2 D3 89       	OUT	(YPORT),A
0926   C7F4 7F          	LD	A,A
0927   C7F5 77          	LD	(HL),A
0928   C7F6 40          	LD	B,B
0929   C7F7 23          	INC	HL
0930   C7F8 0B          	DEC	BC
0931   C7F9 78          	LD	A,B
0932   C7FA B1          	OR	C
0933   C7FB 20 EE       	JR	NZ,ScSCRN1
0934   C7FD F1          	POP	AF
0935   C7FE D3 A2       	OUT	(PAGE1),A
0936   C800 FB          	EI 
0937   C801 C9          	RET 
0938   C802             ;[]==========================================================[]
0939   C802             	INCLUDE	"FEDOS.z80";,#0C
0001+  C802             
0002+  C802             ;[]==========================================================[]
0003+  C802             LoadFile
0004+  C802 CD 54 86    	CALL	SetClock
0005+  C805 11 5D C1    	LD	DE,EditingFile
0006+  C808 01 19 01    	LD	BC,#0119
0007+  C80B 3E 37       	LD	A,#37
0008+  C80D E5          	PUSH	HL
0009+  C80E D7          	RST	#10
0010+  C80F E1          	POP	HL
0011+  C810 DA B2 C9    	JP	C,NewFile
0012+  C813 21 7E C1    	LD	HL,EditingFile+33
0013+  C816 7E          	LD	A,(HL)
0014+  C817 CD 93 CC    LoadFl0	CALL	CorrBigChar
0015+  C81A 77          	LD	(HL),A
0016+  C81B 23          	INC	HL
0017+  C81C 7E          	LD	A,(HL)
0018+  C81D B7          	OR	A
0019+  C81E 20 F7       	JR	NZ,LoadFl0
0020+  C820 DD 21 5D C1 	LD	IX,EditingFile
0021+  C824 DD 6E 1C    	LD	L,(IX+28)
0022+  C827 DD 66 1D    	LD	H,(IX+29)
0023+  C82A 7C          	LD	A,H
0024+  C82B E6 C0       	AND	#C0
0025+  C82D FE C0       	CP	#C0
0026+  C82F 3E 1E       	LD	A,#1E
0027+  C831 F5          	PUSH	AF
0028+  C832 CC A8 86    	CALL	Z,DOSError	;!!!!!!!!!!!! Нет памяти
0029+  C835 F1          	POP	AF
0030+  C836 37          	SCF 
0031+  C837 CA 98 C9    	JP	Z,LoadExit
0032+  C83A 22 A1 C1    	LD	(FileLenght),HL
0033+  C83D DD 7E 1E    	LD	A,(IX+30)
0034+  C840 DD B6 1F    	OR	(IX+31)
0035+  C843 3E 1E       	LD	A,#1E
0036+  C845 F5          	PUSH	AF
0037+  C846 C4 A8 86    	CALL	NZ,DOSError	;!!!!!!!!!!!! Нет памяти
0038+  C849 F1          	POP	AF
0039+  C84A 37          	SCF 
0040+  C84B C2 98 C9    	JP	NZ,LoadExit
0041+  C84E 01 3D 03    	LD	BC,#033D
0042+  C851 D7          	RST	#10
0043+  C852 F5          	PUSH	AF
0044+  C853 DC A8 86    	CALL	C,DOSError	;!!!!!!!!!!!! Нет памяти
0045+  C856 F1          	POP	AF
0046+  C857 DA 98 C9    	JP	C,LoadExit
0047+  C85A 32 A4 C1    	LD	(MemIndef),A
0048+  C85D 21 00 84    	LD	HL,PagesList
0049+  C860 0E C5       	LD	C,#C5
0050+  C862 CF          	RST	#08
0051+  C863 DD 21 80 CC 	LD	IX,ProcessEdit
0052+  C867 2A A1 C1    	LD	HL,(FileLenght)
0053+  C86A 7C          	LD	A,H
0054+  C86B E6 C0       	AND	#C0
0055+  C86D 07          	RLCA 
0056+  C86E 07          	RLCA 
0057+  C86F DD 77 0A    	LD	(IX+ProcMAXl1),A
0058+  C872 97          	SUB	A
0059+  C873 DD 77 0B    	LD	(IX+ProcMAXh1),A
0060+  C876 DD 77 0C    	LD	(IX+ProcMAXl2),A
0061+  C879 DD 77 0D    	LD	(IX+ProcMAXh2),A
0062+  C87C CD 33 86    	CALL	InitProcess
0063+  C87F CD 06 86    	CALL	MakeWindow
0064+  C882 01          	DEFB	#01
0065+  C883 A0 00 58 00 	DEFW	#00A0,#0058
0066+  C887 40 01 30 00 	DEFW	#0140,#0030
0067+  C88B 02          	DEFB	#02	;Head place
0068+  C88C 04 00 02 00 	DEFW	#0004,#0002
0069+  C890 38 01 0A 00 	DEFW	#0138,#000A
0070+  C894 00          	DEFB	#00
0071+  C895 01          	DEFB	#01	;Text Line
0072+  C896 70 00 03 00 	DEFW	#0070,#0003
0073+  C89A 0F          	DEFB	#0F
0074+  C89B             	DEFB	"FN File Editor v1.00",0
0074+  C89B 464E2046696C6520456469746F722076312E303000
0075+  C8B0 01          	DEFB	#01	;Text Line
0076+  C8B1 08 00 10 00 	DEFW	#0008,#0010
0077+  C8B5 80          	DEFB	#80
0078+  C8B6             	DEFB	"Reading:",0
0078+  C8B6 52656164696E673A00
0079+  C8BF 03          	DEFB	#03	;Углубление
0080+  C8C0 10 00 1C 00 	DEFW	#0010,#001C
0081+  C8C4 20 01 0C 00 	DEFW	#0120,#000C
0082+  C8C8 02          	DEFB	#02	;Head place
0083+  C8C9 12 00 1D 00 	DEFW	#0012,#001D
0084+  C8CD 1C 01 0A 00 	DEFW	#011C,#000A
0085+  C8D1 0F          	DEFB	#0F
0086+  C8D2 00          	DEFB	#00
0087+  C8D3 0E 02       	LD	C,#02
0088+  C8D5 D7          	RST	#10
0089+  C8D6 21 00 80    	LD	HL,WorkBuffer
0090+  C8D9 C6 41       	ADD	A,"A"
0091+  C8DB 77          	LD	(HL),A
0092+  C8DC 23          	INC	HL
0093+  C8DD 36 3A       	LD	(HL),":"
0094+  C8DF 23          	INC	HL
0095+  C8E0 0E 1E       	LD	C,#1E
0096+  C8E2 E5          	PUSH	HL
0097+  C8E3 D7          	RST	#10
0098+  C8E4 E1          	POP	HL
0099+  C8E5 97          	SUB	A
0100+  C8E6 23          	INC	HL
0101+  C8E7 BE          	CP	(HL)
0102+  C8E8 20 FC       	JR	NZ,$-2
0103+  C8EA 2B          	DEC	HL
0104+  C8EB 3E 5C       	LD	A,"\\"
0105+  C8ED BE          	CP	(HL)
0106+  C8EE 23          	INC	HL
0107+  C8EF 28 02       	JR	Z,$+4
0108+  C8F1 77          	LD	(HL),A
0109+  C8F2 23          	INC	HL
0110+  C8F3 EB          	EX	DE,HL
0111+  C8F4 21 7E C1    	LD	HL,EditingFile+33
0112+  C8F7 97          	SUB	A
0113+  C8F8 ED A0       	LDI 
0114+  C8FA BE          	CP	(HL)
0115+  C8FB 20 FB       	JR	NZ,$-3
0116+  C8FD 12          	LD	(DE),A
0117+  C8FE DD 21 00 01 	LD	IX,#0100
0118+  C902 21 00 80    	LD	HL,WorkBuffer
0119+  C905 11 D8 00    	LD	DE,#00D8
0120+  C908 01 68 00    	LD	BC,#0068
0121+  C90B 3E 80       	LD	A,#80
0122+  C90D CD 15 86    	CALL	PrnRangPathL
0123+  C910             
0124+  C910 21 7E C1    	LD	HL,EditingFile+33
0125+  C913 3E 01       	LD	A,#01
0126+  C915 0E 11       	LD	C,#11
0127+  C917 D7          	RST	#10
0128+  C918 F5          	PUSH	AF
0129+  C919 DC A8 86    	CALL	C,DOSError
0130+  C91C F1          	POP	AF
0131+  C91D DA A9 C9    	JP	C,NoRead
0132+  C920 32 A5 C1    	LD	(FHandle),A
0133+  C923 DD 21 5D C1 	LD	IX,EditingFile
0134+  C927 DD 6E 1C    	LD	L,(IX+28)
0135+  C92A DD 66 1D    	LD	H,(IX+29)
0136+  C92D 22 A6 C1    	LD	(ReadLen),HL
0137+  C930 3E C0       	LD	A,#C0
0138+  C932 D3 89       	OUT	(YPORT),A
0139+  C934             
0140+  C934 DB A2       	IN	A,(PAGE1)
0141+  C936 F5          	PUSH	AF
0142+  C937 21 00 84    	LD	HL,PagesList
0143+  C93A 7E          	LD	A,(HL)
0144+  C93B 23          ReadLp1	INC	HL
0145+  C93C E5          	PUSH	HL
0146+  C93D D3 A2       	OUT	(PAGE1),A
0147+  C93F 0E 31       	LD	C,#31
0148+  C941 D7          	RST	#10
0149+  C942 21 1B 01    	LD	HL,#011B
0150+  C945 B7          	OR	A
0151+  C946 ED 52       	SBC	HL,DE
0152+  C948 CA A5 C9    	JP	Z,ReadAbort
0153+  C94B 2A A6 C1    	LD	HL,(ReadLen)
0154+  C94E 01 00 40    	LD	BC,#4000
0155+  C951 B7          	OR	A
0156+  C952 ED 42       	SBC	HL,BC
0157+  C954 38 20       	JR	C,ReadEnd
0158+  C956 22 A6 C1    	LD	(ReadLen),HL
0159+  C959 21 00 40    	LD	HL,#4000
0160+  C95C 11 00 40    	LD	DE,#4000
0161+  C95F 3A A5 C1    	LD	A,(FHandle)
0162+  C962 0E 13       	LD	C,#13
0163+  C964 D7          	RST	#10
0164+  C965 DA A5 C9    	JP	C,ReadAbort
0165+  C968 CD 5A CC    	CALL	NextProcess
0166+  C96B E1          	POP	HL
0167+  C96C 7E          	LD	A,(HL)
0168+  C96D FE FF       	CP	#FF
0169+  C96F 20 CA       	JR	NZ,ReadLp1
0170+  C971 F1          	POP	AF
0171+  C972 D3 A2       	OUT	(PAGE1),A
0172+  C974 18 1B       	JR	ReadExit
0173+  C976             ReadEnd
0174+  C976 21 00 40    	LD	HL,#4000
0175+  C979 ED 5B A6 C1 	LD	DE,(ReadLen)
0176+  C97D 7A          	LD	A,D
0177+  C97E B3          	OR	E
0178+  C97F 28 0C       	JR	Z,ReadEn1
0179+  C981 3A A5 C1    	LD	A,(FHandle)
0180+  C984 0E 13       	LD	C,#13
0181+  C986 D7          	RST	#10
0182+  C987 DA A5 C9    	JP	C,ReadAbort
0183+  C98A CD 5A CC    	CALL	NextProcess
0184+  C98D E1          ReadEn1	POP	HL
0185+  C98E F1          	POP	AF
0186+  C98F D3 A2       	OUT	(PAGE1),A
0187+  C991             ReadExit
0188+  C991 3A A5 C1    	LD	A,(FHandle)
0189+  C994 0E 12       	LD	C,#12
0190+  C996 D7          	RST	#10
0191+  C997 B7          	OR	A
0192+  C998             LoadExit
0193+  C998 76          	HALT 
0194+  C999 76          	HALT 
0195+  C99A CD 06 86    	CALL	MakeWindow
0196+  C99D 7F          	DEFB	#7F
0197+  C99E 00          	DEFB	#00
0198+  C99F F5          	PUSH	AF
0199+  C9A0 CD 57 86    	CALL	SetMouse
0200+  C9A3 F1          	POP	AF
0201+  C9A4 C9          	RET 
0202+  C9A5             ReadAbort
0203+  C9A5 E1          	POP	HL
0204+  C9A6 F1          	POP	AF
0205+  C9A7 D3 A2       	OUT	(PAGE1),A
0206+  C9A9 3A A4 C1    NoRead	LD	A,(MemIndef)
0207+  C9AC 0E 3E       	LD	C,#3E
0208+  C9AE D7          	RST	#10
0209+  C9AF 37          	SCF 
0210+  C9B0 18 E6       	JR	LoadExit
0211+  C9B2             ;[]==========================================================[]
0212+  C9B2             NewFile
0213+  C9B2 F5          	PUSH	AF
0214+  C9B3 CD 57 86    	CALL	SetMouse
0215+  C9B6 F1          	POP	AF
0216+  C9B7 FE 03       	CP	#03
0217+  C9B9 28 05       	JR	Z,NewFile1
0218+  C9BB FE 06       	CP	#06
0219+  C9BD C2 F3 CA    	JP	NZ,EError
0220+  C9C0             NewFile1
0221+  C9C0 CD 06 86    	CALL	MakeWindow
0222+  C9C3 01          	DEFB	#01
0223+  C9C4 C0 00 58 00 	DEFW	#00C0,#0058
0224+  C9C8 00 01 3C 00 	DEFW	#0100,#003C
0225+  C9CC 02          	DEFB	#02	;Head place
0226+  C9CD 04 00 02 00 	DEFW	#0004,#0002
0227+  C9D1 F8 00 0A 00 	DEFW	#00F8,#000A
0228+  C9D5 00          	DEFB	#00
0229+  C9D6 01          	DEFB	#01	;Text Line
0230+  C9D7 76 00 03 00 	DEFW	#0076,#0003
0231+  C9DB 0F          	DEFB	#0F
0232+  C9DC 4564697400  	DEFB	"Edit",0
0233+  C9E1 01          	DEFB	#01	;Text Line
0234+  C9E2 54 00 12 00 	DEFW	#0054,#0012
0235+  C9E6 80          	DEFB	#80
0236+  C9E7             	DEFB	"Can't find the file:",0
0236+  C9E7 43616E27742066696E64207468652066696C653A00
0237+  C9FC 04          	DEFB	#04	;UpRectan
0238+  C9FD 30 00 2A 00 	DEFW	#0030,#002A
0239+  CA01 48 00 0E 00 	DEFW	#0048,#000E
0240+  CA05 01          	DEFB	#01	;Text Line
0241+  CA06 40 00 2D 00 	DEFW	#0040,#002D
0242+  CA0A 80          	DEFB	#80
0243+  CA0B             	DEFB	"New file",0
0243+  CA0B 4E65772066696C6500
0244+  CA14 04          	DEFB	#04	;UpRectan
0245+  CA15 88 00 2A 00 	DEFW	#0088,#002A
0246+  CA19 48 00 0E 00 	DEFW	#0048,#000E
0247+  CA1D 01          	DEFB	#01	;Text Line
0248+  CA1E 9A 00 2D 00 	DEFW	#009A,#002D
0249+  CA22 80          	DEFB	#80
0250+  CA23             	DEFB	"Cancel",0
0250+  CA23 43616E63656C00
0251+  CA2A 00          	DEFB	#00
0252+  CA2B E5          	PUSH	HL
0253+  CA2C 11 00 80    	LD	DE,WorkBuffer
0254+  CA2F 97          	SUB	A
0255+  CA30 ED A0       	LDI 
0256+  CA32 BE          	CP	(HL)
0257+  CA33 20 FB       	JR	NZ,$-3
0258+  CA35 12          	LD	(DE),A
0259+  CA36 DD 21 E0 00 	LD	IX,#00E0
0260+  CA3A 21 00 80    	LD	HL,WorkBuffer
0261+  CA3D 11 40 01    	LD	DE,#0140
0262+  CA40 01 76 00    	LD	BC,#0076
0263+  CA43 3E 80       	LD	A,#80
0264+  CA45 CD 1B 86    	CALL	PrnRangPathC
0265+  CA48             NewFLoop
0266+  CA48 DD 21 D9 E6 	LD	IX,NewFileTab
0267+  CA4C CD 4B 86    	CALL	TestCoords
0268+  CA4F 0E 31       	LD	C,#31
0269+  CA51 D7          	RST	#10
0270+  CA52 28 F4       	JR	Z,NewFLoop
0271+  CA54 78          	LD	A,B
0272+  CA55 B7          	OR	A
0273+  CA56 20 F0       	JR	NZ,NewFLoop
0274+  CA58 7B          	LD	A,E
0275+  CA59 FE 1B       	CP	#1B
0276+  CA5B 28 0E       	JR	Z,NewFExitC
0277+  CA5D FE 0D       	CP	#0D
0278+  CA5F 28 0B       	JR	Z,NewFExitO
0279+  CA61 CB AF       	RES	5,A
0280+  CA63 FE 4E       	CP	"N"
0281+  CA65 28 05       	JR	Z,NewFExitO
0282+  CA67 FE 43       	CP	"C"
0283+  CA69 20 DD       	JR	NZ,NewFLoop
0284+  CA6B             NewFExitC
0285+  CA6B 37          	SCF 
0286+  CA6C             NewFExitO
0287+  CA6C CD 06 86    	CALL	MakeWindow
0288+  CA6F 7F          	DEFB	#7F
0289+  CA70 00          	DEFB	#00
0290+  CA71 E1          	POP	HL
0291+  CA72 D8          	RET	C
0292+  CA73 5D          	LD	E,L
0293+  CA74 54          	LD	D,H
0294+  CA75 0E 00       	LD	C,#00
0295+  CA77 3E 21       	LD	A,#21
0296+  CA79 2B          	DEC	HL
0297+  CA7A 0D          	DEC	C
0298+  CA7B 23          	INC	HL
0299+  CA7C 0C          	INC	C
0300+  CA7D BE          	CP	(HL)
0301+  CA7E 38 FB       	JR	C,$-3
0302+  CA80 79          	LD	A,C
0303+  CA81 B7          	OR	A
0304+  CA82 3E 10       	LD	A,#10
0305+  CA84 CA F3 CA    	JP	Z,EError
0306+  CA87 41          	LD	B,C
0307+  CA88 3E 5C       	LD	A,"\\"
0308+  CA8A 2B          	DEC	HL
0309+  CA8B BE          	CP	(HL)
0310+  CA8C 28 05       	JR	Z,ChangeDIR
0311+  CA8E 10 FA       	DJNZ	$-4
0312+  CA90 EB          	EX	DE,HL
0313+  CA91 18 17       	JR	NewFileE
0314+  CA93             ChangeDIR
0315+  CA93 23          	INC	HL
0316+  CA94 E5          	PUSH	HL
0317+  CA95 EB          	EX	DE,HL
0318+  CA96 11 00 80    	LD	DE,WorkBuffer
0319+  CA99 48          	LD	C,B
0320+  CA9A 06 00       	LD	B,#00
0321+  CA9C ED B0       	LDIR 
0322+  CA9E 97          	SUB	A
0323+  CA9F 12          	LD	(DE),A
0324+  CAA0 21 00 80    	LD	HL,WorkBuffer
0325+  CAA3 0E 1D       	LD	C,#1D
0326+  CAA5 D7          	RST	#10
0327+  CAA6 D1          	POP	DE
0328+  CAA7 DA F3 CA    	JP	C,EError
0329+  CAAA             NewFileE
0330+  CAAA 21 7E C1    	LD	HL,EditingFile+33
0331+  CAAD EB          	EX	DE,HL
0332+  CAAE 3E 20       	LD	A,#20
0333+  CAB0 0E 00       	LD	C,#00
0334+  CAB2 BE          NewFE0	CP	(HL)
0335+  CAB3 30 04       	JR	NC,NewFE1
0336+  CAB5 ED A0       	LDI 
0337+  CAB7 18 F9       	JR	NewFE0
0338+  CAB9 97          NewFE1	SUB	A
0339+  CABA 12          	LD	(DE),A
0340+  CABB 79          	LD	A,C
0341+  CABC B7          	OR	A
0342+  CABD 3E 10       	LD	A,#10
0343+  CABF CA F3 CA    	JP	Z,EError
0344+  CAC2 DD 21 5D C1 	LD	IX,EditingFile
0345+  CAC6 97          	SUB	A
0346+  CAC7 DD 77 1C    	LD	(IX+28),A
0347+  CACA DD 77 1D    	LD	(IX+29),A
0348+  CACD DD 77 1E    	LD	(IX+30),A
0349+  CAD0 DD 77 1F    	LD	(IX+31),A
0350+  CAD3 DD 77 20    	LD	(IX+32),A
0351+  CAD6 21 00 00    	LD	HL,#0000
0352+  CAD9 22 A1 C1    	LD	(FileLenght),HL
0353+  CADC 01 3D 03    	LD	BC,#033D
0354+  CADF D7          	RST	#10
0355+  CAE0 F5          	PUSH	AF
0356+  CAE1 DC A8 86    	CALL	C,DOSError	;!!!!!!!!!!!! Нет памяти
0357+  CAE4 F1          	POP	AF
0358+  CAE5 DA 98 C9    	JP	C,LoadExit
0359+  CAE8 32 A4 C1    	LD	(MemIndef),A
0360+  CAEB 21 00 84    	LD	HL,PagesList
0361+  CAEE 0E C5       	LD	C,#C5
0362+  CAF0 CF          	RST	#08
0363+  CAF1 B7          	OR	A
0364+  CAF2 C9          	RET 
0365+  CAF3             
0366+  CAF3 F5          EError	PUSH	AF
0367+  CAF4 CD A8 86    	CALL	DOSError
0368+  CAF7 F1          	POP	AF
0369+  CAF8 37          	SCF 
0370+  CAF9 C9          	RET 
0371+  CAFA             ;[]==========================================================[]
0372+  CAFA             SaveFile
0373+  CAFA CD 0D D0    	CALL	PutString
0374+  CAFD CD 54 86    	CALL	SetClock
0375+  CB00 DD 21 80 CC 	LD	IX,ProcessEdit
0376+  CB04 2A A1 C1    	LD	HL,(FileLenght)
0377+  CB07 7C          	LD	A,H
0378+  CB08 E6 C0       	AND	#C0
0379+  CB0A 07          	RLCA 
0380+  CB0B 07          	RLCA 
0381+  CB0C 47          	LD	B,A
0382+  CB0D 7C          	LD	A,H
0383+  CB0E E6 3F       	AND	#3F
0384+  CB10 B5          	OR	L
0385+  CB11 28 01       	JR	Z,$+3
0386+  CB13 04          	INC	B
0387+  CB14 DD 70 0A    	LD	(IX+ProcMAXl1),B
0388+  CB17 97          	SUB	A
0389+  CB18 DD 77 0B    	LD	(IX+ProcMAXh1),A
0390+  CB1B DD 77 0C    	LD	(IX+ProcMAXl2),A
0391+  CB1E DD 77 0D    	LD	(IX+ProcMAXh2),A
0392+  CB21 CD 33 86    	CALL	InitProcess
0393+  CB24 CD 06 86    	CALL	MakeWindow
0394+  CB27 01          	DEFB	#01
0395+  CB28 A0 00 58 00 	DEFW	#00A0,#0058
0396+  CB2C 40 01 30 00 	DEFW	#0140,#0030
0397+  CB30 02          	DEFB	#02	;Head place
0398+  CB31 04 00 02 00 	DEFW	#0004,#0002
0399+  CB35 38 01 0A 00 	DEFW	#0138,#000A
0400+  CB39 00          	DEFB	#00
0401+  CB3A 01          	DEFB	#01	;Text Line
0402+  CB3B 70 00 03 00 	DEFW	#0070,#0003
0403+  CB3F 0F          	DEFB	#0F
0404+  CB40             	DEFB	"FN File Editor v1.00",0
0404+  CB40 464E2046696C6520456469746F722076312E303000
0405+  CB55 01          	DEFB	#01	;Text Line
0406+  CB56 08 00 10 00 	DEFW	#0008,#0010
0407+  CB5A 80          	DEFB	#80
0408+  CB5B             	DEFB	"Saving:",0
0408+  CB5B 536176696E673A00
0409+  CB63 03          	DEFB	#03	;Углубление
0410+  CB64 10 00 1C 00 	DEFW	#0010,#001C
0411+  CB68 20 01 0C 00 	DEFW	#0120,#000C
0412+  CB6C 02          	DEFB	#02	;Head place
0413+  CB6D 12 00 1D 00 	DEFW	#0012,#001D
0414+  CB71 1C 01 0A 00 	DEFW	#011C,#000A
0415+  CB75 0F          	DEFB	#0F
0416+  CB76 00          	DEFB	#00
0417+  CB77 0E 02       	LD	C,#02
0418+  CB79 FD E5       	PUSH	IY
0419+  CB7B D7          	RST	#10
0420+  CB7C FD E1       	POP	IY
0421+  CB7E 21 00 80    	LD	HL,WorkBuffer
0422+  CB81 C6 41       	ADD	A,"A"
0423+  CB83 77          	LD	(HL),A
0424+  CB84 23          	INC	HL
0425+  CB85 36 3A       	LD	(HL),":"
0426+  CB87 23          	INC	HL
0427+  CB88 0E 1E       	LD	C,#1E
0428+  CB8A FD E5       	PUSH	IY
0429+  CB8C E5          	PUSH	HL
0430+  CB8D D7          	RST	#10
0431+  CB8E E1          	POP	HL
0432+  CB8F FD E1       	POP	IY
0433+  CB91 97          	SUB	A
0434+  CB92 23          	INC	HL
0435+  CB93 BE          	CP	(HL)
0436+  CB94 20 FC       	JR	NZ,$-2
0437+  CB96 2B          	DEC	HL
0438+  CB97 3E 5C       	LD	A,"\\"
0439+  CB99 BE          	CP	(HL)
0440+  CB9A 23          	INC	HL
0441+  CB9B 28 02       	JR	Z,$+4
0442+  CB9D 77          	LD	(HL),A
0443+  CB9E 23          	INC	HL
0444+  CB9F EB          	EX	DE,HL
0445+  CBA0 21 7E C1    	LD	HL,EditingFile+33
0446+  CBA3 97          	SUB	A
0447+  CBA4 ED A0       	LDI 
0448+  CBA6 BE          	CP	(HL)
0449+  CBA7 20 FB       	JR	NZ,$-3
0450+  CBA9 12          	LD	(DE),A
0451+  CBAA DD 21 00 01 	LD	IX,#0100
0452+  CBAE 21 00 80    	LD	HL,WorkBuffer
0453+  CBB1 11 D0 00    	LD	DE,#00D0
0454+  CBB4 01 68 00    	LD	BC,#0068
0455+  CBB7 3E 80       	LD	A,#80
0456+  CBB9 CD 15 86    	CALL	PrnRangPathL
0457+  CBBC             
0458+  CBBC 21 7E C1    	LD	HL,EditingFile+33
0459+  CBBF 3A 7D C1    	LD	A,(EditingFile+32)
0460+  CBC2 0E 0A       	LD	C,#0A
0461+  CBC4 FD E5       	PUSH	IY
0462+  CBC6 D7          	RST	#10
0463+  CBC7 FD E1       	POP	IY
0464+  CBC9 F5          	PUSH	AF
0465+  CBCA DC A8 86    	CALL	C,DOSError
0466+  CBCD F1          	POP	AF
0467+  CBCE DA 49 CC    	JP	C,SaveExit1
0468+  CBD1 32 A5 C1    	LD	(FHandle),A
0469+  CBD4             
0470+  CBD4 2A A1 C1    	LD	HL,(FileLenght)
0471+  CBD7 22 A6 C1    	LD	(SaveLen),HL
0472+  CBDA 3E C0       	LD	A,#C0
0473+  CBDC D3 89       	OUT	(YPORT),A
0474+  CBDE             
0475+  CBDE DB A2       	IN	A,(PAGE1)
0476+  CBE0 F5          	PUSH	AF
0477+  CBE1 21 00 84    	LD	HL,PagesList
0478+  CBE4 7E          	LD	A,(HL)
0479+  CBE5 23          SaveLp1	INC	HL
0480+  CBE6 E5          	PUSH	HL
0481+  CBE7 D3 A2       	OUT	(PAGE1),A
0482+  CBE9 2A A6 C1    	LD	HL,(SaveLen)
0483+  CBEC 01 00 40    	LD	BC,#4000
0484+  CBEF B7          	OR	A
0485+  CBF0 ED 42       	SBC	HL,BC
0486+  CBF2 38 25       	JR	C,SaveEnd
0487+  CBF4 22 A6 C1    	LD	(SaveLen),HL
0488+  CBF7 21 00 40    	LD	HL,#4000
0489+  CBFA 11 00 40    	LD	DE,#4000
0490+  CBFD 3A A5 C1    	LD	A,(FHandle)
0491+  CC00 0E 14       	LD	C,#14
0492+  CC02 FD E5       	PUSH	IY
0493+  CC04 D7          	RST	#10
0494+  CC05 FD E1       	POP	IY
0495+  CC07 DA 54 CC    	JP	C,SaveAbort
0496+  CC0A CD 5A CC    	CALL	NextProcess
0497+  CC0D E1          	POP	HL
0498+  CC0E 7E          	LD	A,(HL)
0499+  CC0F FE FF       	CP	#FF
0500+  CC11 20 D2       	JR	NZ,SaveLp1
0501+  CC13 F1          	POP	AF
0502+  CC14 D3 A2       	OUT	(PAGE1),A
0503+  CC16 C3 38 CC    	JP	SaveExit
0504+  CC19             SaveEnd
0505+  CC19 21 00 40    	LD	HL,#4000
0506+  CC1C ED 5B A6 C1 	LD	DE,(SaveLen)
0507+  CC20 7A          	LD	A,D
0508+  CC21 B3          	OR	E
0509+  CC22 28 10       	JR	Z,SaveEn1
0510+  CC24 3A A5 C1    	LD	A,(FHandle)
0511+  CC27 0E 14       	LD	C,#14
0512+  CC29 FD E5       	PUSH	IY
0513+  CC2B D7          	RST	#10
0514+  CC2C FD E1       	POP	IY
0515+  CC2E DA 54 CC    	JP	C,SaveAbort
0516+  CC31 CD 5A CC    	CALL	NextProcess
0517+  CC34 E1          SaveEn1	POP	HL
0518+  CC35 F1          	POP	AF
0519+  CC36 D3 A2       	OUT	(PAGE1),A
0520+  CC38             SaveExit
0521+  CC38 97          	SUB	A
0522+  CC39 FD 77 07    	LD	(IY+ReadyFile),A
0523+  CC3C CD 16 C6    	CALL	PrnEDITinfo
0524+  CC3F             
0525+  CC3F 3A A5 C1    	LD	A,(FHandle)
0526+  CC42 0E 12       	LD	C,#12
0527+  CC44 FD E5       	PUSH	IY
0528+  CC46 D7          	RST	#10
0529+  CC47 FD E1       	POP	IY
0530+  CC49             SaveExit1
0531+  CC49 76          	HALT 
0532+  CC4A 76          	HALT 
0533+  CC4B CD 06 86    	CALL	MakeWindow
0534+  CC4E 7F          	DEFB	#7F
0535+  CC4F 00          	DEFB	#00
0536+  CC50 CD 57 86    	CALL	SetMouse
0537+  CC53 C9          	RET 
0538+  CC54             SaveAbort
0539+  CC54 E1          	POP	HL
0540+  CC55 F1          	POP	AF
0541+  CC56 D3 A2       	OUT	(PAGE1),A
0542+  CC58 18 EF       	JR	SaveExit1
0543+  CC5A             ;[]----------------------------------------------------------[]
0544+  CC5A             NextProcess
0545+  CC5A DD 21 80 CC 	LD	IX,ProcessEdit
0546+  CC5E DD 6E 0E    	LD	L,(IX+ProcCURl1)
0547+  CC61 DD 66 0F    	LD	H,(IX+ProcCURh1)
0548+  CC64 23          	INC	HL
0549+  CC65 DD 75 0E    	LD	(IX+ProcCURl1),L
0550+  CC68 DD 74 0F    	LD	(IX+ProcCURh1),H
0551+  CC6B 7C          	LD	A,H
0552+  CC6C B5          	OR	L
0553+  CC6D 20 0D       	JR	NZ,NextPr1
0554+  CC6F DD 6E 10    	LD	L,(IX+ProcCURl2)
0555+  CC72 DD 66 11    	LD	H,(IX+ProcCURh2)
0556+  CC75 23          	INC	HL
0557+  CC76 DD 75 10    	LD	(IX+ProcCURl2),L
0558+  CC79 DD 74 11    	LD	(IX+ProcCURh2),H
0559+  CC7C CD 36 86    NextPr1	CALL	PrnProcess
0560+  CC7F C9          	RET 
0561+  CC80             ProcessEdit
0562+  CC80 B2 00       	DEFW	#00B2
0563+  CC82 75 00       	DEFW	#0075
0564+  CC84 1C 01       	DEFW	#011C
0565+  CC86 00 00       	DEFW	#0000
0566+  CC88 00 00       	DEFW	#0000
0567+  CC8A 00 00       	DEFW	#0000
0568+  CC8C 00 00       	DEFW	#0000
0569+  CC8E 00 00       	DEFW	#0000
0570+  CC90 00 00       	DEFW	#0000
0571+  CC92 4F          	DEFB	#4F
0572+  CC93             CorrBigChar
0573+  CC93 FE 41       	CP	#41
0574+  CC95 D8          	RET	C
0575+  CC96 FE 5B       	CP	#5B
0576+  CC98 30 03       	JR	NC,CorrCh1
0577+  CC9A CB EF       	SET	5,A
0578+  CC9C C9          	RET 
0579+  CC9D FE 80       CorrCh1	CP	#80
0580+  CC9F D8          	RET	C
0581+  CCA0 FE A0       	CP	#A0
0582+  CCA2 D0          	RET	NC
0583+  CCA3 CB EF       	SET	5,A
0584+  CCA5 FE 90       	CP	#90
0585+  CCA7 D8          	RET	C
0586+  CCA8 CB F7       	SET	6,A
0587+  CCAA CB A7       	RES	4,A
0588+  CCAC C9          	RET 
0589+  CCAD             
0590+  CCAD             
0591+  CCAD             
0940   CCAD             	INCLUDE	"FETEXT.z80";,#0D
0001+  CCAD             
0002+  CCAD             ;[]==========================================================[]
0003+  CCAD             PrnASCIIpage
0004+  CCAD 21 5F D1    	LD	HL,PrnASCIIinfo
0005+  CCB0 E5          	PUSH	HL
0006+  CCB1 2A 9D C1    	LD	HL,(PageShift)
0007+  CCB4 22 9F C1    	LD	(TempShift),HL
0008+  CCB7 06 1C       	LD	B,#1C
0009+  CCB9             PrnASCIIlp
0010+  CCB9 C5          	PUSH	BC
0011+  CCBA CD 41 CD    	CALL	PrnASCIIline   ;Выводим	строку в буф и на экран
0012+  CCBD C1          	POP	BC
0013+  CCBE 38 19       	JR	C,FillASCII    ;CY-Закончились байты для печати
0014+  CCC0 78          	LD	A,B
0015+  CCC1 C6 08       	ADD	A,#08
0016+  CCC3 47          	LD	B,A
0017+  CCC4 FE E4       	CP	#E4
0018+  CCC6 20 F1       	JR	NZ,PrnASCIIlp
0019+  CCC8 97          	SUB	A
0020+  CCC9 32 A3 C1    	LD	(EmptyLines),A
0021+  CCCC FD 5E 00    	LD	E,(IY+CursorX)
0022+  CCCF FD 56 03    	LD	D,(IY+CursorY)
0023+  CCD2 CD 34 C6    	CALL	SetCursor
0024+  CCD5 CD 9D CF    	CALL	GetString
0025+  CCD8 C9          	RET 
0026+  CCD9             ;Процедура отчистки нижней области экрана
0027+  CCD9             FillASCII
0028+  CCD9 3E E4       	LD	A,#E4
0029+  CCDB 90          	SUB	B
0030+  CCDC 32 F0 CC    	LD	(FLenASC),A
0031+  CCDF 28 13       	JR	Z,FASCIIe	;Z-нет отчистки
0032+  CCE1 78          	LD	A,B
0033+  CCE2 32 EC CC    	LD	(FPosASC),A
0034+  CCE5 CD 06 86    	CALL	MakeWindow
0035+  CCE8 80          	DEFB	#80
0036+  CCE9 02          	DEFB	#02	;Head Place
0037+  CCEA 00 00       	DEFW	#0000
0038+  CCEC 00 00       FPosASC	DEFW	#0000
0039+  CCEE 70 02       	DEFW	#0270
0040+  CCF0 00 00       FLenASC	DEFW	#0000
0041+  CCF2 09          	DEFB	PanelCol
0042+  CCF3 00          	DEFB	#00
0043+  CCF4 3A F0 CC    FASCIIe	LD	A,(FLenASC)
0044+  CCF7 CB 3F       	SRL	A
0045+  CCF9 CB 3F       	SRL	A
0046+  CCFB CB 3F       	SRL	A
0047+  CCFD 32 A3 C1    	LD	(EmptyLines),A
0048+  CD00 FD 5E 00    	LD	E,(IY+CursorX)
0049+  CD03 FD 56 03    	LD	D,(IY+CursorY)
0050+  CD06 CD 34 C6    	CALL	SetCursor
0051+  CD09 CD 9D CF    	CALL	GetString
0052+  CD0C C9          	RET 
0053+  CD0D             ;[]----------------------------------------------------------[]
0054+  CD0D             RefrASCIIpage
0055+  CD0D 21 5F D1    	LD	HL,PrnASCIIinfo
0056+  CD10 E5          	PUSH	HL
0057+  CD11 CD 87 C6    	CALL	ResCursor
0058+  CD14 2A 9D C1    	LD	HL,(PageShift)
0059+  CD17 22 9F C1    	LD	(TempShift),HL
0060+  CD1A 06 1C       	LD	B,#1C
0061+  CD1C FD 4E 03    	LD	C,(IY+CursorY)
0062+  CD1F             RefrASCIIlp
0063+  CD1F C5          	PUSH	BC
0064+  CD20 79          	LD	A,C
0065+  CD21 B7          	OR	A
0066+  CD22 20 0E       	JR	NZ,RfASCII
0067+  CD24 CD 3B CE    	CALL	PrnASCIIstring
0068+  CD27 2A 9F C1    	LD	HL,(TempShift)
0069+  CD2A CD 18 CF    	CALL	SearchDown
0070+  CD2D 22 9F C1    	LD	(TempShift),HL
0071+  CD30 18 03       	JR	$+5
0072+  CD32 CD 41 CD    RfASCII	CALL	PrnASCIIline   ;Выводим	строку в буф и на экран
0073+  CD35 C1          	POP	BC
0074+  CD36 D8          	RET	C	       ;CY-Закончились байты для печати
0075+  CD37 0D          	DEC	C
0076+  CD38 78          	LD	A,B
0077+  CD39 C6 08       	ADD	A,#08
0078+  CD3B 47          	LD	B,A
0079+  CD3C FE E4       	CP	#E4
0080+  CD3E 20 DF       	JR	NZ,RefrASCIIlp
0081+  CD40 C9          	RET 
0082+  CD41             ;[]----------------------------------------------------------[]
0083+  CD41             ;Процедура печати тек.строки в буфер и на экран
0084+  CD41             PrnASCIIline
0085+  CD41 DD 60       	LD	HX,B
0086+  CD43 0E F0       	LD	C,#F0
0087+  CD45 2A A1 C1    	LD	HL,(FileLenght)
0088+  CD48 ED 5B 9F C1 	LD	DE,(TempShift)
0089+  CD4C B7          	OR	A
0090+  CD4D ED 52       	SBC	HL,DE
0091+  CD4F D8          	RET	C
0092+  CD50 06 F0       	LD	B,#F0
0093+  CD52 7C          	LD	A,H
0094+  CD53 B7          	OR	A
0095+  CD54 20 04       	JR	NZ,PutASCIIln
0096+  CD56 B5          	OR	L
0097+  CD57 37          	SCF 
0098+  CD58 C8          	RET	Z
0099+  CD59 45          	LD	B,L
0100+  CD5A             PutASCIIln
0101+  CD5A 21 00 83    	LD	HL,TempBuffer
0102+  CD5D DB A2       	IN	A,(PAGE1)
0103+  CD5F F5          	PUSH	AF
0104+  CD60 ED 5B 9F C1 	LD	DE,(TempShift)
0105+  CD64 7A          	LD	A,D		;Выделяем номер	страницы
0106+  CD65 E6 C0       	AND	#C0
0107+  CD67 07          	RLCA 
0108+  CD68 07          	RLCA 
0109+  CD69 D9          	EXX 
0110+  CD6A 5F          	LD	E,A		;DE - Адрес страницы в списке
0111+  CD6B 16 84       	LD	D,high PagesList
0112+  CD6D 1A          	LD	A,(DE)		;Тек.страница
0113+  CD6E D3 A2       	OUT	(PAGE1),A
0114+  CD70 D9          	EXX 
0115+  CD71 CB BA       	RES	7,D		;Вкл.с #4000
0116+  CD73 CB F2       	SET	6,D
0117+  CD75             PutASCIIlnLp
0118+  CD75 CB 7A       	BIT	7,D
0119+  CD77 28 0A       	JR	Z,PutLnA1
0120+  CD79 CB BA       	RES	7,D
0121+  CD7B CB F2       	SET	6,D
0122+  CD7D D9          	EXX 
0123+  CD7E 1C          	INC	E		;DE - Адрес страницы в списке
0124+  CD7F 1A          	LD	A,(DE)		;Тек.страница
0125+  CD80 D3 A2       	OUT	(PAGE1),A
0126+  CD82 D9          	EXX 
0127+  CD83 1A          PutLnA1	LD	A,(DE)
0128+  CD84 13          	INC	DE
0129+  CD85 FE 0D       	CP	#0D
0130+  CD87 20 16       	JR	NZ,PutLineA1
0131+  CD89 CB 7A       	BIT	7,D
0132+  CD8B 28 0A       	JR	Z,PutLnA2
0133+  CD8D CB BA       	RES	7,D
0134+  CD8F CB F2       	SET	6,D
0135+  CD91 D9          	EXX 
0136+  CD92 1C          	INC	E		;DE - Адрес страницы в списке
0137+  CD93 1A          	LD	A,(DE)		;Тек.страница
0138+  CD94 D3 A2       	OUT	(PAGE1),A
0139+  CD96 D9          	EXX 
0140+  CD97 1A          PutLnA2	LD	A,(DE)
0141+  CD98 FE 0A       	CP	#0A
0142+  CD9A 20 64       	JR	NZ,PutLnExitA
0143+  CD9C 13          	INC	DE
0144+  CD9D 18 61       	JR	PutLnExitA
0145+  CD9F             PutLineA1
0146+  CD9F FE 0A       	CP	#0A
0147+  CDA1 28 5D       	JR	Z,PutLnExitA
0148+  CDA3 FE 09       	CP	#09
0149+  CDA5 20 29       	JR	NZ,PutLineA2
0150+  CDA7 36 20       PutTabA	LD	(HL),#20
0151+  CDA9 2C          	INC	L
0152+  CDAA 7D          	LD	A,L
0153+  CDAB B9          	CP	C
0154+  CDAC 28 1E       	JR	Z,PutLnEA1
0155+  CDAE E6 07       	AND	#07
0156+  CDB0 20 F5       	JR	NZ,PutTabA
0157+  CDB2 18 22       	JR	PutLineA3-2
0158+  CDB4             PutLnEA0
0159+  CDB4 CB 7A       	BIT	7,D
0160+  CDB6 28 0A       	JR	Z,PutLEA1
0161+  CDB8 CB BA       	RES	7,D
0162+  CDBA CB F2       	SET	6,D
0163+  CDBC D9          	EXX 
0164+  CDBD 1C          	INC	E		;DE - Адрес страницы в списке
0165+  CDBE 1A          	LD	A,(DE)		;Тек.страница
0166+  CDBF D3 A2       	OUT	(PAGE1),A
0167+  CDC1 D9          	EXX 
0168+  CDC2 1A          PutLEA1	LD	A,(DE)
0169+  CDC3 FE 0D       	CP	#0D
0170+  CDC5 28 11       	JR	Z,PutLineA3
0171+  CDC7 13          	INC	DE
0172+  CDC8 FE 0A       	CP	#0A
0173+  CDCA 28 34       	JR	Z,PutLnExitA
0174+  CDCC             PutLnEA1
0175+  CDCC 10 E6       	DJNZ	PutLnEA0
0176+  CDCE 18 08       	JR	PutLineA3
0177+  CDD0             PutLineA2
0178+  CDD0 77          	LD	(HL),A
0179+  CDD1 2C          	INC	L
0180+  CDD2 7D          	LD	A,L
0181+  CDD3 B9          	CP	C
0182+  CDD4 28 02       	JR	Z,PutLineA3
0183+  CDD6 10 9D       	DJNZ	PutASCIIlnLp
0184+  CDD8             PutLineA3
0185+  CDD8 CB 7A       	BIT	7,D
0186+  CDDA 28 0A       	JR	Z,PutLnA3
0187+  CDDC CB BA       	RES	7,D
0188+  CDDE CB F2       	SET	6,D
0189+  CDE0 D9          	EXX 
0190+  CDE1 1C          	INC	E		;DE - Адрес страницы в списке
0191+  CDE2 1A          	LD	A,(DE)		;Тек.страница
0192+  CDE3 D3 A2       	OUT	(PAGE1),A
0193+  CDE5 D9          	EXX 
0194+  CDE6 1A          PutLnA3	LD	A,(DE)
0195+  CDE7 FE 0D       	CP	#0D
0196+  CDE9 20 15       	JR	NZ,PutLnExitA
0197+  CDEB 13          	INC	DE
0198+  CDEC CB 7A       	BIT	7,D
0199+  CDEE 28 0A       	JR	Z,PutLnA4
0200+  CDF0 CB BA       	RES	7,D
0201+  CDF2 CB F2       	SET	6,D
0202+  CDF4 D9          	EXX 
0203+  CDF5 1C          	INC	E		;DE - Адрес страницы в списке
0204+  CDF6 1A          	LD	A,(DE)		;Тек.страница
0205+  CDF7 D3 A2       	OUT	(PAGE1),A
0206+  CDF9 D9          	EXX 
0207+  CDFA 1A          PutLnA4	LD	A,(DE)
0208+  CDFB FE 0A       	CP	#0A
0209+  CDFD 20 01       	JR	NZ,PutLnExitA
0210+  CDFF 13          	INC	DE
0211+  CE00             PutLnExitA
0212+  CE00 CB B2       	RES	6,D
0213+  CE02 D9          	EXX 
0214+  CE03 7B          	LD	A,E
0215+  CE04 D9          	EXX 
0216+  CE05 CB 7A       	BIT	7,D
0217+  CE07 CB BA       	RES	7,D
0218+  CE09 28 01       	JR	Z,$+3
0219+  CE0B 3C          	INC	A
0220+  CE0C 0F          	RRCA 
0221+  CE0D 0F          	RRCA 
0222+  CE0E B2          	OR	D
0223+  CE0F 57          	LD	D,A
0224+  CE10 ED 53 9F C1 	LD	(TempShift),DE
0225+  CE14 F1          	POP	AF
0226+  CE15 D3 A2       	OUT	(PAGE1),A
0227+  CE17             
0228+  CE17 FD 7E 02    	LD	A,(IY+CursAddX)
0229+  CE1A C6 4E       	ADD	A,#4E
0230+  CE1C 95          	SUB	L
0231+  CE1D 28 09       	JR	Z,PutLnExA
0232+  CE1F 38 07       	JR	C,PutLnExA
0233+  CE21 47          	LD	B,A
0234+  CE22 3E 20       	LD	A,#20
0235+  CE24 77          	LD	(HL),A
0236+  CE25 2C          	INC	L
0237+  CE26 10 FC       	DJNZ	$-2
0238+  CE28             PutLnExA
0239+  CE28 FD 6E 02    	LD	L,(IY+CursAddX)
0240+  CE2B 26 83       	LD	H,high TempBuffer
0241+  CE2D 11 00 00    	LD	DE,#0000
0242+  CE30 06 4E       	LD	B,#4E
0243+  CE32 DD 4C       	LD	C,HX
0244+  CE34 3E 9A       	LD	A,PanelCol*#10+FileCol
0245+  CE36 CD 12 86    	CALL	PrnTxtLnNormC
0246+  CE39 B7          	OR	A
0247+  CE3A C9          	RET 
0248+  CE3B             ;[]==========================================================[]
0249+  CE3B             PrnASCIIstring
0250+  CE3B 21 00 83    	LD	HL,TempBuffer
0251+  CE3E 11 00 82    	LD	DE,LineBuffer
0252+  CE41 FD 7E 04    	LD	A,(IY+LenString)
0253+  CE44 B7          	OR	A
0254+  CE45 28 1A       	JR	Z,PrASCIIexit
0255+  CE47 47          	LD	B,A
0256+  CE48 0E F0       	LD	C,#F0
0257+  CE4A             PrASCIIstr1
0258+  CE4A 1A          	LD	A,(DE)
0259+  CE4B 1C          	INC	E
0260+  CE4C FE 09       	CP	#09
0261+  CE4E 20 0D       	JR	NZ,PrASCIIstr2
0262+  CE50 36 20       PutTabS	LD	(HL),#20
0263+  CE52 2C          	INC	L
0264+  CE53 7D          	LD	A,L
0265+  CE54 B9          	CP	C
0266+  CE55 28 0A       	JR	Z,PrASCIIexit
0267+  CE57 E6 07       	AND	#07
0268+  CE59 20 F5       	JR	NZ,PutTabS
0269+  CE5B 18 02       	JR	PrASCIIstr3
0270+  CE5D             PrASCIIstr2
0271+  CE5D 77          	LD	(HL),A
0272+  CE5E 2C          	INC	L
0273+  CE5F             PrASCIIstr3
0274+  CE5F 10 E9       	DJNZ	PrASCIIstr1
0275+  CE61             PrASCIIexit
0276+  CE61 FD 7E 02    	LD	A,(IY+CursAddX)
0277+  CE64 C6 4E       	ADD	A,#4E
0278+  CE66 95          	SUB	L
0279+  CE67 28 09       	JR	Z,PrASCIIex1
0280+  CE69 38 07       	JR	C,PrASCIIex1
0281+  CE6B 47          	LD	B,A
0282+  CE6C 3E 20       	LD	A,#20
0283+  CE6E 77          	LD	(HL),A
0284+  CE6F 2C          	INC	L
0285+  CE70 10 FC       	DJNZ	$-2
0286+  CE72             PrASCIIex1
0287+  CE72 CD 87 C6    	CALL	ResCursor
0288+  CE75 FD 6E 02    	LD	L,(IY+CursAddX)
0289+  CE78 26 83       	LD	H,high TempBuffer
0290+  CE7A 11 00 00    	LD	DE,#0000
0291+  CE7D 06 4E       	LD	B,#4E
0292+  CE7F FD 7E 03    	LD	A,(IY+CursorY)
0293+  CE82 87          	ADD	A,A
0294+  CE83 87          	ADD	A,A
0295+  CE84 87          	ADD	A,A
0296+  CE85 C6 1C       	ADD	A,#1C
0297+  CE87 4F          	LD	C,A
0298+  CE88 3E 9A       	LD	A,PanelCol*#10+FileCol
0299+  CE8A CD 12 86    	CALL	PrnTxtLnNormC
0300+  CE8D FD 5E 00    	LD	E,(IY+CursorX)
0301+  CE90 FD 56 03    	LD	D,(IY+CursorY)
0302+  CE93 CD 34 C6    	CALL	SetCursor
0303+  CE96 C9          	RET 
0304+  CE97             ;[]==========================================================[]
0305+  CE97             SearchUp
0306+  CE97 06 F0       	LD	B,#F0
0307+  CE99 7C          	LD	A,H
0308+  CE9A B7          	OR	A
0309+  CE9B 20 04       	JR	NZ,SearchUpBeg
0310+  CE9D B5          	OR	L
0311+  CE9E 37          	SCF 
0312+  CE9F C8          	RET	Z
0313+  CEA0 45          	LD	B,L
0314+  CEA1             SearchUpBeg
0315+  CEA1 E5          	PUSH	HL
0316+  CEA2 DB A2       	IN	A,(PAGE1)
0317+  CEA4 F5          	PUSH	AF
0318+  CEA5 7C          	LD	A,H		;Выделяем номер	страницы
0319+  CEA6 E6 C0       	AND	#C0
0320+  CEA8 07          	RLCA 
0321+  CEA9 07          	RLCA 
0322+  CEAA 5F          	LD	E,A
0323+  CEAB 16 84       	LD	D,high PagesList
0324+  CEAD 1A          	LD	A,(DE)		;Тек.страница
0325+  CEAE D3 A2       	OUT	(PAGE1),A
0326+  CEB0 CB BC       	RES	7,H
0327+  CEB2 CB F4       	SET	6,H
0328+  CEB4 0E 00       	LD	C,#00
0329+  CEB6 DD 69       	LD	LX,C
0330+  CEB8             
0331+  CEB8 0C          	INC	C
0332+  CEB9 05          	DEC	B
0333+  CEBA 2B          	DEC	HL
0334+  CEBB CB 74       	BIT	6,H
0335+  CEBD 20 06       	JR	NZ,SrchUp0
0336+  CEBF 1D          	DEC	E
0337+  CEC0 1A          	LD	A,(DE)
0338+  CEC1 D3 A2       	OUT	(PAGE1),A
0339+  CEC3 CB F4       	SET	6,H
0340+  CEC5 7E          SrchUp0	LD	A,(HL)
0341+  CEC6 FE 0A       	CP	#0A
0342+  CEC8 20 12       	JR	NZ,SrchUp1+1
0343+  CECA 78          	LD	A,B
0344+  CECB B7          	OR	A
0345+  CECC 28 40       	JR	Z,SrchUpEx
0346+  CECE 0C          	INC	C
0347+  CECF 05          	DEC	B
0348+  CED0 2B          	DEC	HL
0349+  CED1 CB 74       	BIT	6,H
0350+  CED3 20 06       	JR	NZ,SrchUp1
0351+  CED5 1D          	DEC	E
0352+  CED6 1A          	LD	A,(DE)
0353+  CED7 D3 A2       	OUT	(PAGE1),A
0354+  CED9 CB F4       	SET	6,H
0355+  CEDB 7E          SrchUp1	LD	A,(HL)
0356+  CEDC FE 0D       	CP	#0D
0357+  CEDE 28 11       	JR	Z,SearchUpLp
0358+  CEE0 0D          	DEC	C
0359+  CEE1 04          	INC	B
0360+  CEE2 23          	INC	HL
0361+  CEE3 CB 7C       	BIT	7,H
0362+  CEE5 28 0E       	JR	Z,SearchUpLp1
0363+  CEE7 1C          	INC	E
0364+  CEE8 1A          	LD	A,(DE)
0365+  CEE9 D3 A2       	OUT	(PAGE1),A
0366+  CEEB CB BC       	RES	7,H
0367+  CEED CB F4       	SET	6,H
0368+  CEEF 18 04       	JR	SearchUpLp1
0369+  CEF1             SearchUpLp
0370+  CEF1 78          	LD	A,B
0371+  CEF2 B7          	OR	A
0372+  CEF3 28 19       	JR	Z,SrchUpEx
0373+  CEF5             SearchUpLp1
0374+  CEF5 2B          	DEC	HL
0375+  CEF6 CB 74       	BIT	6,H
0376+  CEF8 20 06       	JR	NZ,SrchUp2
0377+  CEFA 1D          	DEC	E
0378+  CEFB 1A          	LD	A,(DE)
0379+  CEFC D3 A2       	OUT	(PAGE1),A
0380+  CEFE CB F4       	SET	6,H
0381+  CF00 7E          SrchUp2	LD	A,(HL)
0382+  CF01 FE 0A       	CP	#0A
0383+  CF03 28 09       	JR	Z,SrchUpEx
0384+  CF05 FE 0D       	CP	#0D
0385+  CF07 28 05       	JR	Z,SrchUpEx
0386+  CF09 DD 2C       	INC	LX
0387+  CF0B 0C          	INC	C
0388+  CF0C 10 E7       	DJNZ	SearchUpLp1
0389+  CF0E             SrchUpEx
0390+  CF0E F1          	POP	AF
0391+  CF0F D3 A2       	OUT	(PAGE1),A
0392+  CF11 E1          	POP	HL
0393+  CF12 06 00       	LD	B,#00
0394+  CF14 B7          	OR	A
0395+  CF15 ED 42       	SBC	HL,BC
0396+  CF17 C9          	RET 
0397+  CF18             ;[]----------------------------------------------------------[]
0398+  CF18             SearchDown
0399+  CF18 06 F0       	LD	B,#F0
0400+  CF1A EB          	EX	DE,HL
0401+  CF1B 2A A1 C1    	LD	HL,(FileLenght)
0402+  CF1E B7          	OR	A
0403+  CF1F ED 52       	SBC	HL,DE
0404+  CF21 EB          	EX	DE,HL
0405+  CF22 D8          	RET	C
0406+  CF23 7A          	LD	A,D
0407+  CF24 B7          	OR	A
0408+  CF25 20 04       	JR	NZ,SearchDnBeg
0409+  CF27 B3          	OR	E
0410+  CF28 37          	SCF 
0411+  CF29 C8          	RET	Z
0412+  CF2A 43          	LD	B,E
0413+  CF2B             SearchDnBeg
0414+  CF2B E5          	PUSH	HL
0415+  CF2C DB A2       	IN	A,(PAGE1)
0416+  CF2E F5          	PUSH	AF
0417+  CF2F 7C          	LD	A,H		;Выделяем номер	страницы
0418+  CF30 E6 C0       	AND	#C0
0419+  CF32 07          	RLCA 
0420+  CF33 07          	RLCA 
0421+  CF34 5F          	LD	E,A
0422+  CF35 16 84       	LD	D,high PagesList
0423+  CF37 1A          	LD	A,(DE)		;Тек.страница
0424+  CF38 D3 A2       	OUT	(PAGE1),A
0425+  CF3A CB BC       	RES	7,H
0426+  CF3C CB F4       	SET	6,H
0427+  CF3E 0E 00       	LD	C,#00
0428+  CF40 2B          	DEC	HL
0429+  CF41             SearchDnLp
0430+  CF41 0C          	INC	C
0431+  CF42 23          	INC	HL
0432+  CF43 CB 7C       	BIT	7,H
0433+  CF45 28 08       	JR	Z,SrchDn0
0434+  CF47 1C          	INC	E
0435+  CF48 1A          	LD	A,(DE)
0436+  CF49 D3 A2       	OUT	(PAGE1),A
0437+  CF4B CB BC       	RES	7,H
0438+  CF4D CB F4       	SET	6,H
0439+  CF4F 7E          SrchDn0	LD	A,(HL)
0440+  CF50 FE 0D       	CP	#0D
0441+  CF52 20 15       	JR	NZ,SrchE1
0442+  CF54 23          	INC	HL
0443+  CF55 CB 7C       	BIT	7,H
0444+  CF57 28 08       	JR	Z,SrchDn1
0445+  CF59 1C          	INC	E
0446+  CF5A 1A          	LD	A,(DE)
0447+  CF5B D3 A2       	OUT	(PAGE1),A
0448+  CF5D CB BC       	RES	7,H
0449+  CF5F CB F4       	SET	6,H
0450+  CF61 7E          SrchDn1	LD	A,(HL)
0451+  CF62 FE 0A       	CP	#0A
0452+  CF64 20 2F       	JR	NZ,SrchEEx
0453+  CF66 0C          	INC	C
0454+  CF67 18 2C       	JR	SrchEEx
0455+  CF69             
0456+  CF69 FE 0A       SrchE1	CP	#0A
0457+  CF6B 28 28       	JR	Z,SrchEEx
0458+  CF6D 10 D2       	DJNZ	SearchDnLp
0459+  CF6F             
0460+  CF6F 23          	INC	HL
0461+  CF70 CB 7C       	BIT	7,H
0462+  CF72 28 08       	JR	Z,SrchDnE
0463+  CF74 1C          	INC	E
0464+  CF75 1A          	LD	A,(DE)
0465+  CF76 D3 A2       	OUT	(PAGE1),A
0466+  CF78 CB BC       	RES	7,H
0467+  CF7A CB F4       	SET	6,H
0468+  CF7C 7E          SrchDnE	LD	A,(HL)
0469+  CF7D FE 0D       	CP	#0D
0470+  CF7F 20 14       	JR	NZ,SrchEEx
0471+  CF81 0C          	INC	C
0472+  CF82 23          	INC	HL
0473+  CF83 CB 7C       	BIT	7,H
0474+  CF85 28 08       	JR	Z,SrchDE1
0475+  CF87 1C          	INC	E
0476+  CF88 1A          	LD	A,(DE)
0477+  CF89 D3 A2       	OUT	(PAGE1),A
0478+  CF8B CB BC       	RES	7,H
0479+  CF8D CB F4       	SET	6,H
0480+  CF8F 7E          SrchDE1	LD	A,(HL)
0481+  CF90 FE 0A       	CP	#0A
0482+  CF92 20 01       	JR	NZ,SrchEEx
0483+  CF94 0C          	INC	C
0484+  CF95 F1          SrchEEx	POP	AF
0485+  CF96 D3 A2       	OUT	(PAGE1),A
0486+  CF98 E1          	POP	HL
0487+  CF99 06 00       	LD	B,#00
0488+  CF9B 09          	ADD	HL,BC
0489+  CF9C C9          	RET 
0490+  CF9D             ;[]==========================================================[]
0491+  CF9D             GetString
0492+  CF9D 2A A1 C1    	LD	HL,(FileLenght)
0493+  CFA0 ED 5B 9B C1 	LD	DE,(LineShift)
0494+  CFA4 B7          	OR	A
0495+  CFA5 ED 52       	SBC	HL,DE
0496+  CFA7 D8          	RET	C
0497+  CFA8 06 F0       	LD	B,#F0
0498+  CFAA 48          	LD	C,B
0499+  CFAB 7C          	LD	A,H
0500+  CFAC B7          	OR	A
0501+  CFAD 20 01       	JR	NZ,GetLine
0502+  CFAF 45          	LD	B,L
0503+  CFB0             
0504+  CFB0 21 00 82    GetLine	LD	HL,LineBuffer
0505+  CFB3 78          	LD	A,B
0506+  CFB4 B7          	OR	A
0507+  CFB5 28 37       	JR	Z,GetLnE1
0508+  CFB7 DB A2       	IN	A,(PAGE1)
0509+  CFB9 F5          	PUSH	AF
0510+  CFBA ED 5B 9B C1 	LD	DE,(LineShift)
0511+  CFBE 7A          	LD	A,D		;Выделяем номер	страницы
0512+  CFBF E6 C0       	AND	#C0
0513+  CFC1 07          	RLCA 
0514+  CFC2 07          	RLCA 
0515+  CFC3 D9          	EXX 
0516+  CFC4 5F          	LD	E,A		;DE - Адрес страницы в списке
0517+  CFC5 16 84       	LD	D,high PagesList
0518+  CFC7 1A          	LD	A,(DE)		;Тек.страница
0519+  CFC8 D3 A2       	OUT	(PAGE1),A
0520+  CFCA D9          	EXX 
0521+  CFCB CB BA       	RES	7,D		;Вкл.с #4000
0522+  CFCD CB F2       	SET	6,D
0523+  CFCF             GetLnLoop
0524+  CFCF CB 7A       	BIT	7,D
0525+  CFD1 28 0A       	JR	Z,GetLn1
0526+  CFD3 CB BA       	RES	7,D
0527+  CFD5 CB F2       	SET	6,D
0528+  CFD7 D9          	EXX 
0529+  CFD8 1C          	INC	E		;DE - Адрес страницы в списке
0530+  CFD9 1A          	LD	A,(DE)		;Тек.страница
0531+  CFDA D3 A2       	OUT	(PAGE1),A
0532+  CFDC D9          	EXX 
0533+  CFDD 1A          GetLn1	LD	A,(DE)
0534+  CFDE 13          	INC	DE
0535+  CFDF FE 0D       	CP	#0D
0536+  CFE1 28 08       	JR	Z,GetLnExit
0537+  CFE3 FE 0A       	CP	#0A
0538+  CFE5 28 04       	JR	Z,GetLnExit
0539+  CFE7 77          	LD	(HL),A
0540+  CFE8 2C          	INC	L
0541+  CFE9 10 E4       	DJNZ	GetLnLoop
0542+  CFEB             GetLnExit
0543+  CFEB F1          	POP	AF
0544+  CFEC D3 A2       	OUT	(PAGE1),A
0545+  CFEE 97          GetLnE1	SUB	A
0546+  CFEF FD 77 06    	LD	(IY+ReadyStr),A
0547+  CFF2 7D          	LD	A,L
0548+  CFF3 FD 77 04    	LD	(IY+LenString),A
0549+  CFF6 FD 77 05    	LD	(IY+PrvLenStr),A
0550+  CFF9 FD 96 01    	SUB	(IY+StringX)
0551+  CFFC D0          	RET	NC
0552+  CFFD ED 44       	NEG 
0553+  CFFF 47          	LD	B,A
0554+  D000 3E 20       	LD	A,#20
0555+  D002 77          	LD	(HL),A
0556+  D003 2C          	INC	L
0557+  D004 10 FC       	DJNZ	$-2
0558+  D006 FD 7E 01    	LD	A,(IY+StringX)
0559+  D009 FD 77 04    	LD	(IY+LenString),A
0560+  D00C C9          	RET 
0561+  D00D             ;[]----------------------------------------------------------[]
0562+  D00D             PutString
0563+  D00D FD 7E 06    	LD	A,(IY+ReadyStr)
0564+  D010 B7          	OR	A
0565+  D011 C8          	RET	Z
0566+  D012 FD 7E 04    	LD	A,(IY+LenString)
0567+  D015 B7          	OR	A
0568+  D016 28 10       	JR	Z,PutStr2
0569+  D018 6F          	LD	L,A
0570+  D019 26 82       	LD	H,high LineBuffer
0571+  D01B 2D          PutStr1	DEC	L
0572+  D01C 3E 20       	LD	A,#20
0573+  D01E BE          	CP	(HL)
0574+  D01F 20 07       	JR	NZ,PutStr2
0575+  D021 FD 35 04    	DEC	(IY+LenString)
0576+  D024 7D          	LD	A,L
0577+  D025 B7          	OR	A
0578+  D026 20 F3       	JR	NZ,PutStr1
0579+  D028 3E C0       PutStr2	LD	A,#C0
0580+  D02A D3 89       	OUT	(YPORT),A
0581+  D02C FD 7E 05    	LD	A,(IY+PrvLenStr)
0582+  D02F FD 96 04    	SUB	(IY+LenString)
0583+  D032 C4 75 D0    	CALL	NZ,CorrectFile
0584+  D035 97          PutStrN	SUB	A
0585+  D036 FD 77 06    	LD	(IY+ReadyStr),A
0586+  D039 21 00 82    	LD	HL,LineBuffer
0587+  D03C FD 7E 04    	LD	A,(IY+LenString)
0588+  D03F FD 77 05    	LD	(IY+PrvLenStr),A
0589+  D042 B7          	OR	A
0590+  D043 C8          	RET	Z
0591+  D044 47          	LD	B,A
0592+  D045 DB A2       	IN	A,(PAGE1)
0593+  D047 F5          	PUSH	AF
0594+  D048 ED 5B 9B C1 	LD	DE,(LineShift)
0595+  D04C 7A          	LD	A,D		;Выделяем номер	страницы
0596+  D04D E6 C0       	AND	#C0
0597+  D04F 07          	RLCA 
0598+  D050 07          	RLCA 
0599+  D051 D9          	EXX 
0600+  D052 5F          	LD	E,A		;DE - Адрес страницы в списке
0601+  D053 16 84       	LD	D,high PagesList
0602+  D055 1A          	LD	A,(DE)		;Тек.страница
0603+  D056 D3 A2       	OUT	(PAGE1),A
0604+  D058 D9          	EXX 
0605+  D059 CB BA       	RES	7,D		;Вкл.с #4000
0606+  D05B CB F2       	SET	6,D
0607+  D05D             PutStringLp
0608+  D05D CB 7A       	BIT	7,D
0609+  D05F 28 0A       	JR	Z,PutStr3
0610+  D061 CB BA       	RES	7,D
0611+  D063 CB F2       	SET	6,D
0612+  D065 D9          	EXX 
0613+  D066 1C          	INC	E		;DE - Адрес страницы в списке
0614+  D067 1A          	LD	A,(DE)		;Тек.страница
0615+  D068 D3 A2       	OUT	(PAGE1),A
0616+  D06A D9          	EXX 
0617+  D06B 7E          PutStr3	LD	A,(HL)
0618+  D06C 12          	LD	(DE),A
0619+  D06D 13          	INC	DE
0620+  D06E 2C          	INC	L
0621+  D06F 10 EC       	DJNZ	PutStringLp
0622+  D071 F1          	POP	AF
0623+  D072 D3 A2       	OUT	(PAGE1),A
0624+  D074 C9          	RET 
0625+  D075             CorrectFile
0626+  D075 30 72       	JR	NC,MinusBytes
0627+  D077             PlusBytes
0628+  D077 ED 44       	NEG 
0629+  D079 4F          	LD	C,A
0630+  D07A 06 00       	LD	B,#00
0631+  D07C 2A A1 C1    	LD	HL,(FileLenght)
0632+  D07F 5D          	LD	E,L
0633+  D080 54          	LD	D,H
0634+  D081 09          	ADD	HL,BC
0635+  D082 7C          	LD	A,H
0636+  D083 FE C0       	CP	#C0
0637+  D085 D2 53 D1    	JP	NC,NoMemSpace
0638+  D088 22 A1 C1    	LD	(FileLenght),HL
0639+  D08B EB          	EX	DE,HL
0640+  D08C E5          	PUSH	HL
0641+  D08D ED 4B 9B C1 	LD	BC,(LineShift)
0642+  D091 B7          	OR	A
0643+  D092 ED 42       	SBC	HL,BC
0644+  D094 4D          	LD	C,L
0645+  D095 44          	LD	B,H
0646+  D096 E1          	POP	HL
0647+  D097 F3          	DI 
0648+  D098 D9          	EXX 
0649+  D099 DB 82       	IN	A,(PAGE0)
0650+  D09B 6F          	LD	L,A
0651+  D09C DB A2       	IN	A,(PAGE1)
0652+  D09E 5F          	LD	E,A
0653+  D09F DB C2       	IN	A,(PAGE2)
0654+  D0A1 4F          	LD	C,A
0655+  D0A2 D9          	EXX 
0656+  D0A3 3A 00 84    	LD	A,(PagesList)
0657+  D0A6 D3 82       	OUT	(PAGE0),A
0658+  D0A8 3A 01 84    	LD	A,(PagesList+1)
0659+  D0AB D3 A2       	OUT	(PAGE1),A
0660+  D0AD 3A 02 84    	LD	A,(PagesList+2)
0661+  D0B0 D3 C2       	OUT	(PAGE2),A
0662+  D0B2 78          	LD	A,B
0663+  D0B3 B7          	OR	A
0664+  D0B4 28 0F       	JR	Z,MovUp1
0665+  D0B6 52          	LD	D,D
0666+  D0B7 3E 00       	LD	A,#00
0667+  D0B9 40          	LD	B,B
0668+  D0BA 25          MovUp0	DEC	H
0669+  D0BB 15          	DEC	D
0670+  D0BC 6D          	LD	L,L
0671+  D0BD 7E          	LD	A,(HL)
0672+  D0BE 40          	LD	B,B
0673+  D0BF 6D          	LD	L,L
0674+  D0C0 12          	LD	(DE),A
0675+  D0C1 40          	LD	B,B
0676+  D0C2 05          	DEC	B
0677+  D0C3 20 F5       	JR	NZ,MovUp0
0678+  D0C5 79          MovUp1	LD	A,C
0679+  D0C6 B7          	OR	A
0680+  D0C7 28 13       	JR	Z,MoveUpE
0681+  D0C9 32 D4 D0    	LD	(LenUp+1),A
0682+  D0CC ED 42       	SBC	HL,BC
0683+  D0CE EB          	EX	DE,HL
0684+  D0CF ED 42       	SBC	HL,BC
0685+  D0D1 EB          	EX	DE,HL
0686+  D0D2 52          	LD	D,D
0687+  D0D3 3E 00       LenUp	LD	A,#00
0688+  D0D5 40          	LD	B,B
0689+  D0D6 6D          	LD	L,L
0690+  D0D7 7E          	LD	A,(HL)
0691+  D0D8 40          	LD	B,B
0692+  D0D9 6D          	LD	L,L
0693+  D0DA 12          	LD	(DE),A
0694+  D0DB 40          	LD	B,B
0695+  D0DC D9          MoveUpE	EXX 
0696+  D0DD 79          	LD	A,C
0697+  D0DE D3 C2       	OUT	(PAGE2),A
0698+  D0E0 7B          	LD	A,E
0699+  D0E1 D3 A2       	OUT	(PAGE1),A
0700+  D0E3 7D          	LD	A,L
0701+  D0E4 D3 82       	OUT	(PAGE0),A
0702+  D0E6 D9          	EXX 
0703+  D0E7 FB          	EI 
0704+  D0E8 C9          	RET 
0705+  D0E9             MinusBytes
0706+  D0E9 4F          	LD	C,A
0707+  D0EA 06 00       	LD	B,#00
0708+  D0EC 2A 9B C1    	LD	HL,(LineShift)
0709+  D0EF E5          	PUSH	HL
0710+  D0F0 09          	ADD	HL,BC
0711+  D0F1 E5          	PUSH	HL
0712+  D0F2 EB          	EX	DE,HL
0713+  D0F3 2A A1 C1    	LD	HL,(FileLenght)
0714+  D0F6 B7          	OR	A
0715+  D0F7 ED 42       	SBC	HL,BC
0716+  D0F9 22 A1 C1    	LD	(FileLenght),HL
0717+  D0FC ED 4B 9B C1 	LD	BC,(LineShift)
0718+  D100 B7          	OR	A
0719+  D101 ED 42       	SBC	HL,BC
0720+  D103 4D          	LD	C,L
0721+  D104 44          	LD	B,H
0722+  D105 E1          	POP	HL
0723+  D106 D1          	POP	DE
0724+  D107 F3          	DI 
0725+  D108 D9          	EXX 
0726+  D109 DB 82       	IN	A,(PAGE0)
0727+  D10B 6F          	LD	L,A
0728+  D10C DB A2       	IN	A,(PAGE1)
0729+  D10E 5F          	LD	E,A
0730+  D10F DB C2       	IN	A,(PAGE2)
0731+  D111 4F          	LD	C,A
0732+  D112 D9          	EXX 
0733+  D113 3A 00 84    	LD	A,(PagesList)
0734+  D116 D3 82       	OUT	(PAGE0),A
0735+  D118 3A 01 84    	LD	A,(PagesList+1)
0736+  D11B D3 A2       	OUT	(PAGE1),A
0737+  D11D 3A 02 84    	LD	A,(PagesList+2)
0738+  D120 D3 C2       	OUT	(PAGE2),A
0739+  D122 78          	LD	A,B
0740+  D123 B7          	OR	A
0741+  D124 28 0F       	JR	Z,MovFl1
0742+  D126 52          	LD	D,D
0743+  D127 3E 00       	LD	A,#00
0744+  D129 40          	LD	B,B
0745+  D12A 6D          MovFl0	LD	L,L
0746+  D12B 7E          	LD	A,(HL)
0747+  D12C 40          	LD	B,B
0748+  D12D 6D          	LD	L,L
0749+  D12E 12          	LD	(DE),A
0750+  D12F 40          	LD	B,B
0751+  D130 24          	INC	H
0752+  D131 14          	INC	D
0753+  D132 05          	DEC	B
0754+  D133 20 F5       	JR	NZ,MovFl0
0755+  D135 79          MovFl1	LD	A,C
0756+  D136 B7          	OR	A
0757+  D137 28 0D       	JR	Z,MoveFlE
0758+  D139 32 3E D1    	LD	(LenFl+1),A
0759+  D13C 52          	LD	D,D
0760+  D13D 3E 00       LenFl	LD	A,#00
0761+  D13F 40          	LD	B,B
0762+  D140 6D          	LD	L,L
0763+  D141 7E          	LD	A,(HL)
0764+  D142 40          	LD	B,B
0765+  D143 6D          	LD	L,L
0766+  D144 12          	LD	(DE),A
0767+  D145 40          	LD	B,B
0768+  D146 D9          MoveFlE	EXX 
0769+  D147 79          	LD	A,C
0770+  D148 D3 C2       	OUT	(PAGE2),A
0771+  D14A 7B          	LD	A,E
0772+  D14B D3 A2       	OUT	(PAGE1),A
0773+  D14D 7D          	LD	A,L
0774+  D14E D3 82       	OUT	(PAGE0),A
0775+  D150 D9          	EXX 
0776+  D151 FB          	EI 
0777+  D152 C9          	RET 
0778+  D153             NoMemSpace
0779+  D153 CD 9D CF    	CALL	GetString
0780+  D156 CD 3B CE    	CALL	PrnASCIIstring
0781+  D159 CD 5F D1    	CALL	PrnASCIIinfo
0782+  D15C 33          	INC	SP
0783+  D15D 33          	INC	SP
0784+  D15E C9          	RET 
0785+  D15F             ;[]==========================================================[]
0786+  D15F             PrnASCIIinfo
0787+  D15F 21 41 D2    	LD	HL,LineT
0788+  D162 11 47 D2    	LD	DE,ColT
0789+  D165 01 4D D2    	LD	BC,FreeT
0790+  D168 3E 01       	LD	A,#01
0791+  D16A                    DUP     #04
0792+  D16A 77          >	LD	(HL),A
0793+  D16B 23          >	INC	HL
0794+  D16C 12          >	LD	(DE),A
0795+  D16D 13          >	INC	DE
0796+  D16E 02          >	LD	(BC),A
0797+  D16F 03          >	INC	BC
0792+  D170 77          >	LD	(HL),A
0793+  D171 23          >	INC	HL
0794+  D172 12          >	LD	(DE),A
0795+  D173 13          >	INC	DE
0796+  D174 02          >	LD	(BC),A
0797+  D175 03          >	INC	BC
0792+  D176 77          >	LD	(HL),A
0793+  D177 23          >	INC	HL
0794+  D178 12          >	LD	(DE),A
0795+  D179 13          >	INC	DE
0796+  D17A 02          >	LD	(BC),A
0797+  D17B 03          >	INC	BC
0792+  D17C 77          >	LD	(HL),A
0793+  D17D 23          >	INC	HL
0794+  D17E 12          >	LD	(DE),A
0795+  D17F 13          >	INC	DE
0796+  D180 02          >	LD	(BC),A
0797+  D181 03          >	INC	BC
0799+  D182 77          	LD	(HL),A
0800+  D183 12          	LD	(DE),A
0801+  D184 02          	LD	(BC),A
0802+  D185 2A 97 C1    	LD	HL,(CurLine)
0803+  D188 11 41 D2    	LD	DE,LineT
0804+  D18B 23          	INC	HL
0805+  D18C CD 8D 86    	CALL	ConvNumTxt16
0806+  D18F 11 47 D2    	LD	DE,ColT
0807+  D192 FD 7E 00    	LD	A,(IY+CursorX)
0808+  D195 FD 86 02    	ADD	A,(IY+CursAddX)
0809+  D198 3C          	INC	A
0810+  D199 CD 90 86    	CALL	ConvNumTxt8
0811+  D19C 21 00 C0    	LD	HL,#C000
0812+  D19F 11 4D D2    	LD	DE,FreeT
0813+  D1A2 ED 4B A1 C1 	LD	BC,(FileLenght)
0814+  D1A6 B7          	OR	A
0815+  D1A7 ED 42       	SBC	HL,BC
0816+  D1A9 CD 8D 86    	CALL	ConvNumTxt16
0817+  D1AC 21 3D D2    	LD	HL,ReadyNo
0818+  D1AF FD 7E 07    	LD	A,(IY+ReadyFile)
0819+  D1B2 B7          	OR	A
0820+  D1B3 28 03       	JR	Z,$+5
0821+  D1B5 21 3F D2    	LD	HL,ReadyYes
0822+  D1B8 11 7E 01    	LD	DE,#017E
0823+  D1BB 01 11 00    	LD	BC,#0011
0824+  D1BE 3E 80       	LD	A,#80
0825+  D1C0 CD 0C 86    	CALL	PrnTxtLnIFF
0826+  D1C3 21 41 D2    	LD	HL,LineT
0827+  D1C6 11 AE 01    	LD	DE,#01AE
0828+  D1C9 01 11 00    	LD	BC,#0011
0829+  D1CC 3E 80       	LD	A,#80
0830+  D1CE CD 0C 86    	CALL	PrnTxtLnIFF
0831+  D1D1 21 47 D2    	LD	HL,ColT
0832+  D1D4 11 F8 01    	LD	DE,#01F8
0833+  D1D7 01 11 00    	LD	BC,#0011
0834+  D1DA 3E 80       	LD	A,#80
0835+  D1DC CD 0C 86    	CALL	PrnTxtLnIFF
0836+  D1DF 21 4D D2    	LD	HL,FreeT
0837+  D1E2 11 48 02    	LD	DE,#0248
0838+  D1E5 01 11 00    	LD	BC,#0011
0839+  D1E8 3E 80       	LD	A,#80
0840+  D1EA CD 0C 86    	CALL	PrnTxtLnIFF
0841+  D1ED DD 21 E8 C5 	LD	IX,EditVBar
0842+  D1F1 2A F6 C5    	LD	HL,(ELines)
0843+  D1F4 ED 5B 99 C1 	LD	DE,(EquipLines)
0844+  D1F8 B7          	OR	A
0845+  D1F9 ED 52       	SBC	HL,DE
0846+  D1FB 28 12       	JR	Z,TstLine
0847+  D1FD ED 53 F6 C5 	LD	(ELines),DE
0848+  D201 CD 2A 86    	CALL	InitScrBar
0849+  D204 2A 97 C1    	LD	HL,(CurLine)
0850+  D207 22 F8 C5    	LD	(CLine),HL
0851+  D20A CD 30 86    	CALL	PrnVScrBar
0852+  D20D 18 13       	JR	TstAddX
0853+  D20F 2A F8 C5    TstLine	LD	HL,(CLine)
0854+  D212 ED 5B 97 C1 	LD	DE,(CurLine)
0855+  D216 B7          	OR	A
0856+  D217 ED 52       	SBC	HL,DE
0857+  D219 28 07       	JR	Z,TstAddX
0858+  D21B ED 53 F8 C5 	LD	(CLine),DE
0859+  D21F CD 30 86    	CALL	PrnVScrBar
0860+  D222 3A 0A C6    TstAddX	LD	A,(CAddX)
0861+  D225 FD 96 00    	SUB	(IY+CursorX)
0862+  D228 FD BE 02    	CP	(IY+CursAddX)
0863+  D22B C8          	RET	Z
0864+  D22C FD 7E 00    	LD	A,(IY+CursorX)
0865+  D22F FD 86 02    	ADD	A,(IY+CursAddX)
0866+  D232 32 0A C6    	LD	(CAddX),A
0867+  D235 DD 21 FA C5 	LD	IX,EditHBar
0868+  D239 CD 2D 86    	CALL	PrnHScrBar
0869+  D23C C9          	RET 
0870+  D23D             ReadyNo
0871+  D23D 01 00       	DEFB	#01,0
0872+  D23F             ReadyYes
0873+  D23F 2A 00       	DEFB	"*",0
0874+  D241             LineT
0875+  D241 00          	DEFS	6,0
0876+  D247             ColT
0877+  D247 00          	DEFS	6,0
0878+  D24D             FreeT
0879+  D24D 00          	DEFS	6,0
0880+  D253             
0881+  D253             
0882+  D253             
0883+  D253             ;[]==========================================================[]
0884+  D253             TInsertSymbol
0885+  D253 FE 20       	CP	#20
0886+  D255 30 0D       	JR	NC,InsSymbol
0887+  D257 FE 08       	CP	#08
0888+  D259 CA DA D2    	JP	Z,BackSpace
0889+  D25C FE 0D       	CP	#0D
0890+  D25E CA 95 D2    	JP	Z,Enter
0891+  D261 FE 09       	CP	#09
0892+  D263 C0          	RET	NZ
0893+  D264             InsSymbol
0894+  D264 08          	EX	AF,AF'
0895+  D265 FD 7E 04    	LD	A,(IY+LenString)	;InpytSymb
0896+  D268 FE F0       	CP	240			;Max len
0897+  D26A C8          	RET	Z
0898+  D26B FD 96 01    	SUB	(IY+StringX)
0899+  D26E 28 0D       	JR	Z,NotInsert
0900+  D270             ;Ввод в	середину текста
0901+  D270 4F          	LD	C,A
0902+  D271 06 00       	LD	B,#00
0903+  D273 FD 6E 04    	LD	L,(IY+LenString)
0904+  D276 26 82       	LD	H,high LineBuffer
0905+  D278 5D          	LD	E,L
0906+  D279 54          	LD	D,H
0907+  D27A 2B          	DEC	HL
0908+  D27B ED B8       	LDDR 
0909+  D27D             NotInsert
0910+  D27D 26 82       	LD	H,high LineBuffer
0911+  D27F FD 6E 01    	LD	L,(IY+StringX)
0912+  D282 08          	EX	AF,AF'
0913+  D283 77          	LD	(HL),A
0914+  D284 FD 34 04    	INC	(IY+LenString)
0915+  D287 3E 01       	LD	A,#01
0916+  D289 FD 77 06    	LD	(IY+ReadyStr),A
0917+  D28C FD 77 07    	LD	(IY+ReadyFile),A
0918+  D28F CD 3B CE    	CALL	PrnASCIIstring
0919+  D292 C3 89 D4    	JP	TCursorRight
0920+  D295             ;[]----------------------------------------------------------[]
0921+  D295             ;Enter
0922+  D295             Enter
0923+  D295 FD 7E 04    	LD	A,(IY+LenString)
0924+  D298 FD 96 01    	SUB	(IY+StringX)
0925+  D29B 28 0E       	JR	Z,EnterEnd
0926+  D29D 4F          	LD	C,A
0927+  D29E 06 00       	LD	B,#00
0928+  D2A0 FD 6E 04    	LD	L,(IY+LenString)
0929+  D2A3 26 82       	LD	H,high LineBuffer
0930+  D2A5 5D          	LD	E,L
0931+  D2A6 54          	LD	D,H
0932+  D2A7 2B          	DEC	HL
0933+  D2A8 13          	INC	DE
0934+  D2A9 ED B8       	LDDR 
0935+  D2AB             EnterEnd
0936+  D2AB 26 82       	LD	H,high LineBuffer
0937+  D2AD FD 6E 01    	LD	L,(IY+StringX)
0938+  D2B0 36 0D       	LD	(HL),#0D
0939+  D2B2 23          	INC	HL
0940+  D2B3 36 0A       	LD	(HL),#0A
0941+  D2B5 FD 34 04    	INC	(IY+LenString)
0942+  D2B8 FD 34 04    	INC	(IY+LenString)
0943+  D2BB 3E 01       	LD	A,#01
0944+  D2BD FD 77 06    	LD	(IY+ReadyStr),A
0945+  D2C0 FD 77 07    	LD	(IY+ReadyFile),A
0946+  D2C3 CD 0D D0    	CALL	PutString
0947+  D2C6 2A 99 C1    	LD	HL,(EquipLines)
0948+  D2C9 23          	INC	HL
0949+  D2CA 22 99 C1    	LD	(EquipLines),HL
0950+  D2CD CD AD CC    	CALL	PrnASCIIpage
0951+  D2D0 97          	SUB	A
0952+  D2D1 FD 77 00    	LD	(IY+CursorX),A
0953+  D2D4 FD 77 01    	LD	(IY+StringX),A
0954+  D2D7 C3 0B D6    	JP	TCursorDown
0955+  D2DA             ;[]----------------------------------------------------------[]
0956+  D2DA             ;BackSpace
0957+  D2DA             BackSpace
0958+  D2DA FD 7E 01    	LD	A,(IY+StringX)
0959+  D2DD B7          	OR	A
0960+  D2DE C8          	RET	Z
0961+  D2DF 6F          	LD	L,A
0962+  D2E0 26 82       	LD	H,high LineBuffer
0963+  D2E2 5D          	LD	E,L
0964+  D2E3 54          	LD	D,H
0965+  D2E4 1B          	DEC	DE
0966+  D2E5 FD 7E 04    	LD	A,(IY+LenString)
0967+  D2E8 FD 96 01    	SUB	(IY+StringX)
0968+  D2EB 28 06       	JR	Z,BackSp1
0969+  D2ED 4F          	LD	C,A
0970+  D2EE 06 00       	LD	B,#00
0971+  D2F0 ED B0       	LDIR 
0972+  D2F2 97          	SUB	A
0973+  D2F3 12          BackSp1	LD	(DE),A
0974+  D2F4 3C          	INC	A
0975+  D2F5 FD 77 06    	LD	(IY+ReadyStr),A
0976+  D2F8 FD 77 07    	LD	(IY+ReadyFile),A
0977+  D2FB FD 35 04    	DEC	(IY+LenString)
0978+  D2FE CD 3B CE    	CALL	PrnASCIIstring
0979+  D301 C3 21 D4    	JP	TCursorLeft
0980+  D304             ;[]----------------------------------------------------------[]
0981+  D304             TDeleteSymbol
0982+  D304 FD 7E 04    	LD	A,(IY+LenString)
0983+  D307 FD 96 01    	SUB	(IY+StringX)
0984+  D30A 28 21       	JR	Z,AddString
0985+  D30C 4F          	LD	C,A
0986+  D30D 06 00       	LD	B,#00
0987+  D30F FD 6E 01    	LD	L,(IY+StringX)
0988+  D312 26 82       	LD	H,high LineBuffer
0989+  D314 23          	INC	HL
0990+  D315 5D          	LD	E,L
0991+  D316 54          	LD	D,H
0992+  D317 1B          	DEC	DE
0993+  D318 ED B0       	LDIR 
0994+  D31A 97          	SUB	A
0995+  D31B 12          	LD	(DE),A
0996+  D31C 3C          	INC	A
0997+  D31D FD 77 06    	LD	(IY+ReadyStr),A
0998+  D320 FD 77 07    	LD	(IY+ReadyFile),A
0999+  D323 FD 35 04    	DEC	(IY+LenString)
1000+  D326 CD 3B CE    	CALL	PrnASCIIstring
1001+  D329 CD 5F D1    	CALL	PrnASCIIinfo
1002+  D32C C9          	RET 
1003+  D32D             AddString
1004+  D32D CD 28 D0    	CALL	PutStr2
1005+  D330 FD 7E 01    	LD	A,(IY+StringX)
1006+  D333 FE F0       	CP	#F0
1007+  D335 C8          	RET	Z
1008+  D336 2A 9B C1    	LD	HL,(LineShift)
1009+  D339 CD 18 CF    	CALL	SearchDown
1010+  D33C ED 5B A1 C1 	LD	DE,(FileLenght)
1011+  D340 B7          	OR	A
1012+  D341 ED 52       	SBC	HL,DE
1013+  D343 C8          	RET	Z
1014+  D344 19          	ADD	HL,DE
1015+  D345 DB A2       	IN	A,(PAGE1)
1016+  D347 F5          	PUSH	AF
1017+  D348 7C          	LD	A,H		;Выделяем номер	страницы
1018+  D349 E6 C0       	AND	#C0
1019+  D34B 07          	RLCA 
1020+  D34C 07          	RLCA 
1021+  D34D 5F          	LD	E,A
1022+  D34E 16 84       	LD	D,high PagesList
1023+  D350 1A          	LD	A,(DE)		;Тек.страница
1024+  D351 D3 A2       	OUT	(PAGE1),A
1025+  D353 CB BC       	RES	7,H
1026+  D355 CB F4       	SET	6,H
1027+  D357 2B          	DEC	HL
1028+  D358 CB 74       	BIT	6,H
1029+  D35A 20 06       	JR	NZ,AddStr0
1030+  D35C 1D          	DEC	E
1031+  D35D 1A          	LD	A,(DE)
1032+  D35E D3 A2       	OUT	(PAGE1),A
1033+  D360 CB F4       	SET	6,H
1034+  D362 7E          AddStr0	LD	A,(HL)
1035+  D363 FE 0D       	CP	#0D
1036+  D365 06 01       	LD	B,#01
1037+  D367 28 1A       	JR	Z,AddStr2
1038+  D369 FE 0A       	CP	#0A
1039+  D36B 06 00       	LD	B,#00
1040+  D36D 20 14       	JR	NZ,AddStr2
1041+  D36F 2B          	DEC	HL
1042+  D370 CB 74       	BIT	6,H
1043+  D372 20 06       	JR	NZ,AddStr1
1044+  D374 1D          	DEC	E
1045+  D375 1A          	LD	A,(DE)
1046+  D376 D3 A2       	OUT	(PAGE1),A
1047+  D378 CB F4       	SET	6,H
1048+  D37A 7E          AddStr1	LD	A,(HL)
1049+  D37B FE 0D       	CP	#0D
1050+  D37D 06 01       	LD	B,#01
1051+  D37F 20 02       	JR	NZ,AddStr2
1052+  D381 06 02       	LD	B,#02
1053+  D383 F1          AddStr2	POP	AF
1054+  D384 D3 A2       	OUT	(PAGE1),A
1055+  D386 78          	LD	A,B
1056+  D387 B7          	OR	A
1057+  D388 C8          	RET	Z
1058+  D389 CD E9 D0    	CALL	MinusBytes
1059+  D38C CD 35 D0    	CALL	PutStrN
1060+  D38F 2A 99 C1    	LD	HL,(EquipLines)
1061+  D392 2B          	DEC	HL
1062+  D393 22 99 C1    	LD	(EquipLines),HL
1063+  D396 CD AD CC    	CALL	PrnASCIIpage
1064+  D399 C9          	RET 
1065+  D39A             ;[]----------------------------------------------------------[]
1066+  D39A             ;Delete	word
1067+  D39A             TDeleteWord
1068+  D39A FD 7E 01    	LD	A,(IY+StringX)
1069+  D39D B7          	OR	A
1070+  D39E C8          	RET	Z
1071+  D39F 4F          	LD	C,A
1072+  D3A0 47          	LD	B,A
1073+  D3A1 6F          	LD	L,A
1074+  D3A2 26 82       	LD	H,high LineBuffer
1075+  D3A4 FD 7E 04    	LD	A,(IY+LenString)
1076+  D3A7 91          	SUB	C
1077+  D3A8 5F          	LD	E,A
1078+  D3A9 E5          	PUSH	HL
1079+  D3AA 2D          	DEC	L
1080+  D3AB 0D          	DEC	C
1081+  D3AC 7E          	LD	A,(HL)
1082+  D3AD FE 09       	CP	#09
1083+  D3AF 28 26       	JR	Z,DWord1
1084+  D3B1 FE 20       	CP	#20
1085+  D3B3 28 22       	JR	Z,DWord1
1086+  D3B5 FE 2C       	CP	","
1087+  D3B7 28 1E       	JR	Z,DWord1
1088+  D3B9 FE 2E       	CP	"."
1089+  D3BB 28 1A       	JR	Z,DWord1
1090+  D3BD 05          	DEC	B
1091+  D3BE 28 2E       	JR	Z,DWord2
1092+  D3C0 2D          DWord0	DEC	L
1093+  D3C1 0D          	DEC	C
1094+  D3C2 7E          	LD	A,(HL)
1095+  D3C3 FE 09       	CP	#09
1096+  D3C5 28 25       	JR	Z,DWord2-2
1097+  D3C7 FE 20       	CP	#20
1098+  D3C9 28 21       	JR	Z,DWord2-2
1099+  D3CB FE 2C       	CP	","
1100+  D3CD 28 1D       	JR	Z,DWord2-2
1101+  D3CF FE 2E       	CP	"."
1102+  D3D1 28 19       	JR	Z,DWord2-2
1103+  D3D3 10 EB       	DJNZ	DWord0
1104+  D3D5 18 17       	JR	DWord2
1105+  D3D7             DWord1
1106+  D3D7 7E          	LD	A,(HL)
1107+  D3D8 FE 09       	CP	#09
1108+  D3DA 28 0C       	JR	Z,$+14
1109+  D3DC FE 20       	CP	#20
1110+  D3DE 28 08       	JR	Z,$+10
1111+  D3E0 FE 2C       	CP	","
1112+  D3E2 28 04       	JR	Z,$+6
1113+  D3E4 FE 2E       	CP	"."
1114+  D3E6 20 04       	JR	NZ,DWord2-2
1115+  D3E8 2D          	DEC	L
1116+  D3E9 0D          	DEC	C
1117+  D3EA 10 EB       	DJNZ	DWord1
1118+  D3EC 2C          	INC	L
1119+  D3ED 0C          	INC	C
1120+  D3EE FD 7E 01    DWord2	LD	A,(IY+StringX)
1121+  D3F1 FD 71 01    	LD	(IY+StringX),C
1122+  D3F4 91          	SUB	C
1123+  D3F5 4F          	LD	C,A
1124+  D3F6 08          	EX	AF,AF'
1125+  D3F7 FD 7E 04    	LD	A,(IY+LenString)
1126+  D3FA 91          	SUB	C
1127+  D3FB FD 77 04    	LD	(IY+LenString),A
1128+  D3FE 4B          	LD	C,E
1129+  D3FF 06 00       	LD	B,#00
1130+  D401 EB          	EX	DE,HL
1131+  D402 E1          	POP	HL
1132+  D403 79          	LD	A,C
1133+  D404 B7          	OR	A
1134+  D405 28 02       	JR	Z,$+4
1135+  D407 ED B0       	LDIR 
1136+  D409 EB          	EX	DE,HL
1137+  D40A 08          	EX	AF,AF'
1138+  D40B 47          	LD	B,A
1139+  D40C 97          	SUB	A
1140+  D40D 77          	LD	(HL),A
1141+  D40E 2C          	INC	L
1142+  D40F 10 FC       	DJNZ	$-2
1143+  D411 3C          	INC	A
1144+  D412 FD 77 06    	LD	(IY+ReadyStr),A
1145+  D415 FD 77 07    	LD	(IY+ReadyFile),A
1146+  D418 CD 3B CE    	CALL	PrnASCIIstring
1147+  D41B FD 34 01    	INC	(IY+StringX)
1148+  D41E C3 21 D4    	JP	TCursorLeft
1149+  D421             ;[]----------------------------------------------------------[]
1150+  D421             ;Курсор	влево на одно место
1151+  D421             TCursorLeft
1152+  D421 FD 7E 01    	LD	A,(IY+StringX)
1153+  D424 B7          	OR	A
1154+  D425 C8          	RET	Z
1155+  D426 3D          	DEC	A
1156+  D427 FD 77 01    	LD	(IY+StringX),A
1157+  D42A 0E 00       	LD	C,#00
1158+  D42C 28 14       	JR	Z,CursLf3
1159+  D42E 21 00 82    	LD	HL,LineBuffer
1160+  D431 47          	LD	B,A
1161+  D432 7E          CursLf1	LD	A,(HL)
1162+  D433 23          	INC	HL
1163+  D434 FE 09       	CP	#09
1164+  D436 20 07       	JR	NZ,CursLf2
1165+  D438 79          	LD	A,C
1166+  D439 E6 F8       	AND	#F8
1167+  D43B C6 08       	ADD	A,#08
1168+  D43D 4F          	LD	C,A
1169+  D43E 0D          	DEC	C
1170+  D43F 0C          CursLf2	INC	C
1171+  D440 10 F0       	DJNZ	CursLf1
1172+  D442 FD 46 02    CursLf3	LD	B,(IY+CursAddX)
1173+  D445 79          CursLf4	LD	A,C
1174+  D446 FD 96 02    	SUB	(IY+CursAddX)
1175+  D449 30 0A       	JR	NC,CursLf5
1176+  D44B FD 7E 02    	LD	A,(IY+CursAddX)
1177+  D44E D6 08       	SUB	Step
1178+  D450 FD 77 02    	LD	(IY+CursAddX),A
1179+  D453 18 F0       	JR	CursLf4
1180+  D455 FD 77 00    CursLf5	LD	(IY+CursorX),A
1181+  D458 78          	LD	A,B
1182+  D459 FD BE 02    	CP	(IY+CursAddX)
1183+  D45C C4 0D CD    	CALL	NZ,RefrASCIIpage
1184+  D45F CD 87 C6    	CALL	ResCursor
1185+  D462 FD 5E 00    	LD	E,(IY+CursorX)
1186+  D465 FD 56 03    	LD	D,(IY+CursorY)
1187+  D468 CD 34 C6    	CALL	SetCursor
1188+  D46B CD 5F D1    	CALL	PrnASCIIinfo
1189+  D46E FD 7E 04    	LD	A,(IY+LenString)
1190+  D471 FD 96 01    	SUB	(IY+StringX)
1191+  D474 C8          	RET	Z
1192+  D475 47          	LD	B,A
1193+  D476 FD 6E 04    	LD	L,(IY+LenString)
1194+  D479 26 82       	LD	H,high LineBuffer
1195+  D47B 16 00       	LD	D,#00
1196+  D47D 3E 20       	LD	A,#20
1197+  D47F 2B          CursLf6	DEC	HL
1198+  D480 BE          	CP	(HL)
1199+  D481 C0          	RET	NZ
1200+  D482 72          	LD	(HL),D
1201+  D483 FD 35 04    	DEC	(IY+LenString)
1202+  D486 10 F7       	DJNZ	CursLf6
1203+  D488 C9          	RET 
1204+  D489             ;[]----------------------------------------------------------[]
1205+  D489             ;Курсор	вправо на одно место
1206+  D489             TCursorRight
1207+  D489 FD 7E 00    	LD	A,(IY+CursorX)
1208+  D48C FD 86 02    	ADD	A,(IY+CursAddX)
1209+  D48F FE F0       	CP	240
1210+  D491 C8          	RET	Z
1211+  D492 FD 7E 01    	LD	A,(IY+StringX)
1212+  D495 FE F0       	CP	240
1213+  D497 C8          	RET	Z
1214+  D498 3C          	INC	A
1215+  D499 FD 77 01    	LD	(IY+StringX),A
1216+  D49C 0E 00       	LD	C,#00
1217+  D49E 21 00 82    	LD	HL,LineBuffer
1218+  D4A1 B7          	OR	A
1219+  D4A2 28 11       	JR	Z,CursRg3
1220+  D4A4 47          	LD	B,A
1221+  D4A5 7E          CursRg1	LD	A,(HL)
1222+  D4A6 23          	INC	HL
1223+  D4A7 FE 09       	CP	#09
1224+  D4A9 20 07       	JR	NZ,CursRg2
1225+  D4AB 79          	LD	A,C
1226+  D4AC E6 F8       	AND	#F8
1227+  D4AE C6 08       	ADD	A,#08
1228+  D4B0 4F          	LD	C,A
1229+  D4B1 0D          	DEC	C
1230+  D4B2 0C          CursRg2	INC	C
1231+  D4B3 10 F0       	DJNZ	CursRg1
1232+  D4B5 FD 46 02    CursRg3	LD	B,(IY+CursAddX)
1233+  D4B8 79          CursRg4	LD	A,C
1234+  D4B9 FD 96 02    	SUB	(IY+CursAddX)
1235+  D4BC FE 4E       	CP	#4E
1236+  D4BE 38 0A       	JR	C,CursRg5
1237+  D4C0 FD 7E 02    	LD	A,(IY+CursAddX)
1238+  D4C3 C6 08       	ADD	A,Step
1239+  D4C5 FD 77 02    	LD	(IY+CursAddX),A
1240+  D4C8 18 EE       	JR	CursRg4
1241+  D4CA FD 77 00    CursRg5	LD	(IY+CursorX),A
1242+  D4CD 78          	LD	A,B
1243+  D4CE FD BE 02    	CP	(IY+CursAddX)
1244+  D4D1 C4 0D CD    	CALL	NZ,RefrASCIIpage
1245+  D4D4 FD 7E 04    	LD	A,(IY+LenString)
1246+  D4D7 FD 96 01    	SUB	(IY+StringX)
1247+  D4DA 30 0A       	JR	NC,CursRg6
1248+  D4DC FD 6E 04    	LD	L,(IY+LenString)
1249+  D4DF 26 82       	LD	H,high LineBuffer
1250+  D4E1 36 20       	LD	(HL),#20
1251+  D4E3 FD 34 04    	INC	(IY+LenString)
1252+  D4E6 CD 87 C6    CursRg6	CALL	ResCursor
1253+  D4E9 FD 5E 00    	LD	E,(IY+CursorX)
1254+  D4EC FD 56 03    	LD	D,(IY+CursorY)
1255+  D4EF CD 34 C6    	CALL	SetCursor
1256+  D4F2 CD 5F D1    	CALL	PrnASCIIinfo
1257+  D4F5 C9          	RET 
1258+  D4F6             ;[]----------------------------------------------------------[]
1259+  D4F6             ;Word left
1260+  D4F6             TWordLeft
1261+  D4F6 FD 7E 01    	LD	A,(IY+StringX)
1262+  D4F9 B7          	OR	A
1263+  D4FA C8          	RET	Z
1264+  D4FB 4F          	LD	C,A
1265+  D4FC 47          	LD	B,A
1266+  D4FD 6F          	LD	L,A
1267+  D4FE 26 82       	LD	H,high LineBuffer
1268+  D500 2D          WordLf0	DEC	L
1269+  D501 0D          	DEC	C
1270+  D502 7E          	LD	A,(HL)
1271+  D503 FE 09       	CP	#09
1272+  D505 28 10       	JR	Z,WordLf1
1273+  D507 FE 20       	CP	#20
1274+  D509 28 0C       	JR	Z,WordLf1
1275+  D50B FE 2C       	CP	","
1276+  D50D 28 08       	JR	Z,WordLf1
1277+  D50F FE 2E       	CP	"."
1278+  D511 28 04       	JR	Z,WordLf1
1279+  D513 10 EB       	DJNZ	WordLf0
1280+  D515 18 16       	JR	WordLf2
1281+  D517 7E          WordLf1	LD	A,(HL)
1282+  D518 FE 09       	CP	#09
1283+  D51A 28 0C       	JR	Z,$+14
1284+  D51C FE 20       	CP	#20
1285+  D51E 28 08       	JR	Z,$+10
1286+  D520 FE 2C       	CP	","
1287+  D522 28 04       	JR	Z,$+6
1288+  D524 FE 2E       	CP	"."
1289+  D526 20 04       	JR	NZ,WordLf2-1
1290+  D528 2D          	DEC	L
1291+  D529 0D          	DEC	C
1292+  D52A 10 EB       	DJNZ	WordLf1
1293+  D52C 0C          	INC	C
1294+  D52D FD 71 01    WordLf2	LD	(IY+StringX),C
1295+  D530 FD 34 01    	INC	(IY+StringX)
1296+  D533 C3 21 D4    	JP	TCursorLeft
1297+  D536             ;[]----------------------------------------------------------[]
1298+  D536             ;Word right
1299+  D536             TWordRight
1300+  D536 FD 7E 04    	LD	A,(IY+LenString)
1301+  D539 FD 96 01    	SUB	(IY+StringX)
1302+  D53C C8          	RET	Z
1303+  D53D 47          	LD	B,A
1304+  D53E FD 6E 01    	LD	L,(IY+StringX)
1305+  D541 26 82       	LD	H,high LineBuffer
1306+  D543 4D          	LD	C,L
1307+  D544 7E          WordRg0	LD	A,(HL)
1308+  D545 FE 09       	CP	#09
1309+  D547 28 12       	JR	Z,WordRg1
1310+  D549 FE 20       	CP	#20
1311+  D54B 28 0E       	JR	Z,WordRg1
1312+  D54D FE 2C       	CP	","
1313+  D54F 28 0A       	JR	Z,WordRg1
1314+  D551 FE 2E       	CP	"."
1315+  D553 28 06       	JR	Z,WordRg1
1316+  D555 2C          	INC	L
1317+  D556 0C          	INC	C
1318+  D557 10 EB       	DJNZ	WordRg0
1319+  D559 18 15       	JR	WordRg2
1320+  D55B 7E          WordRg1	LD	A,(HL)
1321+  D55C FE 09       	CP	#09
1322+  D55E 28 0C       	JR	Z,$+14
1323+  D560 FE 20       	CP	#20
1324+  D562 28 08       	JR	Z,$+10
1325+  D564 FE 2C       	CP	","
1326+  D566 28 04       	JR	Z,$+6
1327+  D568 FE 2E       	CP	"."
1328+  D56A 20 04       	JR	NZ,WordRg2
1329+  D56C 2C          	INC	L
1330+  D56D 0C          	INC	C
1331+  D56E 10 EB       	DJNZ	WordRg1
1332+  D570 FD 71 01    WordRg2	LD	(IY+StringX),C
1333+  D573 79          	LD	A,C
1334+  D574 B7          	OR	A
1335+  D575 CA 7E D5    	JP	Z,THomeString
1336+  D578 FD 35 01    	DEC	(IY+StringX)
1337+  D57B C3 89 D4    	JP	TCursorRight
1338+  D57E             ;[]----------------------------------------------------------[]
1339+  D57E             THomeString
1340+  D57E FD 7E 01    	LD	A,(IY+StringX)
1341+  D581 B7          	OR	A
1342+  D582 C8          	RET	Z
1343+  D583 FD 46 02    	LD	B,(IY+CursAddX)
1344+  D586 97          	SUB	A
1345+  D587 FD 77 01    	LD	(IY+StringX),A
1346+  D58A FD 77 00    	LD	(IY+CursorX),A
1347+  D58D FD 77 02    	LD	(IY+CursAddX),A
1348+  D590 78          	LD	A,B
1349+  D591 FD BE 02    	CP	(IY+CursAddX)
1350+  D594 C4 0D CD    	CALL	NZ,RefrASCIIpage
1351+  D597 CD 87 C6    	CALL	ResCursor
1352+  D59A FD 5E 00    	LD	E,(IY+CursorX)
1353+  D59D FD 56 03    	LD	D,(IY+CursorY)
1354+  D5A0 CD 34 C6    	CALL	SetCursor
1355+  D5A3 CD 5F D1    	CALL	PrnASCIIinfo
1356+  D5A6 FD 7E 04    	LD	A,(IY+LenString)
1357+  D5A9 FD 96 01    	SUB	(IY+StringX)
1358+  D5AC C8          	RET	Z
1359+  D5AD 47          	LD	B,A
1360+  D5AE FD 6E 04    	LD	L,(IY+LenString)
1361+  D5B1 26 82       	LD	H,high LineBuffer
1362+  D5B3 16 00       	LD	D,#00
1363+  D5B5 3E 20       	LD	A,#20
1364+  D5B7 2B          HomeStr	DEC	HL
1365+  D5B8 BE          	CP	(HL)
1366+  D5B9 C0          	RET	NZ
1367+  D5BA 72          	LD	(HL),D
1368+  D5BB FD 35 04    	DEC	(IY+LenString)
1369+  D5BE 10 F7       	DJNZ	HomeStr
1370+  D5C0 C9          	RET 
1371+  D5C1             ;[]----------------------------------------------------------[]
1372+  D5C1             TEndString
1373+  D5C1 FD 7E 04    	LD	A,(IY+LenString)
1374+  D5C4 B7          	OR	A
1375+  D5C5 C8          	RET	Z
1376+  D5C6 47          	LD	B,A
1377+  D5C7 6F          	LD	L,A
1378+  D5C8 26 82       	LD	H,high LineBuffer
1379+  D5CA 16 00       	LD	D,#00
1380+  D5CC 3E 20       	LD	A,#20
1381+  D5CE 72          EndStr1	LD	(HL),D
1382+  D5CF 2B          	DEC	HL
1383+  D5D0 BE          	CP	(HL)
1384+  D5D1 20 02       	JR	NZ,EndStr2
1385+  D5D3 10 F9       	DJNZ	EndStr1
1386+  D5D5 FD 70 04    EndStr2	LD	(IY+LenString),B
1387+  D5D8 78          	LD	A,B
1388+  D5D9 FD BE 01    	CP	(IY+StringX)
1389+  D5DC C8          	RET	Z
1390+  D5DD B7          	OR	A
1391+  D5DE CA 7E D5    	JP	Z,THomeString
1392+  D5E1 3D          	DEC	A
1393+  D5E2 FD 77 01    	LD	(IY+StringX),A
1394+  D5E5 C3 89 D4    	JP	TCursorRight
1395+  D5E8             ;[]----------------------------------------------------------[]
1396+  D5E8             TCursorUp
1397+  D5E8 CD 0D D0    	CALL	PutString
1398+  D5EB 2A 9B C1    	LD	HL,(LineShift)
1399+  D5EE 7C          	LD	A,H
1400+  D5EF B5          	OR	L
1401+  D5F0 C8          	RET	Z
1402+  D5F1 FD 7E 03    	LD	A,(IY+CursorY)
1403+  D5F4 B7          	OR	A
1404+  D5F5 CA 35 D6    	JP	Z,TScrollUp
1405+  D5F8 CD 97 CE    	CALL	SearchUp
1406+  D5FB 22 9B C1    	LD	(LineShift),HL
1407+  D5FE FD 35 03    	DEC	(IY+CursorY)
1408+  D601 2A 97 C1    	LD	HL,(CurLine)
1409+  D604 2B          	DEC	HL
1410+  D605 22 97 C1    	LD	(CurLine),HL
1411+  D608 C3 B2 D6    	JP	CursorExit
1412+  D60B             TCursorDown
1413+  D60B CD 0D D0    	CALL	PutString
1414+  D60E 2A 9B C1    	LD	HL,(LineShift)
1415+  D611 ED 5B A1 C1 	LD	DE,(FileLenght)
1416+  D615 B7          	OR	A
1417+  D616 ED 52       	SBC	HL,DE
1418+  D618 C8          	RET	Z
1419+  D619 19          	ADD	HL,DE
1420+  D61A CD 18 CF    	CALL	SearchDown
1421+  D61D FD 7E 03    	LD	A,(IY+CursorY)
1422+  D620 FE 18       	CP	#18
1423+  D622 CA 70 D6    	JP	Z,TScrollDown
1424+  D625 22 9B C1    	LD	(LineShift),HL
1425+  D628 FD 34 03    	INC	(IY+CursorY)
1426+  D62B 2A 97 C1    	LD	HL,(CurLine)
1427+  D62E 23          	INC	HL
1428+  D62F 22 97 C1    	LD	(CurLine),HL
1429+  D632 C3 B2 D6    	JP	CursorExit
1430+  D635             TScrollUp
1431+  D635 CD 0D D0    	CALL	PutString
1432+  D638 2A 9D C1    	LD	HL,(PageShift)
1433+  D63B 7C          	LD	A,H
1434+  D63C B5          	OR	L
1435+  D63D CA E8 D5    	JP	Z,TCursorUp
1436+  D640 CD 97 CE    	CALL	SearchUp
1437+  D643 22 9D C1    	LD	(PageShift),HL
1438+  D646 22 9F C1    	LD	(TempShift),HL
1439+  D649 2A 9B C1    	LD	HL,(LineShift)
1440+  D64C CD 97 CE    	CALL	SearchUp
1441+  D64F 22 9B C1    	LD	(LineShift),HL
1442+  D652 2A 97 C1    	LD	HL,(CurLine)
1443+  D655 2B          	DEC	HL
1444+  D656 22 97 C1    	LD	(CurLine),HL
1445+  D659 CD 87 C6    	CALL	ResCursor
1446+  D65C CD D1 C7    	CALL	ScrollSCRdown
1447+  D65F 06 1C       	LD	B,#1C
1448+  D661 CD 41 CD    	CALL	PrnASCIIline
1449+  D664 FD 5E 00    	LD	E,(IY+CursorX)
1450+  D667 FD 56 03    	LD	D,(IY+CursorY)
1451+  D66A CD 34 C6    	CALL	SetCursor
1452+  D66D C3 B2 D6    	JP	CursorExit
1453+  D670             TScrollDown
1454+  D670 CD 0D D0    	CALL	PutString
1455+  D673 2A 9D C1    	LD	HL,(PageShift)
1456+  D676 06 19       	LD	B,#19
1457+  D678 C5          ScrlDn1	PUSH	BC
1458+  D679 CD 18 CF    	CALL	SearchDown
1459+  D67C C1          	POP	BC
1460+  D67D DA 0B D6    	JP	C,TCursorDown
1461+  D680 10 F6       	DJNZ	ScrlDn1
1462+  D682 22 9F C1    	LD	(TempShift),HL
1463+  D685 2A 9D C1    	LD	HL,(PageShift)
1464+  D688 CD 18 CF    	CALL	SearchDown
1465+  D68B 22 9D C1    	LD	(PageShift),HL
1466+  D68E 2A 9B C1    	LD	HL,(LineShift)
1467+  D691 CD 18 CF    	CALL	SearchDown
1468+  D694 22 9B C1    	LD	(LineShift),HL
1469+  D697 2A 97 C1    	LD	HL,(CurLine)
1470+  D69A 23          	INC	HL
1471+  D69B 22 97 C1    	LD	(CurLine),HL
1472+  D69E CD 87 C6    	CALL	ResCursor
1473+  D6A1 CD CC C7    	CALL	ScrollSCRup
1474+  D6A4 06 DC       	LD	B,#DC
1475+  D6A6 CD 41 CD    	CALL	PrnASCIIline
1476+  D6A9 FD 5E 00    	LD	E,(IY+CursorX)
1477+  D6AC FD 56 03    	LD	D,(IY+CursorY)
1478+  D6AF CD 34 C6    	CALL	SetCursor
1479+  D6B2             CursorExit
1480+  D6B2 CD 9D CF    	CALL	GetString
1481+  D6B5 21 00 82    	LD	HL,LineBuffer
1482+  D6B8 0E 00       	LD	C,#00
1483+  D6BA FD 7E 01    	LD	A,(IY+StringX)
1484+  D6BD B7          	OR	A
1485+  D6BE 28 11       	JR	Z,CursEx3
1486+  D6C0 47          	LD	B,A
1487+  D6C1 7E          CursEx1	LD	A,(HL)
1488+  D6C2 23          	INC	HL
1489+  D6C3 FE 09       	CP	#09
1490+  D6C5 20 07       	JR	NZ,CursEx2
1491+  D6C7 79          	LD	A,C
1492+  D6C8 E6 F8       	AND	#F8
1493+  D6CA C6 08       	ADD	A,#08
1494+  D6CC 4F          	LD	C,A
1495+  D6CD 0D          	DEC	C
1496+  D6CE 0C          CursEx2	INC	C
1497+  D6CF 10 F0       	DJNZ	CursEx1
1498+  D6D1 FD 46 02    CursEx3	LD	B,(IY+CursAddX)
1499+  D6D4 FD 36 02 00 	LD	(IY+CursAddX),#00
1500+  D6D8 79          CursEx4	LD	A,C
1501+  D6D9 FD 96 02    	SUB	(IY+CursAddX)
1502+  D6DC FE 4E       	CP	#4E
1503+  D6DE 38 0A       	JR	C,CursEx5
1504+  D6E0 FD 7E 02    	LD	A,(IY+CursAddX)
1505+  D6E3 C6 08       	ADD	A,Step
1506+  D6E5 FD 77 02    	LD	(IY+CursAddX),A
1507+  D6E8 18 EE       	JR	CursEx4
1508+  D6EA FD 77 00    CursEx5	LD	(IY+CursorX),A
1509+  D6ED 78          	LD	A,B
1510+  D6EE FD BE 02    	CP	(IY+CursAddX)
1511+  D6F1 C4 0D CD    	CALL	NZ,RefrASCIIpage
1512+  D6F4 CD 87 C6    	CALL	ResCursor
1513+  D6F7 FD 5E 00    	LD	E,(IY+CursorX)
1514+  D6FA FD 56 03    	LD	D,(IY+CursorY)
1515+  D6FD CD 34 C6    	CALL	SetCursor
1516+  D700 CD 5F D1    	CALL	PrnASCIIinfo
1517+  D703 C9          	RET 
1518+  D704             ;[]----------------------------------------------------------[]
1519+  D704             TPageUp
1520+  D704 CD 0D D0    	CALL	PutString
1521+  D707 2A 9D C1    	LD	HL,(PageShift)
1522+  D70A 7C          	LD	A,H
1523+  D70B B5          	OR	L
1524+  D70C CA BF D7    	JP	Z,TBegFile
1525+  D70F ED 5B 97 C1 	LD	DE,(CurLine)
1526+  D713 06 19       	LD	B,#19
1527+  D715 D5          PageUp1	PUSH	DE
1528+  D716 C5          	PUSH	BC
1529+  D717 CD 97 CE    	CALL	SearchUp
1530+  D71A C1          	POP	BC
1531+  D71B D1          	POP	DE
1532+  D71C 38 03       	JR	C,$+5
1533+  D71E 1B          	DEC	DE
1534+  D71F 10 F4       	DJNZ	PageUp1
1535+  D721 22 9D C1    	LD	(PageShift),HL
1536+  D724 ED 53 97 C1 	LD	(CurLine),DE
1537+  D728 18 2B       	JR	PageExit
1538+  D72A             TPageDown
1539+  D72A CD 0D D0    	CALL	PutString
1540+  D72D 2A 9D C1    	LD	HL,(PageShift)
1541+  D730 ED 5B 97 C1 	LD	DE,(CurLine)
1542+  D734 06 19       	LD	B,#19
1543+  D736 D5          PageDn1	PUSH	DE
1544+  D737 C5          	PUSH	BC
1545+  D738 CD 18 CF    	CALL	SearchDown
1546+  D73B C1          	POP	BC
1547+  D73C D1          	POP	DE
1548+  D73D DA DA D7    	JP	C,TEndFile
1549+  D740 13          	INC	DE
1550+  D741 10 F3       	DJNZ	PageDn1
1551+  D743 ED 4B A1 C1 	LD	BC,(FileLenght)
1552+  D747 B7          	OR	A
1553+  D748 ED 42       	SBC	HL,BC
1554+  D74A CA DA D7    	JP	Z,TEndFile
1555+  D74D 09          	ADD	HL,BC
1556+  D74E 22 9D C1    	LD	(PageShift),HL
1557+  D751 ED 53 97 C1 	LD	(CurLine),DE
1558+  D755             PageExit
1559+  D755 FD 7E 03    	LD	A,(IY+CursorY)
1560+  D758 B7          	OR	A
1561+  D759 28 25       	JR	Z,PageEx3
1562+  D75B 47          	LD	B,A
1563+  D75C E5          PageEx1	PUSH	HL
1564+  D75D C5          	PUSH	BC
1565+  D75E CD 18 CF    	CALL	SearchDown
1566+  D761 C1          	POP	BC
1567+  D762 D1          	POP	DE
1568+  D763 38 05       	JR	C,PageEx2
1569+  D765 5D          	LD	E,L
1570+  D766 54          	LD	D,H
1571+  D767 10 F3       	DJNZ	PageEx1
1572+  D769 05          	DEC	B
1573+  D76A 04          PageEx2	INC	B
1574+  D76B FD 7E 03    	LD	A,(IY+CursorY)
1575+  D76E 90          	SUB	B
1576+  D76F FD 77 03    	LD	(IY+CursorY),A
1577+  D772 2A 97 C1    	LD	HL,(CurLine)
1578+  D775 7D          	LD	A,L
1579+  D776 90          	SUB	B
1580+  D777 6F          	LD	L,A
1581+  D778 7C          	LD	A,H
1582+  D779 DE 00       	SBC	A,#00
1583+  D77B 67          	LD	H,A
1584+  D77C 22 97 C1    	LD	(CurLine),HL
1585+  D77F EB          	EX	DE,HL
1586+  D780 22 9B C1    PageEx3	LD	(LineShift),HL
1587+  D783             NewPage
1588+  D783 CD 9D CF    	CALL	GetString
1589+  D786 21 00 82    	LD	HL,LineBuffer
1590+  D789 0E 00       	LD	C,#00
1591+  D78B FD 7E 01    	LD	A,(IY+StringX)
1592+  D78E B7          	OR	A
1593+  D78F 28 11       	JR	Z,PagePr3
1594+  D791 47          	LD	B,A
1595+  D792 7E          PagePr1	LD	A,(HL)
1596+  D793 23          	INC	HL
1597+  D794 FE 09       	CP	#09
1598+  D796 20 07       	JR	NZ,PagePr2
1599+  D798 79          	LD	A,C
1600+  D799 E6 F8       	AND	#F8
1601+  D79B C6 08       	ADD	A,#08
1602+  D79D 4F          	LD	C,A
1603+  D79E 0D          	DEC	C
1604+  D79F 0C          PagePr2	INC	C
1605+  D7A0 10 F0       	DJNZ	PagePr1
1606+  D7A2 FD 36 02 00 PagePr3	LD	(IY+CursAddX),#00
1607+  D7A6 79          PagePr4	LD	A,C
1608+  D7A7 FD 96 02    	SUB	(IY+CursAddX)
1609+  D7AA FE 4E       	CP	#4E
1610+  D7AC 38 0A       	JR	C,PagePr5
1611+  D7AE FD 7E 02    	LD	A,(IY+CursAddX)
1612+  D7B1 C6 08       	ADD	A,Step
1613+  D7B3 FD 77 02    	LD	(IY+CursAddX),A
1614+  D7B6 18 EE       	JR	PagePr4
1615+  D7B8 FD 77 00    PagePr5	LD	(IY+CursorX),A
1616+  D7BB CD AD CC    	CALL	PrnASCIIpage
1617+  D7BE C9          	RET 
1618+  D7BF             ;[]----------------------------------------------------------[]
1619+  D7BF             TBegFile
1620+  D7BF CD 0D D0    	CALL	PutString
1621+  D7C2 2A 9B C1    	LD	HL,(LineShift)
1622+  D7C5 7C          	LD	A,H
1623+  D7C6 B5          	OR	L
1624+  D7C7 C8          	RET	Z
1625+  D7C8 21 00 00    	LD	HL,#0000
1626+  D7CB 22 9D C1    	LD	(PageShift),HL
1627+  D7CE 22 9B C1    	LD	(LineShift),HL
1628+  D7D1 22 97 C1    	LD	(CurLine),HL
1629+  D7D4 FD 75 03    	LD	(IY+CursorY),L
1630+  D7D7 C3 83 D7    	JP	NewPage
1631+  D7DA             TEndFile
1632+  D7DA CD 0D D0    	CALL	PutString
1633+  D7DD 2A 9D C1    	LD	HL,(PageShift)
1634+  D7E0 06 19       	LD	B,#19
1635+  D7E2 C5          EndFl1	PUSH	BC
1636+  D7E3 CD 18 CF    	CALL	SearchDown
1637+  D7E6 C1          	POP	BC
1638+  D7E7 38 28       	JR	C,EndFile1
1639+  D7E9 10 F7       	DJNZ	EndFl1
1640+  D7EB 2A A1 C1    	LD	HL,(FileLenght)
1641+  D7EE 06 19       	LD	B,#19
1642+  D7F0 C5          EndFl2	PUSH	BC
1643+  D7F1 CD 97 CE    	CALL	SearchUp
1644+  D7F4 C1          	POP	BC
1645+  D7F5 10 F9       	DJNZ	EndFl2
1646+  D7F7 22 9D C1    	LD	(PageShift),HL
1647+  D7FA FD 36 03 18 	LD	(IY+CursorY),#18
1648+  D7FE 2A A1 C1    EndFlEx	LD	HL,(FileLenght)
1649+  D801 CD 97 CE    	CALL	SearchUp
1650+  D804 22 9B C1    	LD	(LineShift),HL
1651+  D807 2A 99 C1    	LD	HL,(EquipLines)
1652+  D80A 2B          	DEC	HL
1653+  D80B 22 97 C1    	LD	(CurLine),HL
1654+  D80E C3 83 D7    	JP	NewPage
1655+  D811             EndFile1
1656+  D811 3E 18       	LD	A,#18
1657+  D813 90          	SUB	B
1658+  D814 FD BE 03    	CP	(IY+CursorY)
1659+  D817 C8          	RET	Z
1660+  D818 FD 77 03    	LD	(IY+CursorY),A
1661+  D81B 2A A1 C1    	LD	HL,(FileLenght)
1662+  D81E CD 97 CE    	CALL	SearchUp
1663+  D821 22 9B C1    	LD	(LineShift),HL
1664+  D824 2A 99 C1    	LD	HL,(EquipLines)
1665+  D827 2B          	DEC	HL
1666+  D828 22 97 C1    	LD	(CurLine),HL
1667+  D82B C3 83 D7    	JP	NewPage
1668+  D82E             ;[]----------------------------------------------------------[]
1669+  D82E             TNewCrPos
1670+  D82E E5          	PUSH	HL
1671+  D82F D5          	PUSH	DE
1672+  D830 CD 0D D0    	CALL	PutString
1673+  D833 D1          	POP	DE
1674+  D834 E1          	POP	HL
1675+  D835 CB 3C       	SRL	H
1676+  D837 CB 1D       	RR	L
1677+  D839 CB 3C       	SRL	H
1678+  D83B CB 1D       	RR	L
1679+  D83D CB 3C       	SRL	H
1680+  D83F CB 1D       	RR	L
1681+  D841 7B          	LD	A,E
1682+  D842 D6 1C       	SUB	#1C
1683+  D844 CB 3F       	SRL	A
1684+  D846 CB 3F       	SRL	A
1685+  D848 CB 3F       	SRL	A
1686+  D84A 57          	LD	D,A
1687+  D84B 5D          	LD	E,L
1688+  D84C 2A 9D C1    	LD	HL,(PageShift)
1689+  D84F B7          	OR	A
1690+  D850 28 0D       	JR	Z,NewPos2
1691+  D852 47          	LD	B,A
1692+  D853 D5          NewPos1	PUSH	DE
1693+  D854 C5          	PUSH	BC
1694+  D855 CD 18 CF    	CALL	SearchDown
1695+  D858 C1          	POP	BC
1696+  D859 D1          	POP	DE
1697+  D85A DA DA D7    	JP	C,TEndFile
1698+  D85D 10 F4       	DJNZ	NewPos1
1699+  D85F 22 9B C1    NewPos2	LD	(LineShift),HL
1700+  D862 2A 97 C1    	LD	HL,(CurLine)
1701+  D865 7A          	LD	A,D
1702+  D866 FD 96 03    	SUB	(IY+CursorY)
1703+  D869 FD 72 03    	LD	(IY+CursorY),D
1704+  D86C 4F          	LD	C,A
1705+  D86D 06 00       	LD	B,#00
1706+  D86F 30 01       	JR	NC,$+3
1707+  D871 05          	DEC	B
1708+  D872 09          	ADD	HL,BC
1709+  D873 22 97 C1    	LD	(CurLine),HL
1710+  D876 97          	SUB	A
1711+  D877 FD 77 01    	LD	(IY+StringX),A
1712+  D87A D5          	PUSH	DE
1713+  D87B CD 9D CF    	CALL	GetString
1714+  D87E D1          	POP	DE
1715+  D87F 0E 00       	LD	C,#00
1716+  D881 7B          	LD	A,E
1717+  D882 FD 86 02    	ADD	A,(IY+CursAddX)
1718+  D885 28 34       	JR	Z,NewPos6
1719+  D887 5F          	LD	E,A
1720+  D888 FD 7E 04    	LD	A,(IY+LenString)
1721+  D88B B7          	OR	A
1722+  D88C 28 2D       	JR	Z,NewPos6
1723+  D88E 47          	LD	B,A
1724+  D88F 21 00 82    	LD	HL,LineBuffer
1725+  D892 7E          NewPos3	LD	A,(HL)
1726+  D893 2C          	INC	L
1727+  D894 FE 09       	CP	#09
1728+  D896 20 07       	JR	NZ,NewPos4
1729+  D898 79          	LD	A,C
1730+  D899 E6 F8       	AND	#F8
1731+  D89B C6 08       	ADD	A,#08
1732+  D89D 4F          	LD	C,A
1733+  D89E 0D          	DEC	C
1734+  D89F 0C          NewPos4	INC	C
1735+  D8A0 79          	LD	A,C
1736+  D8A1 BB          	CP	E
1737+  D8A2 30 02       	JR	NC,NewPos5
1738+  D8A4 10 EC       	DJNZ	NewPos3
1739+  D8A6 FD 75 01    NewPos5	LD	(IY+StringX),L
1740+  D8A9 FD 7E 04    	LD	A,(IY+LenString)
1741+  D8AC 95          	SUB	L
1742+  D8AD 30 0C       	JR	NC,NewPos6
1743+  D8AF ED 44       	NEG 
1744+  D8B1 47          	LD	B,A
1745+  D8B2 3E 20       	LD	A,#20
1746+  D8B4 77          	LD	(HL),A
1747+  D8B5 2C          	INC	L
1748+  D8B6 10 FC       	DJNZ	$-2
1749+  D8B8 FD 75 04    	LD	(IY+LenString),L
1750+  D8BB 79          NewPos6	LD	A,C
1751+  D8BC FD 96 02    	SUB	(IY+CursAddX)
1752+  D8BF FD 77 00    	LD	(IY+CursorX),A
1753+  D8C2 CD 87 C6    	CALL	ResCursor
1754+  D8C5 FD 5E 00    	LD	E,(IY+CursorX)
1755+  D8C8 FD 56 03    	LD	D,(IY+CursorY)
1756+  D8CB CD 34 C6    	CALL	SetCursor
1757+  D8CE CD 5F D1    	CALL	PrnASCIIinfo
1758+  D8D1 CD 48 86    	CALL	ResFire
1759+  D8D4 C9          	RET 
1760+  D8D5             
1761+  D8D5             
1762+  D8D5             
0941   D8D5             ;	INCLUDE	"FETEXT.1",#0E
0942   D8D5             	INCLUDE	"FEHEX.z80";,#0F
0001+  D8D5             
0002+  D8D5             ;[]==========================================================[]
0003+  D8D5             ;Процедура печати страницы дампа с тек.смещ. от	начала файла
0004+  D8D5             ;На вход:
0005+  D8D5             ;	   None
0006+  D8D5             ;На выход:
0007+  D8D5             ;	   None
0008+  D8D5             PrnHEXpage
0009+  D8D5 21 43 DA    	LD	HL,PrnHEXinfo
0010+  D8D8 E5          	PUSH	HL
0011+  D8D9 2A 9D C1    	LD	HL,(PageShift)
0012+  D8DC 22 9F C1    	LD	(TempShift),HL	;Запоминаем тек.смещение
0013+  D8DF 21 00 82    	LD	HL,LineBuffer
0014+  D8E2 01 20 4E    	LD	BC,#4E20
0015+  D8E5 71          	LD	(HL),C
0016+  D8E6 2C          	INC	L
0017+  D8E7 10 FC       	DJNZ	$-2
0018+  D8E9 06 1C       	LD	B,#1C		;Изнач.позиция печати
0019+  D8EB C5          PrnHEXl	PUSH	BC
0020+  D8EC CD 40 D9    	CALL	PutHLine ;Выводим строку в буфер и на экран
0021+  D8EF C1          	POP	BC
0022+  D8F0 38 2F       	JR	C,FillDwnHex	;CY-Закончились	байты для печати
0023+  D8F2 2A 9F C1    	LD	HL,(TempShift)
0024+  D8F5 11 10 00    	LD	DE,#0010	;Адрес дампа+16
0025+  D8F8 19          	ADD	HL,DE
0026+  D8F9 22 9F C1    	LD	(TempShift),HL
0027+  D8FC 78          	LD	A,B
0028+  D8FD C6 08       	ADD	A,#08
0029+  D8FF 47          	LD	B,A
0030+  D900 FE E4       	CP	#E4
0031+  D902 20 E7       	JR	NZ,PrnHEXl
0032+  D904 21 03 DA    PrHEXCr	LD	HL,CursorTab1
0033+  D907 3A 8E C1    	LD	A,(HEXmode)
0034+  D90A B7          	OR	A
0035+  D90B 28 03       	JR	Z,$+5
0036+  D90D 21 23 DA    	LD	HL,CursorTab2
0037+  D910 FD 7E 00    	LD	A,(IY+CursorX)
0038+  D913 85          	ADD	A,L
0039+  D914 6F          	LD	L,A
0040+  D915 7C          	LD	A,H
0041+  D916 CE 00       	ADC	A,#00
0042+  D918 67          	LD	H,A
0043+  D919 5E          	LD	E,(HL)
0044+  D91A FD 56 03    	LD	D,(IY+CursorY)
0045+  D91D CD 34 C6    	CALL	SetCursor
0046+  D920 C9          	RET 
0047+  D921             ;Процедура отчистки нижней области экрана
0048+  D921             FillDwnHex
0049+  D921 78          	LD	A,B
0050+  D922 FE E4       	CP	#E4
0051+  D924 28 DE       	JR	Z,PrHEXCr	;Z-нет отчистки
0052+  D926 32 36 D9    	LD	(FPosHex),A
0053+  D929 3E E4       	LD	A,#E4
0054+  D92B 90          	SUB	B
0055+  D92C 32 3A D9    	LD	(FLenHex),A
0056+  D92F CD 06 86    	CALL	MakeWindow
0057+  D932 80          	DEFB	#80
0058+  D933 02          	DEFB	#02	;Head Place
0059+  D934 00 00       	DEFW	#0000
0060+  D936 00 00       FPosHex	DEFW	#0000
0061+  D938 70 02       	DEFW	#0270
0062+  D93A 00 00       FLenHex	DEFW	#0000
0063+  D93C 09          	DEFB	PanelCol
0064+  D93D 00          	DEFB	#00
0065+  D93E 18 C4       	JR	PrHEXCr
0066+  D940             ;Процедура печати тек.строки в буфер и на экран
0067+  D940             PutHLine
0068+  D940 DD 2E 00    	LD	LX,#00
0069+  D943 DD 60       	LD	HX,B
0070+  D945 2A A1 C1    	LD	HL,(FileLenght)
0071+  D948 ED 4B 9F C1 	LD	BC,(TempShift)
0072+  D94C B7          	OR	A
0073+  D94D ED 42       	SBC	HL,BC
0074+  D94F D8          	RET	C
0075+  D950 06 10       	LD	B,#10
0076+  D952 7C          	LD	A,H
0077+  D953 B7          	OR	A
0078+  D954 20 05       	JR	NZ,PutHLn
0079+  D956 7D          	LD	A,L
0080+  D957 B8          	CP	B
0081+  D958 30 01       	JR	NC,PutHLn
0082+  D95A 45          	LD	B,L
0083+  D95B             
0084+  D95B DB A2       PutHLn	IN	A,(PAGE1)
0085+  D95D F5          	PUSH	AF
0086+  D95E ED 5B 9F C1 	LD	DE,(TempShift)
0087+  D962 7A          	LD	A,D		;Выделяем номер	страницы
0088+  D963 E6 C0       	AND	#C0
0089+  D965 07          	RLCA 
0090+  D966 07          	RLCA 
0091+  D967 D9          	EXX 
0092+  D968 5F          	LD	E,A		;DE - Адрес страницы в списке
0093+  D969 16 84       	LD	D,high PagesList
0094+  D96B 1A          	LD	A,(DE)		;Тек.страница
0095+  D96C D3 A2       	OUT	(PAGE1),A
0096+  D96E D9          	EXX 
0097+  D96F CB BA       	RES	7,D		;Вкл.с #4000
0098+  D971 CB F2       	SET	6,D
0099+  D973 21 01 82    	LD	HL,LineBuffer+1	;буфер строки
0100+  D976 D9          	EXX 
0101+  D977 21 3D 82    	LD	HL,LineBuffer+#3D ;место для ASCII кодов
0102+  D97A D9          	EXX 
0103+  D97B 36 30       	LD	(HL),"0"
0104+  D97D 2C          	INC	L
0105+  D97E 3A A0 C1    	LD	A,(TempShift+1)
0106+  D981 CD E8 D9    	CALL	PutHexNumb
0107+  D984 3A 9F C1    	LD	A,(TempShift)
0108+  D987 CD E8 D9    	CALL	PutHexNumb
0109+  D98A 36 3A       	LD	(HL),":"
0110+  D98C 2C          	INC	L
0111+  D98D 2C          	INC	L
0112+  D98E 2C          	INC	L
0113+  D98F 78          	LD	A,B
0114+  D990 B7          	OR	A
0115+  D991 28 23       	JR	Z,PutHLp2
0116+  D993             PutHLoop
0117+  D993 CB 7A       	BIT	7,D
0118+  D995 28 0A       	JR	Z,PutHLp1
0119+  D997 CB BA       	RES	7,D
0120+  D999 CB F2       	SET	6,D
0121+  D99B D9          	EXX 
0122+  D99C 1C          	INC	E		;DE - Адрес страницы в списке
0123+  D99D 1A          	LD	A,(DE)		;Тек.страница
0124+  D99E D3 A2       	OUT	(PAGE1),A
0125+  D9A0 D9          	EXX 
0126+  D9A1 1A          PutHLp1	LD	A,(DE)
0127+  D9A2 13          	INC	DE
0128+  D9A3 D9          	EXX 
0129+  D9A4 77          	LD	(HL),A
0130+  D9A5 2C          	INC	L
0131+  D9A6 D9          	EXX 
0132+  D9A7 CD E8 D9    	CALL	PutHexNumb	;Процедура конверта
0133+  D9AA 2C          	INC	L
0134+  D9AB DD 2C       	INC	LX		;Увелич.кол-во введенных байтов
0135+  D9AD DD 7D       	LD	A,LX
0136+  D9AF E6 03       	AND	#03
0137+  D9B1 20 01       	JR	NZ,$+3
0138+  D9B3 2C          	INC	L
0139+  D9B4 10 DD       	DJNZ	PutHLoop
0140+  D9B6 F1          PutHLp2	POP	AF
0141+  D9B7 D3 A2       	OUT	(PAGE1),A
0142+  D9B9             ;Процедура отчистки закончившихся байтов
0143+  D9B9 3E 10       FillHex	LD	A,#10		;Макс.байтов
0144+  D9BB DD 95       	SUB	LX		;Тек.кол-во байтов
0145+  D9BD 28 18       	JR	Z,FillE2
0146+  D9BF 47          	LD	B,A
0147+  D9C0 0E 20       	LD	C,#20
0148+  D9C2 71          FillE1	LD	(HL),C
0149+  D9C3 2C          	INC	L
0150+  D9C4 71          	LD	(HL),C
0151+  D9C5 2C          	INC	L
0152+  D9C6 2C          	INC	L
0153+  D9C7 D9          	EXX 
0154+  D9C8 36 20       	LD	(HL),#20
0155+  D9CA 2C          	INC	L
0156+  D9CB D9          	EXX 
0157+  D9CC DD 2C       	INC	LX
0158+  D9CE DD 7D       	LD	A,LX		;В центре 2 пробела
0159+  D9D0 E6 03       	AND	#03
0160+  D9D2 20 01       	JR	NZ,$+3
0161+  D9D4 2C          	INC	L
0162+  D9D5 10 EB       	DJNZ	FillE1
0163+  D9D7 21 00 82    FillE2	LD	HL,LineBuffer
0164+  D9DA 11 00 00    	LD	DE,#0000
0165+  D9DD 06 4E       	LD	B,#4E
0166+  D9DF DD 4C       	LD	C,HX
0167+  D9E1 3E 9A       	LD	A,PanelCol*#10+FileCol
0168+  D9E3 CD 12 86    	CALL	PrnTxtLnNormC
0169+  D9E6 B7          	OR	A
0170+  D9E7 C9          	RET		;CY-была последняя строка
0171+  D9E8             ;Процедура преобразования 8битовых чисел в шестнадц. текст
0172+  D9E8             ;На вход:
0173+  D9E8             ;	 HL - адрес буфера
0174+  D9E8             ;	  А - байт
0175+  D9E8             ;На выход:
0176+  D9E8             ;	  буфер	с текст.числом
0177+  D9E8             PutHexNumb
0178+  D9E8 F5          	PUSH	AF
0179+  D9E9 0F          	RRCA 
0180+  D9EA 0F          	RRCA 
0181+  D9EB 0F          	RRCA 
0182+  D9EC 0F          	RRCA 
0183+  D9ED E6 0F       	AND	#0F
0184+  D9EF C6 90       	ADD	A,#90
0185+  D9F1 27          	DAA 
0186+  D9F2 CE 40       	ADC	A,#40
0187+  D9F4 27          	DAA 
0188+  D9F5 77          	LD	(HL),A
0189+  D9F6 2C          	INC	L
0190+  D9F7 F1          	POP	AF
0191+  D9F8 E6 0F       	AND	#0F
0192+  D9FA C6 90       	ADD	A,#90
0193+  D9FC 27          	DAA 
0194+  D9FD CE 40       	ADC	A,#40
0195+  D9FF 27          	DAA 
0196+  DA00 77          	LD	(HL),A
0197+  DA01 2C          	INC	L
0198+  DA02 C9          	RET 
0199+  DA03             CursorTab1
0200+  DA03             	DEFB	09,10,12,13,15,16,18,19
0200+  DA03 090A0C0D0F101213
0201+  DA0B             	DEFB	22,23,25,26,28,29,31,32
0201+  DA0B 1617191A1C1D1F20
0202+  DA13             	DEFB	35,36,38,39,41,42,44,45
0202+  DA13 23242627292A2C2D
0203+  DA1B             	DEFB	48,49,51,52,54,55,57,58
0203+  DA1B 303133343637393A
0204+  DA23             CursorTab2
0205+  DA23             	DEFB	61,61,62,62,63,63,64,64
0205+  DA23 3D3D3E3E3F3F4040
0206+  DA2B             	DEFB	65,65,66,66,67,67,68,68
0206+  DA2B 4141424243434444
0207+  DA33             	DEFB	69,69,70,70,71,71,72,72
0207+  DA33 4545464647474848
0208+  DA3B             	DEFB	73,73,74,74,75,75,76,76
0208+  DA3B 49494A4A4B4B4C4C
0209+  DA43             ;[]==========================================================[]
0210+  DA43             PrnHEXinfo
0211+  DA43 21 04 DB    	LD	HL,LineH
0212+  DA46 11 0A DB    	LD	DE,ColH
0213+  DA49 01 10 DB    	LD	BC,FreeH
0214+  DA4C 3E 01       	LD	A,#01
0215+  DA4E                    DUP     #04
0216+  DA4E 77          >	LD	(HL),A
0217+  DA4F 23          >	INC	HL
0218+  DA50 12          >	LD	(DE),A
0219+  DA51 13          >	INC	DE
0220+  DA52 02          >	LD	(BC),A
0221+  DA53 03          >	INC	BC
0216+  DA54 77          >	LD	(HL),A
0217+  DA55 23          >	INC	HL
0218+  DA56 12          >	LD	(DE),A
0219+  DA57 13          >	INC	DE
0220+  DA58 02          >	LD	(BC),A
0221+  DA59 03          >	INC	BC
0216+  DA5A 77          >	LD	(HL),A
0217+  DA5B 23          >	INC	HL
0218+  DA5C 12          >	LD	(DE),A
0219+  DA5D 13          >	INC	DE
0220+  DA5E 02          >	LD	(BC),A
0221+  DA5F 03          >	INC	BC
0216+  DA60 77          >	LD	(HL),A
0217+  DA61 23          >	INC	HL
0218+  DA62 12          >	LD	(DE),A
0219+  DA63 13          >	INC	DE
0220+  DA64 02          >	LD	(BC),A
0221+  DA65 03          >	INC	BC
0223+  DA66 77          	LD	(HL),A
0224+  DA67 12          	LD	(DE),A
0225+  DA68 02          	LD	(BC),A
0226+  DA69 2A 97 C1    	LD	HL,(CurLine)
0227+  DA6C 11 04 DB    	LD	DE,LineH
0228+  DA6F 23          	INC	HL
0229+  DA70 CD 8D 86    	CALL	ConvNumTxt16
0230+  DA73 11 0A DB    	LD	DE,ColH
0231+  DA76 FD 7E 00    	LD	A,(IY+CursorX)
0232+  DA79 CB 3F       	SRL	A
0233+  DA7B 3C          	INC	A
0234+  DA7C CD 90 86    	CALL	ConvNumTxt8
0235+  DA7F 21 00 C0    	LD	HL,#C000
0236+  DA82 11 10 DB    	LD	DE,FreeH
0237+  DA85 ED 4B A1 C1 	LD	BC,(FileLenght)
0238+  DA89 B7          	OR	A
0239+  DA8A ED 42       	SBC	HL,BC
0240+  DA8C CD 8D 86    	CALL	ConvNumTxt16
0241+  DA8F 21 3D D2    	LD	HL,ReadyNo
0242+  DA92 FD 7E 07    	LD	A,(IY+ReadyFile)
0243+  DA95 B7          	OR	A
0244+  DA96 28 03       	JR	Z,$+5
0245+  DA98 21 3F D2    	LD	HL,ReadyYes
0246+  DA9B 11 7E 01    	LD	DE,#017E
0247+  DA9E 01 11 00    	LD	BC,#0011
0248+  DAA1 3E 80       	LD	A,#80
0249+  DAA3 CD 0C 86    	CALL	PrnTxtLnIFF
0250+  DAA6 21 04 DB    	LD	HL,LineH
0251+  DAA9 11 AE 01    	LD	DE,#01AE
0252+  DAAC 01 11 00    	LD	BC,#0011
0253+  DAAF 3E 80       	LD	A,#80
0254+  DAB1 CD 0C 86    	CALL	PrnTxtLnIFF
0255+  DAB4 21 0A DB    	LD	HL,ColH
0256+  DAB7 11 F8 01    	LD	DE,#01F8
0257+  DABA 01 11 00    	LD	BC,#0011
0258+  DABD 3E 80       	LD	A,#80
0259+  DABF CD 0C 86    	CALL	PrnTxtLnIFF
0260+  DAC2 21 10 DB    	LD	HL,FreeH
0261+  DAC5 11 48 02    	LD	DE,#0248
0262+  DAC8 01 11 00    	LD	BC,#0011
0263+  DACB 3E 80       	LD	A,#80
0264+  DACD CD 0C 86    	CALL	PrnTxtLnIFF
0265+  DAD0 DD 21 E8 C5 	LD	IX,EditVBar
0266+  DAD4 2A F6 C5    	LD	HL,(ELines)
0267+  DAD7 ED 5B 99 C1 	LD	DE,(EquipLines)
0268+  DADB B7          	OR	A
0269+  DADC ED 52       	SBC	HL,DE
0270+  DADE 28 11       	JR	Z,TstLinH
0271+  DAE0 ED 53 F6 C5 	LD	(ELines),DE
0272+  DAE4 CD 2A 86    	CALL	InitScrBar
0273+  DAE7 2A 97 C1    	LD	HL,(CurLine)
0274+  DAEA 22 F8 C5    	LD	(CLine),HL
0275+  DAED CD 30 86    	CALL	PrnVScrBar
0276+  DAF0 C9          	RET 
0277+  DAF1 2A F8 C5    TstLinH	LD	HL,(CLine)
0278+  DAF4 ED 5B 97 C1 	LD	DE,(CurLine)
0279+  DAF8 B7          	OR	A
0280+  DAF9 ED 52       	SBC	HL,DE
0281+  DAFB C8          	RET	Z
0282+  DAFC ED 53 F8 C5 	LD	(CLine),DE
0283+  DB00 CD 30 86    	CALL	PrnVScrBar
0284+  DB03 C9          	RET 
0285+  DB04             LineH
0286+  DB04 00          	DEFS	6,0
0287+  DB0A             ColH
0288+  DB0A 00          	DEFS	6,0
0289+  DB10             FreeH
0290+  DB10 00          	DEFS	6,0
0291+  DB16             ;[]==========================================================[]
0292+  DB16             HPutSymbol
0293+  DB16 FE 08       	CP	#08
0294+  DB18 CA FC DB    	JP	Z,HDeleteByte
0295+  DB1B FE 09       	CP	#09
0296+  DB1D CA 61 DC    	JP	Z,ChHEXmode
0297+  DB20 4F          	LD	C,A
0298+  DB21 2A 9B C1    	LD	HL,(LineShift)
0299+  DB24 FD 5E 00    	LD	E,(IY+CursorX)
0300+  DB27 CB 3B       	SRL	E
0301+  DB29 16 00       	LD	D,#00
0302+  DB2B 19          	ADD	HL,DE
0303+  DB2C 7C          	LD	A,H
0304+  DB2D FE C0       	CP	#C0
0305+  DB2F D0          	RET	NC
0306+  DB30 3A 8E C1    	LD	A,(HEXmode)
0307+  DB33 B7          	OR	A
0308+  DB34 20 5B       	JR	NZ,HPutSymbA
0309+  DB36 79          	LD	A,C
0310+  DB37 FE 61       	CP	"a"
0311+  DB39 38 02       	JR	C,$+4
0312+  DB3B CB AF       	RES	5,A
0313+  DB3D FE 30       	CP	"0"
0314+  DB3F D8          	RET	C
0315+  DB40 FE 47       	CP	"F"+1
0316+  DB42 D0          	RET	NC
0317+  DB43 D6 30       	SUB	"0"
0318+  DB45 FE 0A       	CP	#0A
0319+  DB47 38 05       	JR	C,HPutSH1
0320+  DB49 D6 07       	SUB	#07
0321+  DB4B FE 0A       	CP	#0A
0322+  DB4D D8          	RET	C
0323+  DB4E 4F          HPutSH1	LD	C,A
0324+  DB4F FD CB 00 46 	BIT	0,(IY+CursorX)
0325+  DB53 06 F0       	LD	B,#F0
0326+  DB55 20 0A       	JR	NZ,HPutSH2
0327+  DB57 06 0F       	LD	B,#0F
0328+  DB59 CB 01       	RLC	C
0329+  DB5B CB 01       	RLC	C
0330+  DB5D CB 01       	RLC	C
0331+  DB5F CB 01       	RLC	C
0332+  DB61 EB          HPutSH2	EX	DE,HL
0333+  DB62 2A A1 C1    	LD	HL,(FileLenght)
0334+  DB65 B7          	OR	A
0335+  DB66 ED 52       	SBC	HL,DE
0336+  DB68 EB          	EX	DE,HL
0337+  DB69 3E 00       	LD	A,#00
0338+  DB6B 28 02       	JR	Z,$+4
0339+  DB6D 3E 01       	LD	A,#01
0340+  DB6F 08          	EX	AF,AF'
0341+  DB70 DB A2       	IN	A,(PAGE1)
0342+  DB72 F5          	PUSH	AF
0343+  DB73 7C          	LD	A,H		;Выделяем номер	страницы
0344+  DB74 E6 C0       	AND	#C0
0345+  DB76 07          	RLCA 
0346+  DB77 07          	RLCA 
0347+  DB78 5F          	LD	E,A		;DE - Адрес страницы в списке
0348+  DB79 16 84       	LD	D,high PagesList
0349+  DB7B 1A          	LD	A,(DE)		;Тек.страница
0350+  DB7C D3 A2       	OUT	(PAGE1),A
0351+  DB7E CB BC       	RES	7,H		;Вкл.с #4000
0352+  DB80 CB F4       	SET	6,H
0353+  DB82 08          	EX	AF,AF'
0354+  DB83 B7          	OR	A
0355+  DB84 20 01       	JR	NZ,$+3
0356+  DB86 77          	LD	(HL),A
0357+  DB87 08          	EX	AF,AF'
0358+  DB88 7E          	LD	A,(HL)
0359+  DB89 A0          	AND	B
0360+  DB8A B1          	OR	C
0361+  DB8B 77          	LD	(HL),A
0362+  DB8C F1          	POP	AF
0363+  DB8D D3 A2       	OUT	(PAGE1),A
0364+  DB8F 18 25       	JR	HPrnSymbol
0365+  DB91             HPutSymbA
0366+  DB91 EB          	EX	DE,HL
0367+  DB92 2A A1 C1    	LD	HL,(FileLenght)
0368+  DB95 B7          	OR	A
0369+  DB96 ED 52       	SBC	HL,DE
0370+  DB98 EB          	EX	DE,HL
0371+  DB99 3E 00       	LD	A,#00
0372+  DB9B 28 02       	JR	Z,$+4
0373+  DB9D 3E 01       	LD	A,#01
0374+  DB9F 08          	EX	AF,AF'
0375+  DBA0 DB A2       	IN	A,(PAGE1)
0376+  DBA2 F5          	PUSH	AF
0377+  DBA3 7C          	LD	A,H		;Выделяем номер	страницы
0378+  DBA4 E6 C0       	AND	#C0
0379+  DBA6 07          	RLCA 
0380+  DBA7 07          	RLCA 
0381+  DBA8 5F          	LD	E,A		;DE - Адрес страницы в списке
0382+  DBA9 16 84       	LD	D,high PagesList
0383+  DBAB 1A          	LD	A,(DE)		;Тек.страница
0384+  DBAC D3 A2       	OUT	(PAGE1),A
0385+  DBAE CB BC       	RES	7,H		;Вкл.с #4000
0386+  DBB0 CB F4       	SET	6,H
0387+  DBB2 71          	LD	(HL),C
0388+  DBB3 F1          	POP	AF
0389+  DBB4 D3 A2       	OUT	(PAGE1),A
0390+  DBB6             HPrnSymbol
0391+  DBB6 08          	EX	AF,AF'
0392+  DBB7 B7          	OR	A
0393+  DBB8 20 07       	JR	NZ,HPrnS1
0394+  DBBA 2A A1 C1    	LD	HL,(FileLenght)
0395+  DBBD 23          	INC	HL
0396+  DBBE 22 A1 C1    	LD	(FileLenght),HL
0397+  DBC1 CD E3 DB    HPrnS1	CALL	HPrnS2
0398+  DBC4 FD 36 07 01 	LD	(IY+ReadyFile),#01
0399+  DBC8 CD 9F DC    	CALL	HCursorRight
0400+  DBCB 2A 9B C1    	LD	HL,(LineShift)
0401+  DBCE FD 5E 00    	LD	E,(IY+CursorX)
0402+  DBD1 CB 3B       	SRL	E
0403+  DBD3 16 00       	LD	D,#00
0404+  DBD5 19          	ADD	HL,DE
0405+  DBD6 EB          	EX	DE,HL
0406+  DBD7 2A A1 C1    	LD	HL,(FileLenght)
0407+  DBDA B7          	OR	A
0408+  DBDB ED 52       	SBC	HL,DE
0409+  DBDD C0          	RET	NZ
0410+  DBDE FD 7E 00    	LD	A,(IY+CursorX)
0411+  DBE1 B7          	OR	A
0412+  DBE2 C0          	RET	NZ
0413+  DBE3 CD 87 C6    HPrnS2	CALL	ResCursor
0414+  DBE6 2A 9B C1    	LD	HL,(LineShift)
0415+  DBE9 22 9F C1    	LD	(TempShift),HL
0416+  DBEC FD 7E 03    	LD	A,(IY+CursorY)
0417+  DBEF 87          	ADD	A,A
0418+  DBF0 87          	ADD	A,A
0419+  DBF1 87          	ADD	A,A
0420+  DBF2 C6 1C       	ADD	A,#1C
0421+  DBF4 47          	LD	B,A
0422+  DBF5 CD 40 D9    	CALL	PutHLine
0423+  DBF8 CD 04 D9    	CALL	PrHEXCr
0424+  DBFB C9          	RET 
0425+  DBFC             ;[]----------------------------------------------------------[]
0426+  DBFC             HDeleteByte
0427+  DBFC 2A 9B C1    	LD	HL,(LineShift)
0428+  DBFF FD 5E 00    	LD	E,(IY+CursorX)
0429+  DC02 CB 3B       	SRL	E
0430+  DC04 16 00       	LD	D,#00
0431+  DC06 19          	ADD	HL,DE
0432+  DC07 EB          	EX	DE,HL
0433+  DC08 2A A1 C1    	LD	HL,(FileLenght)
0434+  DC0B B7          	OR	A
0435+  DC0C E5          	PUSH	HL
0436+  DC0D ED 52       	SBC	HL,DE
0437+  DC0F E1          	POP	HL
0438+  DC10 C2 74 DC    	JP	NZ,HCursorLeft
0439+  DC13 7C          	LD	A,H
0440+  DC14 B5          	OR	L
0441+  DC15 C8          	RET	Z
0442+  DC16 2B          	DEC	HL
0443+  DC17 22 A1 C1    	LD	(FileLenght),HL
0444+  DC1A 7B          	LD	A,E
0445+  DC1B E6 0F       	AND	#0F
0446+  DC1D 20 16       	JR	NZ,HDelS1
0447+  DC1F 21 5B DC    	LD	HL,EmptyAddr
0448+  DC22 11 08 00    	LD	DE,#0008
0449+  DC25 FD 7E 03    	LD	A,(IY+CursorY)
0450+  DC28 87          	ADD	A,A
0451+  DC29 87          	ADD	A,A
0452+  DC2A 87          	ADD	A,A
0453+  DC2B C6 1C       	ADD	A,#1C
0454+  DC2D 4F          	LD	C,A
0455+  DC2E 06 06       	LD	B,#06
0456+  DC30 3E 9A       	LD	A,PanelCol*#10+FileCol
0457+  DC32 CD 12 86    	CALL	PrnTxtLnNormC
0458+  DC35 FD 36 07 01 HDelS1	LD	(IY+ReadyFile),#01
0459+  DC39 FD CB 00 86 	RES	0,(IY+CursorX)
0460+  DC3D 3E 01       	LD	A,#01
0461+  DC3F CD 77 DC    	CALL	HCursorLeft+3
0462+  DC42 CD 87 C6    	CALL	ResCursor
0463+  DC45 2A 9B C1    	LD	HL,(LineShift)
0464+  DC48 22 9F C1    	LD	(TempShift),HL
0465+  DC4B FD 7E 03    	LD	A,(IY+CursorY)
0466+  DC4E 87          	ADD	A,A
0467+  DC4F 87          	ADD	A,A
0468+  DC50 87          	ADD	A,A
0469+  DC51 C6 1C       	ADD	A,#1C
0470+  DC53 47          	LD	B,A
0471+  DC54 CD 40 D9    	CALL	PutHLine
0472+  DC57 CD 04 D9    	CALL	PrHEXCr
0473+  DC5A C9          	RET 
0474+  DC5B             EmptyAddr
0475+  DC5B             	DEFB	"      "
0475+  DC5B 202020202020
0476+  DC61             ;[]----------------------------------------------------------[]
0477+  DC61             ChHEXmode
0478+  DC61 CD 87 C6    	CALL	ResCursor
0479+  DC64 FD CB 00 86 	RES	0,(IY+CursorX)
0480+  DC68 3A 8E C1    	LD	A,(HEXmode)
0481+  DC6B EE 01       	XOR	#01
0482+  DC6D 32 8E C1    	LD	(HEXmode),A
0483+  DC70 CD 04 D9    	CALL	PrHEXCr
0484+  DC73 C9          	RET 
0485+  DC74             ;[]----------------------------------------------------------[]
0486+  DC74             ;Курсор	влево на одно место
0487+  DC74             HCursorLeft
0488+  DC74 3A 8E C1    	LD	A,(HEXmode)
0489+  DC77 4F          	LD	C,A
0490+  DC78 FD 7E 00    	LD	A,(IY+CursorX)
0491+  DC7B 3D          	DEC	A
0492+  DC7C E6 1F       	AND	#1F
0493+  DC7E FE 1F       	CP	#1F
0494+  DC80 20 0F       	JR	NZ,HCurLf1
0495+  DC82 47          	LD	B,A
0496+  DC83 2A 9B C1    	LD	HL,(LineShift)
0497+  DC86 7C          	LD	A,H
0498+  DC87 B5          	OR	L
0499+  DC88 C8          	RET	Z
0500+  DC89 78          	LD	A,B
0501+  DC8A 91          	SUB	C
0502+  DC8B FD 77 00    	LD	(IY+CursorX),A
0503+  DC8E C3 09 DD    	JP	HCursorUp
0504+  DC91 91          HCurLf1	SUB	C
0505+  DC92 FD 77 00    	LD	(IY+CursorX),A
0506+  DC95 CD 87 C6    	CALL	ResCursor
0507+  DC98 CD 04 D9    	CALL	PrHEXCr
0508+  DC9B CD 43 DA    	CALL	PrnHEXinfo
0509+  DC9E C9          	RET 
0510+  DC9F             ;[]----------------------------------------------------------[]
0511+  DC9F             ;Курсор	вправо на одно место
0512+  DC9F             HCursorRight
0513+  DC9F 2A 9B C1    	LD	HL,(LineShift)
0514+  DCA2 ED 5B A1 C1 	LD	DE,(FileLenght)
0515+  DCA6 FD 4E 00    	LD	C,(IY+CursorX)
0516+  DCA9 CB 39       	SRL	C
0517+  DCAB 06 00       	LD	B,#00
0518+  DCAD 09          	ADD	HL,BC
0519+  DCAE ED 52       	SBC	HL,DE
0520+  DCB0 C8          	RET	Z
0521+  DCB1 3A 8E C1    	LD	A,(HEXmode)
0522+  DCB4 4F          	LD	C,A
0523+  DCB5 FD 7E 00    	LD	A,(IY+CursorX)
0524+  DCB8 3C          	INC	A
0525+  DCB9 81          	ADD	A,C
0526+  DCBA E6 1F       	AND	#1F
0527+  DCBC 20 16       	JR	NZ,HCurRg1
0528+  DCBE 47          	LD	B,A
0529+  DCBF 2A 9B C1    	LD	HL,(LineShift)
0530+  DCC2 11 10 00    	LD	DE,#0010
0531+  DCC5 19          	ADD	HL,DE
0532+  DCC6 EB          	EX	DE,HL
0533+  DCC7 2A A1 C1    	LD	HL,(FileLenght)
0534+  DCCA ED 52       	SBC	HL,DE
0535+  DCCC D8          	RET	C
0536+  DCCD 78          	LD	A,B
0537+  DCCE FD 77 00    	LD	(IY+CursorX),A
0538+  DCD1 C3 2A DD    	JP	HCursorDown
0539+  DCD4 FD 77 00    HCurRg1	LD	(IY+CursorX),A
0540+  DCD7 CD 87 C6    	CALL	ResCursor
0541+  DCDA CD 04 D9    	CALL	PrHEXCr
0542+  DCDD CD 43 DA    	CALL	PrnHEXinfo
0543+  DCE0 C9          	RET 
0544+  DCE1             ;[]----------------------------------------------------------[]
0545+  DCE1             HHomeString
0546+  DCE1 FD 7E 00    	LD	A,(IY+CursorX)
0547+  DCE4 FE 02       	CP	#02
0548+  DCE6 D8          	RET	C
0549+  DCE7 FD 36 00 00 	LD	(IY+CursorX),#00
0550+  DCEB CD 87 C6    	CALL	ResCursor
0551+  DCEE CD 04 D9    	CALL	PrHEXCr
0552+  DCF1 CD 43 DA    	CALL	PrnHEXinfo
0553+  DCF4 C9          	RET 
0554+  DCF5             ;[]----------------------------------------------------------[]
0555+  DCF5             HEndString
0556+  DCF5 FD 7E 00    	LD	A,(IY+CursorX)
0557+  DCF8 FE 1E       	CP	#1E
0558+  DCFA D0          	RET	NC
0559+  DCFB FD 36 00 1E 	LD	(IY+CursorX),#1E
0560+  DCFF CD 87 C6    	CALL	ResCursor
0561+  DD02 CD 04 D9    	CALL	PrHEXCr
0562+  DD05 CD 43 DA    	CALL	PrnHEXinfo
0563+  DD08 C9          	RET 
0564+  DD09             ;[]----------------------------------------------------------[]
0565+  DD09             HCursorUp
0566+  DD09 2A 9B C1    	LD	HL,(LineShift)
0567+  DD0C 7C          	LD	A,H
0568+  DD0D B5          	OR	L
0569+  DD0E C8          	RET	Z
0570+  DD0F FD 7E 03    	LD	A,(IY+CursorY)
0571+  DD12 B7          	OR	A
0572+  DD13 CA 5F DD    	JP	Z,HScrollUp
0573+  DD16 11 10 00    	LD	DE,#0010
0574+  DD19 ED 52       	SBC	HL,DE
0575+  DD1B 22 9B C1    	LD	(LineShift),HL
0576+  DD1E FD 35 03    	DEC	(IY+CursorY)
0577+  DD21 CD 87 C6    	CALL	ResCursor
0578+  DD24 CD 04 D9    	CALL	PrHEXCr
0579+  DD27 C3 BF DD    	JP	HCursorExit
0580+  DD2A             HCursorDown
0581+  DD2A 2A A1 C1    	LD	HL,(FileLenght)
0582+  DD2D ED 5B 9B C1 	LD	DE,(LineShift)
0583+  DD31 FD 7E 00    	LD	A,(IY+CursorX)
0584+  DD34 CB 3F       	SRL	A
0585+  DD36 C6 10       	ADD	A,#10
0586+  DD38 4F          	LD	C,A
0587+  DD39 06 00       	LD	B,#00
0588+  DD3B EB          	EX	DE,HL
0589+  DD3C 09          	ADD	HL,BC
0590+  DD3D EB          	EX	DE,HL
0591+  DD3E ED 52       	SBC	HL,DE
0592+  DD40 DA 60 DE    	JP	C,HEndFile
0593+  DD43 FD 7E 03    	LD	A,(IY+CursorY)
0594+  DD46 FE 18       	CP	#18
0595+  DD48 CA 8B DD    	JP	Z,HScrollDown
0596+  DD4B 7B          	LD	A,E
0597+  DD4C E6 F0       	AND	#F0
0598+  DD4E 5F          	LD	E,A
0599+  DD4F ED 53 9B C1 	LD	(LineShift),DE
0600+  DD53 FD 34 03    	INC	(IY+CursorY)
0601+  DD56 CD 87 C6    	CALL	ResCursor
0602+  DD59 CD 04 D9    	CALL	PrHEXCr
0603+  DD5C C3 BF DD    	JP	HCursorExit
0604+  DD5F             HScrollUp
0605+  DD5F 2A 9D C1    	LD	HL,(PageShift)
0606+  DD62 7C          	LD	A,H
0607+  DD63 B5          	OR	L
0608+  DD64 CA 09 DD    	JP	Z,HCursorUp
0609+  DD67 11 10 00    	LD	DE,#0010
0610+  DD6A ED 52       	SBC	HL,DE
0611+  DD6C 22 9D C1    	LD	(PageShift),HL
0612+  DD6F 22 9F C1    	LD	(TempShift),HL
0613+  DD72 2A 9B C1    	LD	HL,(LineShift)
0614+  DD75 ED 52       	SBC	HL,DE
0615+  DD77 22 9B C1    	LD	(LineShift),HL
0616+  DD7A CD 87 C6    	CALL	ResCursor
0617+  DD7D CD D1 C7    	CALL	ScrollSCRdown
0618+  DD80 06 1C       	LD	B,#1C
0619+  DD82 CD 40 D9    	CALL	PutHLine
0620+  DD85 CD 04 D9    	CALL	PrHEXCr
0621+  DD88 C3 BF DD    	JP	HCursorExit
0622+  DD8B             HScrollDown
0623+  DD8B 2A 9D C1    	LD	HL,(PageShift)
0624+  DD8E 11 90 01    	LD	DE,#0190
0625+  DD91 19          	ADD	HL,DE
0626+  DD92 EB          	EX	DE,HL
0627+  DD93 2A A1 C1    	LD	HL,(FileLenght)
0628+  DD96 B7          	OR	A
0629+  DD97 ED 52       	SBC	HL,DE		;Проверяем на конец файла
0630+  DD99 DA 2A DD    	JP	C,HCursorDown
0631+  DD9C ED 53 9F C1 	LD	(TempShift),DE	;Запоминаем тек.смещение
0632+  DDA0 2A 9D C1    	LD	HL,(PageShift)
0633+  DDA3 11 10 00    	LD	DE,#0010
0634+  DDA6 19          	ADD	HL,DE
0635+  DDA7 22 9D C1    	LD	(PageShift),HL
0636+  DDAA 2A 9B C1    	LD	HL,(LineShift)
0637+  DDAD 19          	ADD	HL,DE
0638+  DDAE 22 9B C1    	LD	(LineShift),HL
0639+  DDB1 CD 87 C6    	CALL	ResCursor
0640+  DDB4 CD CC C7    	CALL	ScrollSCRup
0641+  DDB7 06 DC       	LD	B,#DC
0642+  DDB9 CD 40 D9    	CALL	PutHLine
0643+  DDBC CD 04 D9    	CALL	PrHEXCr
0644+  DDBF             HCursorExit
0645+  DDBF 2A 9B C1    	LD	HL,(LineShift)
0646+  DDC2 CB 3C       	SRL	H
0647+  DDC4 CB 1D       	RR	L
0648+  DDC6 CB 3C       	SRL	H
0649+  DDC8 CB 1D       	RR	L
0650+  DDCA CB 3C       	SRL	H
0651+  DDCC CB 1D       	RR	L
0652+  DDCE CB 3C       	SRL	H
0653+  DDD0 CB 1D       	RR	L
0654+  DDD2 22 97 C1    	LD	(CurLine),HL
0655+  DDD5 CD 43 DA    	CALL	PrnHEXinfo
0656+  DDD8 C9          	RET 
0657+  DDD9             ;[]----------------------------------------------------------[]
0658+  DDD9             HPageUp
0659+  DDD9 2A 9D C1    	LD	HL,(PageShift)
0660+  DDDC 7C          	LD	A,H
0661+  DDDD B5          	OR	L
0662+  DDDE CA 40 DE    	JP	Z,HBegFile
0663+  DDE1 11 90 01    	LD	DE,#0190
0664+  DDE4 B7          	OR	A
0665+  DDE5 ED 52       	SBC	HL,DE
0666+  DDE7 30 03       	JR	NC,$+5
0667+  DDE9 21 00 00    	LD	HL,#0000
0668+  DDEC 22 9D C1    	LD	(PageShift),HL
0669+  DDEF 2A 9B C1    	LD	HL,(LineShift)
0670+  DDF2 B7          	OR	A
0671+  DDF3 ED 52       	SBC	HL,DE
0672+  DDF5 30 03       	JR	NC,$+5
0673+  DDF7 21 00 00    	LD	HL,#0000
0674+  DDFA 22 9B C1    	LD	(LineShift),HL
0675+  DDFD 18 27       	JR	HPageExit
0676+  DDFF             ;[]----------------------------------------------------------[]
0677+  DDFF             HPageDown
0678+  DDFF 2A 9D C1    	LD	HL,(PageShift)
0679+  DE02 01 90 01    	LD	BC,#0190
0680+  DE05 09          	ADD	HL,BC
0681+  DE06 EB          	EX	DE,HL
0682+  DE07 2A A1 C1    	LD	HL,(FileLenght)
0683+  DE0A B7          	OR	A
0684+  DE0B ED 52       	SBC	HL,DE		;Проверяем на конец файла
0685+  DE0D DA 60 DE    	JP	C,HEndFile
0686+  DE10 ED 53 9D C1 	LD	(PageShift),DE
0687+  DE14 2A 9B C1    	LD	HL,(LineShift)
0688+  DE17 09          	ADD	HL,BC
0689+  DE18 EB          	EX	DE,HL
0690+  DE19 2A A1 C1    	LD	HL,(FileLenght)
0691+  DE1C B7          	OR	A
0692+  DE1D ED 52       	SBC	HL,DE		;Проверяем на конец файла
0693+  DE1F DA 60 DE    	JP	C,HEndFile
0694+  DE22 ED 53 9B C1 	LD	(LineShift),DE
0695+  DE26             HPageExit
0696+  DE26 2A 9B C1    	LD	HL,(LineShift)
0697+  DE29 CB 3C       	SRL	H
0698+  DE2B CB 1D       	RR	L
0699+  DE2D CB 3C       	SRL	H
0700+  DE2F CB 1D       	RR	L
0701+  DE31 CB 3C       	SRL	H
0702+  DE33 CB 1D       	RR	L
0703+  DE35 CB 3C       	SRL	H
0704+  DE37 CB 1D       	RR	L
0705+  DE39 22 97 C1    	LD	(CurLine),HL
0706+  DE3C CD D5 D8    	CALL	PrnHEXpage	;Печатаем страницу
0707+  DE3F C9          	RET 
0708+  DE40             ;[]----------------------------------------------------------[]
0709+  DE40             ;В начало файла
0710+  DE40             HBegFile
0711+  DE40 2A 9B C1    	LD	HL,(LineShift)
0712+  DE43 FD 7E 00    	LD	A,(IY+CursorX)
0713+  DE46 B4          	OR	H
0714+  DE47 B5          	OR	L
0715+  DE48 C8          	RET	Z
0716+  DE49 97          	SUB	A
0717+  DE4A FD 77 00    	LD	(IY+CursorX),A
0718+  DE4D FD 77 03    	LD	(IY+CursorY),A
0719+  DE50 21 00 00    	LD	HL,#0000	;Смещение = 0000
0720+  DE53 22 9B C1    	LD	(LineShift),HL
0721+  DE56 22 9D C1    	LD	(PageShift),HL
0722+  DE59 22 97 C1    	LD	(CurLine),HL
0723+  DE5C CD D5 D8    	CALL	PrnHEXpage	;Печатаем страницу
0724+  DE5F C9          	RET 
0725+  DE60             ;[]----------------------------------------------------------[]
0726+  DE60             ;В конец файла
0727+  DE60             HEndFile
0728+  DE60 2A 9B C1    	LD	HL,(LineShift)
0729+  DE63 FD 5E 00    	LD	E,(IY+CursorX)
0730+  DE66 CB 3B       	SRL	E
0731+  DE68 16 00       	LD	D,#00
0732+  DE6A 19          	ADD	HL,DE
0733+  DE6B EB          	EX	DE,HL
0734+  DE6C 2A A1 C1    	LD	HL,(FileLenght)
0735+  DE6F B7          	OR	A
0736+  DE70 E5          	PUSH	HL
0737+  DE71 ED 52       	SBC	HL,DE		;Проверяем на конец файла
0738+  DE73 E1          	POP	HL
0739+  DE74 C8          	RET	Z
0740+  DE75 2A 9D C1    	LD	HL,(PageShift)
0741+  DE78 01 90 01    	LD	BC,#0190
0742+  DE7B 09          	ADD	HL,BC
0743+  DE7C EB          	EX	DE,HL
0744+  DE7D 2A A1 C1    	LD	HL,(FileLenght)
0745+  DE80 B7          	OR	A
0746+  DE81 ED 52       	SBC	HL,DE		;Проверяем на конец файла
0747+  DE83 19          	ADD	HL,DE
0748+  DE84 38 0D       	JR	C,HEnd1
0749+  DE86 ED 42       	SBC	HL,BC
0750+  DE88 7D          	LD	A,L
0751+  DE89 E6 F0       	AND	#F0
0752+  DE8B 6F          	LD	L,A
0753+  DE8C 11 10 00    	LD	DE,#0010
0754+  DE8F 19          	ADD	HL,DE
0755+  DE90 22 9D C1    	LD	(PageShift),HL
0756+  DE93 2A A1 C1    HEnd1	LD	HL,(FileLenght)
0757+  DE96 ED 5B 9D C1 	LD	DE,(PageShift)
0758+  DE9A B7          	OR	A
0759+  DE9B ED 52       	SBC	HL,DE
0760+  DE9D E5          	PUSH	HL
0761+  DE9E CB 3C       	SRL	H
0762+  DEA0 CB 1D       	RR	L
0763+  DEA2 CB 3C       	SRL	H
0764+  DEA4 CB 1D       	RR	L
0765+  DEA6 CB 3C       	SRL	H
0766+  DEA8 CB 1D       	RR	L
0767+  DEAA CB 3C       	SRL	H
0768+  DEAC CB 1D       	RR	L
0769+  DEAE FD 75 03    	LD	(IY+CursorY),L
0770+  DEB1 D1          	POP	DE
0771+  DEB2 7B          	LD	A,E
0772+  DEB3 E6 F0       	AND	#F0
0773+  DEB5 5F          	LD	E,A
0774+  DEB6 2A 9D C1    	LD	HL,(PageShift)
0775+  DEB9 19          	ADD	HL,DE
0776+  DEBA 22 9B C1    	LD	(LineShift),HL
0777+  DEBD CB 3C       	SRL	H
0778+  DEBF CB 1D       	RR	L
0779+  DEC1 CB 3C       	SRL	H
0780+  DEC3 CB 1D       	RR	L
0781+  DEC5 CB 3C       	SRL	H
0782+  DEC7 CB 1D       	RR	L
0783+  DEC9 CB 3C       	SRL	H
0784+  DECB CB 1D       	RR	L
0785+  DECD 22 97 C1    	LD	(CurLine),HL
0786+  DED0 3A A1 C1    	LD	A,(FileLenght)
0787+  DED3 E6 0F       	AND	#0F
0788+  DED5 87          	ADD	A,A
0789+  DED6 FD 77 00    	LD	(IY+CursorX),A
0790+  DED9 CD D5 D8    	CALL	PrnHEXpage	;Печатаем страницу
0791+  DEDC C9          	RET 
0792+  DEDD             ;[]----------------------------------------------------------[]
0793+  DEDD             HNewHEXPos
0794+  DEDD EB          	EX	DE,HL
0795+  DEDE 01 1C 00    	LD	BC,#001C
0796+  DEE1 B7          	OR	A
0797+  DEE2 ED 42       	SBC	HL,BC
0798+  DEE4 7D          	LD	A,L
0799+  DEE5 E6 F8       	AND	#F8
0800+  DEE7 6F          	LD	L,A
0801+  DEE8 CB 25       	SLA	L
0802+  DEEA CB 14       	RL	H
0803+  DEEC E5          	PUSH	HL
0804+  DEED CB 3C       	SRL	H
0805+  DEEF CB 1D       	RR	L
0806+  DEF1 CB 3C       	SRL	H
0807+  DEF3 CB 1D       	RR	L
0808+  DEF5 CB 3C       	SRL	H
0809+  DEF7 CB 1D       	RR	L
0810+  DEF9 CB 3C       	SRL	H
0811+  DEFB CB 1D       	RR	L
0812+  DEFD 7D          	LD	A,L
0813+  DEFE 08          	EX	AF,AF'
0814+  DEFF EB          	EX	DE,HL
0815+  DF00 01 48 00    	LD	BC,#0048
0816+  DF03 B7          	OR	A
0817+  DF04 ED 42       	SBC	HL,BC
0818+  DF06 CB 3C       	SRL	H
0819+  DF08 CB 1D       	RR	L
0820+  DF0A CB 3C       	SRL	H
0821+  DF0C CB 1D       	RR	L
0822+  DF0E CB 3C       	SRL	H
0823+  DF10 CB 1D       	RR	L
0824+  DF12 7D          	LD	A,L
0825+  DF13 21 68 DF    	LD	HL,HNewPosTb
0826+  DF16 87          	ADD	A,A
0827+  DF17 85          	ADD	A,L
0828+  DF18 6F          	LD	L,A
0829+  DF19 30 01       	JR	NC,$+3
0830+  DF1B 24          	INC	H
0831+  DF1C 7E          	LD	A,(HL)
0832+  DF1D 23          	INC	HL
0833+  DF1E 6E          	LD	L,(HL)
0834+  DF1F 67          	LD	H,A
0835+  DF20 D1          	POP	DE
0836+  DF21 B7          	OR	A
0837+  DF22 F8          	RET	M
0838+  DF23 E5          	PUSH	HL
0839+  DF24 2A 9D C1    	LD	HL,(PageShift)
0840+  DF27 19          	ADD	HL,DE
0841+  DF28 EB          	EX	DE,HL
0842+  DF29 D5          	PUSH	DE
0843+  DF2A 83          	ADD	A,E
0844+  DF2B 5F          	LD	E,A
0845+  DF2C 30 01       	JR	NC,$+3
0846+  DF2E 14          	INC	D
0847+  DF2F 2A A1 C1    	LD	HL,(FileLenght)
0848+  DF32 B7          	OR	A
0849+  DF33 ED 52       	SBC	HL,DE
0850+  DF35 D1          	POP	DE
0851+  DF36 E1          	POP	HL
0852+  DF37 D8          	RET	C
0853+  DF38 7C          	LD	A,H
0854+  DF39 87          	ADD	A,A
0855+  DF3A 85          	ADD	A,L
0856+  DF3B FD 77 00    	LD	(IY+CursorX),A
0857+  DF3E 08          	EX	AF,AF'
0858+  DF3F FD 77 03    	LD	(IY+CursorY),A
0859+  DF42 ED 53 9B C1 	LD	(LineShift),DE
0860+  DF46 CB 3A       	SRL	D
0861+  DF48 CB 1B       	RR	E
0862+  DF4A CB 3A       	SRL	D
0863+  DF4C CB 1B       	RR	E
0864+  DF4E CB 3A       	SRL	D
0865+  DF50 CB 1B       	RR	E
0866+  DF52 CB 3A       	SRL	D
0867+  DF54 CB 1B       	RR	E
0868+  DF56 ED 53 97 C1 	LD	(CurLine),DE
0869+  DF5A CD 87 C6    	CALL	ResCursor
0870+  DF5D 97          	SUB	A
0871+  DF5E 32 8E C1    	LD	(HEXmode),A
0872+  DF61 CD 04 D9    	CALL	PrHEXCr
0873+  DF64 CD 43 DA    	CALL	PrnHEXinfo
0874+  DF67 C9          	RET 
0875+  DF68             HNewPosTb
0876+  DF68             	DEFB	00,00,00,01,-1,-1
0876+  DF68 00000001FFFF
0877+  DF6E             	DEFB	01,00,01,01,-1,-1
0877+  DF6E 01000101FFFF
0878+  DF74             	DEFB	02,00,02,01,-1,-1
0878+  DF74 02000201FFFF
0879+  DF7A             	DEFB	03,00,03,01,-1,-1,-1,-1
0879+  DF7A 03000301FFFFFFFF
0880+  DF82             	DEFB	04,00,04,01,-1,-1
0880+  DF82 04000401FFFF
0881+  DF88             	DEFB	05,00,05,01,-1,-1
0881+  DF88 05000501FFFF
0882+  DF8E             	DEFB	06,00,06,01,-1,-1
0882+  DF8E 06000601FFFF
0883+  DF94             	DEFB	07,00,07,01,-1,-1,-1,-1
0883+  DF94 07000701FFFFFFFF
0884+  DF9C             	DEFB	08,00,08,01,-1,-1
0884+  DF9C 08000801FFFF
0885+  DFA2             	DEFB	09,00,09,01,-1,-1
0885+  DFA2 09000901FFFF
0886+  DFA8             	DEFB	10,00,10,01,-1,-1
0886+  DFA8 0A000A01FFFF
0887+  DFAE             	DEFB	11,00,11,01,-1,-1,-1,-1
0887+  DFAE 0B000B01FFFFFFFF
0888+  DFB6             	DEFB	12,00,12,01,-1,-1
0888+  DFB6 0C000C01FFFF
0889+  DFBC             	DEFB	13,00,13,01,-1,-1
0889+  DFBC 0D000D01FFFF
0890+  DFC2             	DEFB	14,00,14,01,-1,-1
0890+  DFC2 0E000E01FFFF
0891+  DFC8             	DEFB	15,00,15,01,-1,-1,-1,-1
0891+  DFC8 0F000F01FFFFFFFF
0892+  DFD0             HNewASCPos
0893+  DFD0 EB          	EX	DE,HL
0894+  DFD1 01 1C 00    	LD	BC,#001C
0895+  DFD4 B7          	OR	A
0896+  DFD5 ED 42       	SBC	HL,BC
0897+  DFD7 7D          	LD	A,L
0898+  DFD8 E6 F8       	AND	#F8
0899+  DFDA 6F          	LD	L,A
0900+  DFDB CB 25       	SLA	L
0901+  DFDD CB 14       	RL	H
0902+  DFDF E5          	PUSH	HL
0903+  DFE0 CB 3C       	SRL	H
0904+  DFE2 CB 1D       	RR	L
0905+  DFE4 CB 3C       	SRL	H
0906+  DFE6 CB 1D       	RR	L
0907+  DFE8 CB 3C       	SRL	H
0908+  DFEA CB 1D       	RR	L
0909+  DFEC CB 3C       	SRL	H
0910+  DFEE CB 1D       	RR	L
0911+  DFF0 7D          	LD	A,L
0912+  DFF1 08          	EX	AF,AF'
0913+  DFF2 EB          	EX	DE,HL
0914+  DFF3 01 E8 01    	LD	BC,#01E8
0915+  DFF6 B7          	OR	A
0916+  DFF7 ED 42       	SBC	HL,BC
0917+  DFF9 CB 3C       	SRL	H
0918+  DFFB CB 1D       	RR	L
0919+  DFFD CB 3C       	SRL	H
0920+  DFFF CB 1D       	RR	L
0921+  E001 CB 3C       	SRL	H
0922+  E003 CB 1D       	RR	L
0923+  E005 D1          	POP	DE
0924+  E006 7D          	LD	A,L
0925+  E007 E5          	PUSH	HL
0926+  E008 2A 9D C1    	LD	HL,(PageShift)
0927+  E00B 19          	ADD	HL,DE
0928+  E00C EB          	EX	DE,HL
0929+  E00D D5          	PUSH	DE
0930+  E00E 83          	ADD	A,E
0931+  E00F 5F          	LD	E,A
0932+  E010 30 01       	JR	NC,$+3
0933+  E012 14          	INC	D
0934+  E013 2A A1 C1    	LD	HL,(FileLenght)
0935+  E016 B7          	OR	A
0936+  E017 ED 52       	SBC	HL,DE
0937+  E019 D1          	POP	DE
0938+  E01A E1          	POP	HL
0939+  E01B D8          	RET	C
0940+  E01C 7D          	LD	A,L
0941+  E01D 87          	ADD	A,A
0942+  E01E FD 77 00    	LD	(IY+CursorX),A
0943+  E021 08          	EX	AF,AF'
0944+  E022 FD 77 03    	LD	(IY+CursorY),A
0945+  E025 ED 53 9B C1 	LD	(LineShift),DE
0946+  E029 CB 3A       	SRL	D
0947+  E02B CB 1B       	RR	E
0948+  E02D CB 3A       	SRL	D
0949+  E02F CB 1B       	RR	E
0950+  E031 CB 3A       	SRL	D
0951+  E033 CB 1B       	RR	E
0952+  E035 CB 3A       	SRL	D
0953+  E037 CB 1B       	RR	E
0954+  E039 ED 53 97 C1 	LD	(CurLine),DE
0955+  E03D CD 87 C6    	CALL	ResCursor
0956+  E040 3E 01       	LD	A,#01
0957+  E042 32 8E C1    	LD	(HEXmode),A
0958+  E045 CD 04 D9    	CALL	PrHEXCr
0959+  E048 CD 43 DA    	CALL	PrnHEXinfo
0960+  E04B C9          	RET 
0961+  E04C             ;[]----------------------------------------------------------[]
0962+  E04C             ;Процедура ввода нового	указателя смещения в файле
0963+  E04C 2A A1 C1    HGoTo	LD	HL,(FileLenght)
0964+  E04F 7C          	LD	A,H		;Проверяем,что длина
0965+  E050 B7          	OR	A		;файла больше 16 байт
0966+  E051 20 04       	JR	NZ,HGoToOk
0967+  E053 7D          	LD	A,L
0968+  E054 FE 11       	CP	#11
0969+  E056 D8          	RET	C		;меньше	16байт
0970+  E057 CD 87 C6    HGoToOk	CALL	ResCursor
0971+  E05A 21 F6 E1    	LD	HL,NewShift	;Буфер для ввода нового	указ.
0972+  E05D 97          	SUB	A
0973+  E05E 32 AB E0    	LD	(CursPos+1),A	;Позиция ввода в буфере
0974+  E061 3C          	INC	A
0975+  E062 32 A5 E0    	LD	(BuffFlg+1),A
0976+  E065 36 30       	LD	(HL),"0"
0977+  E067 23          	INC	HL
0978+  E068 3A 9E C1    	LD	A,(PageShift+1)
0979+  E06B CD E8 D9    	CALL	PutHexNumb	;Заносим в буфер текущее смещ.
0980+  E06E 3A 9D C1    	LD	A,(PageShift)	;в текстовом виде
0981+  E071 CD E8 D9    	CALL	PutHexNumb
0982+  E074             HGoToRet			;Выводим на экран буфер	и
0983+  E074 CD 1B E1    	CALL	PrintHGT	;печатаем курсор
0984+  E077 76          HGoToLp	HALT			;Ожидаем прерывание
0985+  E078 CD 4C E1    	CALL	ChangeCurs	;проверям на смену курсора
0986+  E07B 0E 03       	LD	C,#03
0987+  E07D F7          	RST	#30
0988+  E07E CB 47       	BIT	0,A
0989+  E080 C2 D0 E1    	JP	NZ,HGTescape
0990+  E083 0E 31       	LD	C,#31		;Ожидаем нажатия клавиши
0991+  E085 D7          	RST	#10
0992+  E086 28 EF       	JR	Z,HGoToLp	;Z - не	нажата
0993+  E088 78          	LD	A,B
0994+  E089 E6 3F       	AND	#3F
0995+  E08B 20 EA       	JR	NZ,HGoToLp
0996+  E08D 7B          	LD	A,E
0997+  E08E B7          	OR	A
0998+  E08F 28 5A       	JR	Z,HGoToSys	;A=0 сист.клавиша
0999+  E091 FE 0D       	CP	#0D
1000+  E093 CA 88 E1    	JP	Z,HGTenter	;нажат Enter
1001+  E096 FE 08       	CP	#08
1002+  E098 28 37       	JR	Z,HGTdelete	;нажат BackSpace
1003+  E09A FE 1B       	CP	#1B
1004+  E09C CA D0 E1    	JP	Z,HGTescape	;нажат Esc
1005+  E09F FE 20       	CP	#20
1006+  E0A1 38 D4       	JR	C,HGoToLp	;код<#20 нам не	подходит
1007+  E0A3 4F          	LD	C,A		;сохр. ASCII код
1008+  E0A4 3E 00       BuffFlg	LD	A,#00
1009+  E0A6 B7          	OR	A
1010+  E0A7 C4 C1 E0    	CALL	NZ,ClearBuff
1011+  E0AA 3E 00       CursPos	LD	A,#00		;тек.позиция печати в буфере
1012+  E0AC 47          	LD	B,A		;сохр.тек.поз.
1013+  E0AD 21 F6 E1    	LD	HL,NewShift	;Смещ.от начала	буфера
1014+  E0B0 85          	ADD	A,L
1015+  E0B1 6F          	LD	L,A
1016+  E0B2 30 01       	JR	NC,$+3
1017+  E0B4 24          	INC	H
1018+  E0B5 71          	LD	(HL),C		;Заносим код в буфер
1019+  E0B6 78          	LD	A,B		;тек.поз.
1020+  E0B7 FE 04       	CP	#04		;Позиция в буфере (7-последняя)
1021+  E0B9 28 B9       	JR	Z,HGoToRet	;печатаем строку и курсор
1022+  E0BB 3C          	INC	A		;след.позиция
1023+  E0BC 32 AB E0    	LD	(CursPos+1),A
1024+  E0BF 18 B3       	JR	HGoToRet	;печатаем строку и курсор
1025+  E0C1             ClearBuff
1026+  E0C1 21 F6 E1    	LD	HL,NewShift
1027+  E0C4 06 05       	LD	B,#05
1028+  E0C6 3E 20       	LD	A,#20
1029+  E0C8 77          	LD	(HL),A
1030+  E0C9 23          	INC	HL
1031+  E0CA 10 FC       	DJNZ	$-2
1032+  E0CC 97          	SUB	A
1033+  E0CD 32 A5 E0    	LD	(BuffFlg+1),A
1034+  E0D0 C9          	RET 
1035+  E0D1             HGTdelete			;Забой
1036+  E0D1 97          	SUB	A
1037+  E0D2 32 A5 E0    	LD	(BuffFlg+1),A
1038+  E0D5 3A AB E0    	LD	A,(CursPos+1)	;Тек.позиция в буфере
1039+  E0D8 B7          	OR	A
1040+  E0D9 28 9C       	JR	Z,HGoToLp	;0 - выходим
1041+  E0DB 3D          	DEC	A
1042+  E0DC 32 AB E0    	LD	(CursPos+1),A	;предид.позиция
1043+  E0DF 21 F6 E1    	LD	HL,NewShift
1044+  E0E2 85          	ADD	A,L		;смещ.в	буфере
1045+  E0E3 6F          	LD	L,A
1046+  E0E4 30 01       	JR	NC,$+3
1047+  E0E6 24          	INC	H
1048+  E0E7 36 20       	LD	(HL)," "	;Забиваем пробелом
1049+  E0E9 18 89       	JR	HGoToRet
1050+  E0EB             HGoToSys			;системная клавиша
1051+  E0EB 7A          	LD	A,D
1052+  E0EC FE 54       	CP	#54		;<-
1053+  E0EE 28 06       	JR	Z,HGTleft
1054+  E0F0 FE 56       	CP	#56		;->
1055+  E0F2 28 14       	JR	Z,HGTright
1056+  E0F4 18 81       	JR	HGoToLp
1057+  E0F6             HGTleft				;Курсор	влево
1058+  E0F6 97          	SUB	A
1059+  E0F7 32 A5 E0    	LD	(BuffFlg+1),A
1060+  E0FA 3A AB E0    	LD	A,(CursPos+1)	;Тек.позиция в буфере
1061+  E0FD B7          	OR	A
1062+  E0FE CA 77 E0    	JP	Z,HGoToLp	;0 - выходим
1063+  E101 3D          	DEC	A
1064+  E102 32 AB E0    	LD	(CursPos+1),A	;Уменьш.поз.
1065+  E105 C3 74 E0    	JP	HGoToRet
1066+  E108             HGTright
1067+  E108 97          	SUB	A
1068+  E109 32 A5 E0    	LD	(BuffFlg+1),A
1069+  E10C 3A AB E0    	LD	A,(CursPos+1)	;Тек.позиция в буфере
1070+  E10F FE 04       	CP	#04
1071+  E111 CA 77 E0    	JP	Z,HGoToLp	;7 - последняя
1072+  E114 3C          	INC	A
1073+  E115 32 AB E0    	LD	(CursPos+1),A	;Увелич.поз.
1074+  E118 C3 74 E0    	JP	HGoToRet
1075+  E11B             PrintHGT		;Процедура вывода строки и курсора
1076+  E11B 21 F6 E1    	LD	HL,NewShift
1077+  E11E 11 08 00    	LD	DE,#0008
1078+  E121 01 1C 05    	LD	BC,#051C
1079+  E124 3E 9A       	LD	A,PanelCol*#10+FileCol
1080+  E126 CD 12 86    	CALL	PrnTxtLnNormC
1081+  E129 3A AB E0    	LD	A,(CursPos+1)	;Позиция вывода	курсора
1082+  E12C 3C          	INC	A
1083+  E12D 6F          	LD	L,A
1084+  E12E 26 00       	LD	H,#00
1085+  E130 29          	ADD	HL,HL
1086+  E131 29          	ADD	HL,HL
1087+  E132 29          	ADD	HL,HL
1088+  E133 EB          	EX	DE,HL
1089+  E134 21 87 E1    	LD	HL,TCursor
1090+  E137 36 AB       	LD	(HL),"«"
1091+  E139 01 1C 01    	LD	BC,#011C
1092+  E13C 3E 9A       	LD	A,PanelCol*#10+FileCol
1093+  E13E CD 12 86    	CALL	PrnTxtLnNormC
1094+  E141 3E 01       	LD	A,#01		;Номер выведенного курсора
1095+  E143 32 6A E1    	LD	(CurCurs+1),A
1096+  E146 3E 06       	LD	A,#06		;Ожидание для смены курсора
1097+  E148 32 4D E1    	LD	(CurWait+1),A
1098+  E14B C9          	RET 
1099+  E14C             ChangeCurs		;Процедура смены курсора
1100+  E14C 3E 00       CurWait	LD	A,#00	;Задержка между	сменой курсора
1101+  E14E 3D          	DEC	A
1102+  E14F 32 4D E1    	LD	(CurWait+1),A
1103+  E152 C0          	RET	NZ	;еще не	время
1104+  E153 3A AB E0    	LD	A,(CursPos+1)
1105+  E156 3C          	INC	A
1106+  E157 6F          	LD	L,A
1107+  E158 26 00       	LD	H,#00	;Тек.знакоместо
1108+  E15A 29          	ADD	HL,HL
1109+  E15B 29          	ADD	HL,HL
1110+  E15C 29          	ADD	HL,HL
1111+  E15D EB          	EX	DE,HL
1112+  E15E 21 F6 E1    	LD	HL,NewShift	;Смещ.в	буфере
1113+  E161 3A AB E0    	LD	A,(CursPos+1)
1114+  E164 85          	ADD	A,L
1115+  E165 6F          	LD	L,A
1116+  E166 30 01       	JR	NC,CurCurs
1117+  E168 24          	INC	H
1118+  E169 3E 00       CurCurs	LD	A,#00		;Номер текущего	курсора
1119+  E16B EE 01       	XOR	#01		;Меняем	курсор
1120+  E16D 32 6A E1    	LD	(CurCurs+1),A
1121+  E170 7E          	LD	A,(HL)
1122+  E171 28 02       	JR	Z,$+4		;Печатаем
1123+  E173 3E AB       	LD	A,"«"
1124+  E175 21 87 E1    	LD	HL,TCursor
1125+  E178 77          	LD	(HL),A
1126+  E179 01 1C 01    	LD	BC,#011C
1127+  E17C 3E 9A       	LD	A,PanelCol*#10+FileCol
1128+  E17E CD 12 86    	CALL	PrnTxtLnNormC
1129+  E181 3E 0C       	LD	A,#0C		;Ожидание для смены курсора
1130+  E183 32 4D E1    	LD	(CurWait+1),A
1131+  E186 C9          	RET 
1132+  E187             TCursor
1133+  E187 20          	DEFB	" "
1134+  E188             HGTenter			;Клавиша ENTER
1135+  E188 97          	SUB	A		;При ошибке вернемся с курсором
1136+  E189 32 AB E0    	LD	(CursPos+1),A	;в нулевой позиции
1137+  E18C 01 F6 E1    	LD	BC,NewShift	;Буфер строки
1138+  E18F CD FC E1    	CALL	GetHexNum16	;Переводим текст в 32бит число
1139+  E192 DA 74 E0    	JP	C,HGoToRet	;CY - синтакс.ошибка
1140+  E195 4B          	LD	C,E
1141+  E196 42          	LD	B,D
1142+  E197 7D          	LD	A,L		;Адрес кратный 16
1143+  E198 E6 F0       	AND	#F0
1144+  E19A 6F          	LD	L,A
1145+  E19B EB          	EX	DE,HL		;Смещ.в	BC+DE
1146+  E19C 2A A1 C1    	LD	HL,(FileLenght)	;Проверяем,что смещение	в
1147+  E19F B7          	OR	A		;пределах файла
1148+  E1A0 ED 52       	SBC	HL,DE
1149+  E1A2 EB          	EX	DE,HL
1150+  E1A3 30 07       	JR	NC,HGTent1	;NZ-в пределах
1151+  E1A5 2A A1 C1    	LD	HL,(FileLenght)
1152+  E1A8 7D          	LD	A,L
1153+  E1A9 E6 F0       	AND	#F0
1154+  E1AB 6F          	LD	L,A
1155+  E1AC 22 9D C1    HGTent1	LD	(PageShift),HL
1156+  E1AF 22 9B C1    	LD	(LineShift),HL
1157+  E1B2 CB 3C       	SRL	H
1158+  E1B4 CB 1D       	RR	L
1159+  E1B6 CB 3C       	SRL	H
1160+  E1B8 CB 1D       	RR	L
1161+  E1BA CB 3C       	SRL	H
1162+  E1BC CB 1D       	RR	L
1163+  E1BE CB 3C       	SRL	H
1164+  E1C0 CB 1D       	RR	L
1165+  E1C2 22 97 C1    	LD	(CurLine),HL
1166+  E1C5 97          	SUB	A
1167+  E1C6 FD 77 00    	LD	(IY+CursorX),A
1168+  E1C9 FD 77 03    	LD	(IY+CursorY),A
1169+  E1CC CD D5 D8    	CALL	PrnHEXpage	;Печатаем страницу
1170+  E1CF C9          	RET 
1171+  E1D0             HGTescape		;Нажат Escape
1172+  E1D0 21 F6 E1    	LD	HL,NewShift	;Буфер строки
1173+  E1D3 E5          	PUSH	HL
1174+  E1D4 36 30       	LD	(HL),"0"
1175+  E1D6 23          	INC	HL
1176+  E1D7 3A 9E C1    	LD	A,(PageShift+1)	;Заносим тек.смещение
1177+  E1DA CD E8 D9    	CALL	PutHexNumb
1178+  E1DD 3A 9D C1    	LD	A,(PageShift)
1179+  E1E0 CD E8 D9    	CALL	PutHexNumb
1180+  E1E3 E1          	POP	HL
1181+  E1E4 11 08 00    	LD	DE,#0008
1182+  E1E7 01 1C 05    	LD	BC,#051C
1183+  E1EA 3E 9A       	LD	A,PanelCol*#10+FileCol
1184+  E1EC CD 12 86    	CALL	PrnTxtLnNormC
1185+  E1EF CD 04 D9    	CALL	PrHEXCr
1186+  E1F2 CD 48 86    	CALL	ResFire
1187+  E1F5 C9          	RET			;Выходим
1188+  E1F6             NewShift
1189+  E1F6             	DEFB	"     ",0
1189+  E1F6 202020202000
1190+  E1FC             ;Процедура конвертирования 32битового шестн.текстового числа
1191+  E1FC             ;На вход:
1192+  E1FC             ;	  BC - Адрес буфера с текстом (0-конец буфера)
1193+  E1FC             ;На выход:
1194+  E1FC             ;	  DE+HL	- Число	32бит
1195+  E1FC             ;	  CY - синтаксическая ошибка
1196+  E1FC             GetHexNum16
1197+  E1FC 21 00 00    	LD	HL,#0000
1198+  E1FF 0A          GetHNlp	LD	A,(BC)
1199+  E200 03          	INC	BC
1200+  E201 B7          	OR	A
1201+  E202 C8          	RET	Z
1202+  E203 FE 20       	CP	" "
1203+  E205 28 F8       	JR	Z,GetHNlp
1204+  E207 FE 61       	CP	#61
1205+  E209 38 02       	JR	C,$+4
1206+  E20B D6 20       	SUB	#20
1207+  E20D FE 30       	CP	#30
1208+  E20F D8          	RET	C
1209+  E210 FE 47       	CP	#47
1210+  E212 3F          	CCF 
1211+  E213 D8          	RET	C
1212+  E214 D6 30       	SUB	#30
1213+  E216 FE 0A       	CP	#0A
1214+  E218 38 05       	JR	C,GetHNum
1215+  E21A D6 07       	SUB	#07
1216+  E21C FE 0A       	CP	#0A
1217+  E21E D8          	RET	C
1218+  E21F 29          GetHNum	ADD	HL,HL
1219+  E220 29          	ADD	HL,HL
1220+  E221 29          	ADD	HL,HL
1221+  E222 29          	ADD	HL,HL
1222+  E223 B5          	OR	L
1223+  E224 6F          	LD	L,A
1224+  E225 18 D8       	JR	GetHNlp
1225+  E227             
1226+  E227             
1227+  E227             
1228+  E227             
0943   E227             	INCLUDE	"FEPRN.z80";,#10
0001+  E227             
0002+  E227             ;[]==========================================================[]
0003+  E227             PrintFile
0004+  E227 CD 87 C6    	CALL	ResCursor
0005+  E22A CD 06 86    	CALL	MakeWindow
0006+  E22D 01          	DEFB	#01
0007+  E22E A8 00 60 00 	DEFW	#00A8,#0060
0008+  E232 30 01 32 00 	DEFW	#0130,#0032
0009+  E236 02          	DEFB	#02	;Head place
0010+  E237 04 00 02 00 	DEFW	#0004,#0002
0011+  E23B 28 01 0A 00 	DEFW	#0128,#000A
0012+  E23F 00          	DEFB	#00
0013+  E240 01          	DEFB	#01	;Text Line
0014+  E241 84 00 03 00 	DEFW	#0084,#0003
0015+  E245 0F          	DEFB	#0F
0016+  E246             	DEFB	"Print file",0
0016+  E246 5072696E742066696C6500
0017+  E251 03          	DEFB	#03	;Углубление
0018+  E252 10 00 10 00 	DEFW	#0010,#0010
0019+  E256 10 01 0C 00 	DEFW	#0110,#000C
0020+  E25A 02          	DEFB	#02	;Head place
0021+  E25B 12 00 11 00 	DEFW	#0012,#0011
0022+  E25F 0C 01 0A 00 	DEFW	#010C,#000A
0023+  E263 0F          	DEFB	#0F
0024+  E264 04          	DEFB	#04	;UpRectan
0025+  E265 74 00 20 00 	DEFW	#0074,#0020
0026+  E269 48 00 0E 00 	DEFW	#0048,#000E
0027+  E26D 01          	DEFB	#01	;Text Line
0028+  E26E 8C 00 23 00 	DEFW	#008C,#0023
0029+  E272 80          	DEFB	#80
0030+  E273 53746F7000  	DEFB	"Stop",0
0031+  E278 00          	DEFB	#00
0032+  E279 DD 21 29 E4 	LD	IX,PrintTab
0033+  E27D CD 4B 86    	CALL	TestCoords
0034+  E280 DD 21 6E E4 	LD	IX,ProcessPrn
0035+  E284 2A A1 C1    	LD	HL,(FileLenght)
0036+  E287 7D          	LD	A,L
0037+  E288 6C          	LD	L,H
0038+  E289 26 00       	LD	H,#00
0039+  E28B B7          	OR	A
0040+  E28C 28 01       	JR	Z,InitPrn
0041+  E28E 23          	INC	HL
0042+  E28F DD 75 0A    InitPrn	LD	(IX+ProcMAXl1),L
0043+  E292 DD 74 0B    	LD	(IX+ProcMAXh1),H
0044+  E295 DD 36 0C 00 	LD	(IX+ProcMAXl2),#00
0045+  E299 DD 36 0D 00 	LD	(IX+ProcMAXh2),#00
0046+  E29D CD 33 86    	CALL	InitProcess
0047+  E2A0 3A 8D C1    	LD	A,(EditMode)
0048+  E2A3 B7          	OR	A
0049+  E2A4 C2 F6 E2    	JP	NZ,PrintHEX
0050+  E2A7             PrintASCII
0051+  E2A7 21 00 00    	LD	HL,#0000
0052+  E2AA 22 9F C1    	LD	(TempShift),HL
0053+  E2AD 2A A1 C1    	LD	HL,(FileLenght)
0054+  E2B0 DB A2       	IN	A,(PAGE1)
0055+  E2B2 F5          	PUSH	AF
0056+  E2B3 ED 5B 9F C1 	LD	DE,(TempShift)
0057+  E2B7 7A          	LD	A,D		;Выделяем номер	страницы
0058+  E2B8 E6 C0       	AND	#C0
0059+  E2BA 07          	RLCA 
0060+  E2BB 07          	RLCA 
0061+  E2BC D9          	EXX 
0062+  E2BD 5F          	LD	E,A		;DE - Адрес страницы в списке
0063+  E2BE 16 84       	LD	D,high PagesList
0064+  E2C0 1A          	LD	A,(DE)		;Тек.страница
0065+  E2C1 D3 A2       	OUT	(PAGE1),A
0066+  E2C3 D9          	EXX 
0067+  E2C4 CB BA       	RES	7,D		;Вкл.с #4000
0068+  E2C6 CB F2       	SET	6,D
0069+  E2C8             PrnASCII
0070+  E2C8 CB 7A       	BIT	7,D
0071+  E2CA 28 0A       	JR	Z,PrnASC
0072+  E2CC CB BA       	RES	7,D
0073+  E2CE CB F2       	SET	6,D
0074+  E2D0 D9          	EXX 
0075+  E2D1 1C          	INC	E		;DE - Адрес страницы в списке
0076+  E2D2 1A          	LD	A,(DE)		;Тек.страница
0077+  E2D3 D3 A2       	OUT	(PAGE1),A
0078+  E2D5 D9          	EXX 
0079+  E2D6 1A          PrnASC	LD	A,(DE)
0080+  E2D7 13          	INC	DE
0081+  E2D8 CD E2 E3    	CALL	PrintCHAR
0082+  E2DB 38 10       	JR	C,PrnASCIIext
0083+  E2DD CD 3B E4    	CALL	NxtPrnProc
0084+  E2E0 2B          	DEC	HL
0085+  E2E1 7C          	LD	A,H
0086+  E2E2 B5          	OR	L
0087+  E2E3 20 E3       	JR	NZ,PrnASCII
0088+  E2E5 11 00 00    	LD	DE,#0000
0089+  E2E8 CD 3B E4    	CALL	NxtPrnProc
0090+  E2EB 76          	HALT 
0091+  E2EC 76          	HALT 
0092+  E2ED             PrnASCIIext
0093+  E2ED F1          	POP	AF
0094+  E2EE D3 A2       	OUT	(PAGE1),A
0095+  E2F0 CD 06 86    	CALL	MakeWindow
0096+  E2F3 7F          	DEFB	#7F
0097+  E2F4 00          	DEFB	#00
0098+  E2F5 C9          	RET 
0099+  E2F6             PrintHEX
0100+  E2F6 21 00 00    	LD	HL,#0000
0101+  E2F9 22 9F C1    	LD	(TempShift),HL
0102+  E2FC 21 00 82    	LD	HL,LineBuffer
0103+  E2FF 01 20 4E    	LD	BC,#4E20
0104+  E302 71          	LD	(HL),C
0105+  E303 2C          	INC	L
0106+  E304 10 FC       	DJNZ	$-2
0107+  E306             PrintHEXlp
0108+  E306 CD 28 E3    	CALL	PrnHEXline
0109+  E309 38 0C       	JR	C,PrintHEXext
0110+  E30B 2A 9F C1    	LD	HL,(TempShift)
0111+  E30E 11 10 00    	LD	DE,#0010	;Адрес дампа+16
0112+  E311 19          	ADD	HL,DE
0113+  E312 22 9F C1    	LD	(TempShift),HL
0114+  E315 18 EF       	JR	PrintHEXlp
0115+  E317             PrintHEXext
0116+  E317 B7          	OR	A
0117+  E318 20 08       	JR	NZ,PrnHEXe
0118+  E31A 11 00 00    	LD	DE,#0000
0119+  E31D CD 3B E4    	CALL	NxtPrnProc
0120+  E320 76          	HALT 
0121+  E321 76          	HALT 
0122+  E322 CD 06 86    PrnHEXe	CALL	MakeWindow
0123+  E325 7F          	DEFB	#7F
0124+  E326 00          	DEFB	#00
0125+  E327 C9          	RET 
0126+  E328             PrnHEXline
0127+  E328 DD 2E 00    	LD	LX,#00
0128+  E32B DD 60       	LD	HX,B
0129+  E32D 2A A1 C1    	LD	HL,(FileLenght)
0130+  E330 ED 4B 9F C1 	LD	BC,(TempShift)
0131+  E334 B7          	OR	A
0132+  E335 ED 42       	SBC	HL,BC
0133+  E337 3E 00       	LD	A,#00
0134+  E339 D8          	RET	C
0135+  E33A 06 10       	LD	B,#10
0136+  E33C 7C          	LD	A,H
0137+  E33D B7          	OR	A
0138+  E33E 20 05       	JR	NZ,PrnHLn
0139+  E340 7D          	LD	A,L
0140+  E341 B8          	CP	B
0141+  E342 30 01       	JR	NC,PrnHLn
0142+  E344 45          	LD	B,L
0143+  E345             
0144+  E345 DB A2       PrnHLn	IN	A,(PAGE1)
0145+  E347 F5          	PUSH	AF
0146+  E348 ED 5B 9F C1 	LD	DE,(TempShift)
0147+  E34C 7A          	LD	A,D		;Выделяем номер	страницы
0148+  E34D E6 C0       	AND	#C0
0149+  E34F 07          	RLCA 
0150+  E350 07          	RLCA 
0151+  E351 D9          	EXX 
0152+  E352 5F          	LD	E,A		;DE - Адрес страницы в списке
0153+  E353 16 84       	LD	D,high PagesList
0154+  E355 1A          	LD	A,(DE)		;Тек.страница
0155+  E356 D3 A2       	OUT	(PAGE1),A
0156+  E358 D9          	EXX 
0157+  E359 CB BA       	RES	7,D		;Вкл.с #4000
0158+  E35B CB F2       	SET	6,D
0159+  E35D 21 01 82    	LD	HL,LineBuffer+1	;буфер строки
0160+  E360 D9          	EXX 
0161+  E361 21 3D 82    	LD	HL,LineBuffer+#3D ;место для ASCII кодов
0162+  E364 D9          	EXX 
0163+  E365 36 30       	LD	(HL),"0"
0164+  E367 2C          	INC	L
0165+  E368 3A A0 C1    	LD	A,(TempShift+1)
0166+  E36B CD E8 D9    	CALL	PutHexNumb
0167+  E36E 3A 9F C1    	LD	A,(TempShift)
0168+  E371 CD E8 D9    	CALL	PutHexNumb
0169+  E374 36 3A       	LD	(HL),":"
0170+  E376 2C          	INC	L
0171+  E377 2C          	INC	L
0172+  E378 2C          	INC	L
0173+  E379 78          	LD	A,B
0174+  E37A B7          	OR	A
0175+  E37B 28 29       	JR	Z,PrnHLp2
0176+  E37D             PrnHLoop
0177+  E37D CB 7A       	BIT	7,D
0178+  E37F 28 0A       	JR	Z,PrnHLp1
0179+  E381 CB BA       	RES	7,D
0180+  E383 CB F2       	SET	6,D
0181+  E385 D9          	EXX 
0182+  E386 1C          	INC	E		;DE - Адрес страницы в списке
0183+  E387 1A          	LD	A,(DE)		;Тек.страница
0184+  E388 D3 A2       	OUT	(PAGE1),A
0185+  E38A D9          	EXX 
0186+  E38B 1A          PrnHLp1	LD	A,(DE)
0187+  E38C 13          	INC	DE
0188+  E38D D9          	EXX 
0189+  E38E FE 20       	CP	#20
0190+  E390 30 02       	JR	NC,$+4
0191+  E392 3E 2E       	LD	A,"."
0192+  E394 77          	LD	(HL),A
0193+  E395 2C          	INC	L
0194+  E396 D9          	EXX 
0195+  E397 CD E8 D9    	CALL	PutHexNumb	;Процедура конверта
0196+  E39A 2C          	INC	L
0197+  E39B DD 2C       	INC	LX		;Увелич.кол-во введенных байтов
0198+  E39D DD 7D       	LD	A,LX
0199+  E39F E6 03       	AND	#03
0200+  E3A1 20 01       	JR	NZ,$+3
0201+  E3A3 2C          	INC	L
0202+  E3A4 10 D7       	DJNZ	PrnHLoop
0203+  E3A6 F1          PrnHLp2	POP	AF
0204+  E3A7 D3 A2       	OUT	(PAGE1),A
0205+  E3A9             ;Процедура отчистки закончившихся байтов
0206+  E3A9 3E 10       FillHeP	LD	A,#10		;Макс.байтов
0207+  E3AB DD 95       	SUB	LX		;Тек.кол-во байтов
0208+  E3AD 28 18       	JR	Z,FillP2
0209+  E3AF 47          	LD	B,A
0210+  E3B0 0E 20       	LD	C,#20
0211+  E3B2 71          FillP1	LD	(HL),C
0212+  E3B3 2C          	INC	L
0213+  E3B4 71          	LD	(HL),C
0214+  E3B5 2C          	INC	L
0215+  E3B6 2C          	INC	L
0216+  E3B7 D9          	EXX 
0217+  E3B8 36 20       	LD	(HL),#20
0218+  E3BA 2C          	INC	L
0219+  E3BB D9          	EXX 
0220+  E3BC DD 2C       	INC	LX
0221+  E3BE DD 7D       	LD	A,LX		;В центре 2 пробела
0222+  E3C0 E6 03       	AND	#03
0223+  E3C2 20 01       	JR	NZ,$+3
0224+  E3C4 2C          	INC	L
0225+  E3C5 10 EB       	DJNZ	FillP1
0226+  E3C7 21 00 82    FillP2	LD	HL,LineBuffer
0227+  E3CA 06 4E       	LD	B,#4E
0228+  E3CC 7E          PrnHEX	LD	A,(HL)
0229+  E3CD 23          	INC	HL
0230+  E3CE CD E2 E3    	CALL	PrintCHAR
0231+  E3D1 3E 01       	LD	A,#01
0232+  E3D3 D8          	RET	C
0233+  E3D4 10 F6       	DJNZ	PrnHEX
0234+  E3D6 3E 0D       	LD	A,#0D
0235+  E3D8 CD E2 E3    	CALL	PrintCHAR
0236+  E3DB D8          	RET	C
0237+  E3DC 3E 0A       	LD	A,#0A
0238+  E3DE CD E2 E3    	CALL	PrintCHAR
0239+  E3E1 C9          	RET 
0240+  E3E2             PrintCHAR
0241+  E3E2 DD 6F       	LD	LX,A
0242+  E3E4 DD E5       	PUSH	IX
0243+  E3E6 E5          	PUSH	HL
0244+  E3E7 D5          	PUSH	DE
0245+  E3E8 C5          	PUSH	BC
0246+  E3E9 D9          	EXX 
0247+  E3EA D5          	PUSH	DE
0248+  E3EB 0E 03       	LD	C,#03
0249+  E3ED F7          	RST	#30
0250+  E3EE CB 47       	BIT	0,A
0251+  E3F0 28 09       	JR	Z,PrnCH1
0252+  E3F2 DD 21 29 E4 	LD	IX,PrintTab
0253+  E3F6 CD 4B 86    	CALL	TestCoords
0254+  E3F9 38 04       	JR	C,PrnCH2
0255+  E3FB 0E 31       PrnCH1	LD	C,#31
0256+  E3FD D7          	RST	#10
0257+  E3FE 7B          	LD	A,E
0258+  E3FF D1          PrnCH2	POP	DE
0259+  E400 D9          	EXX 
0260+  E401 C1          	POP	BC
0261+  E402 D1          	POP	DE
0262+  E403 E1          	POP	HL
0263+  E404 DD E1       	POP	IX
0264+  E406 D8          	RET	C
0265+  E407 28 0C       	JR	Z,PrnCHAR
0266+  E409 FE 1B       	CP	#1B
0267+  E40B 37          	SCF 
0268+  E40C C8          	RET	Z
0269+  E40D CB AF       	RES	5,A
0270+  E40F FE 53       	CP	"S"
0271+  E411 20 02       	JR	NZ,PrnCHAR
0272+  E413             StopPrint
0273+  E413 37          	SCF 
0274+  E414 C9          	RET 
0275+  E415 E5          PrnCHAR	PUSH	HL
0276+  E416 D5          	PUSH	DE
0277+  E417 C5          	PUSH	BC
0278+  E418 D9          	EXX 
0279+  E419 D5          	PUSH	DE
0280+  E41A DD 7D       	LD	A,LX
0281+  E41C 0E 5F       	LD	C,#5F
0282+  E41E D7          	RST	#10
0283+  E41F D1          	POP	DE
0284+  E420 78          	LD	A,B
0285+  E421 D9          	EXX 
0286+  E422 C1          	POP	BC
0287+  E423 D1          	POP	DE
0288+  E424 E1          	POP	HL
0289+  E425 D0          	RET	NC
0290+  E426 76          	HALT 
0291+  E427 18 B9       	JR	PrintCHAR
0292+  E429             PrintTab
0293+  E429             	DEFW #011C,#0164,#0080,#008E,#01,#0000,StopPrint,#0000
0293+  E429 1C01640180008E000100000013E40000
0294+  E439 00 80       	DEFW #8000
0295+  E43B             NxtPrnProc
0296+  E43B 7B          	LD	A,E
0297+  E43C B7          	OR	A
0298+  E43D C0          	RET	NZ
0299+  E43E E5          	PUSH	HL
0300+  E43F D5          	PUSH	DE
0301+  E440 C5          	PUSH	BC
0302+  E441 D9          	EXX 
0303+  E442 D5          	PUSH	DE
0304+  E443 DD 21 6E E4 	LD	IX,ProcessPrn
0305+  E447 DD 6E 0E    	LD	L,(IX+ProcCURl1)
0306+  E44A DD 66 0F    	LD	H,(IX+ProcCURh1)
0307+  E44D 23          	INC	HL
0308+  E44E DD 75 0E    	LD	(IX+ProcCURl1),L
0309+  E451 DD 74 0F    	LD	(IX+ProcCURh1),H
0310+  E454 7C          	LD	A,H
0311+  E455 B5          	OR	L
0312+  E456 20 0D       	JR	NZ,NxtProc
0313+  E458 DD 6E 10    	LD	L,(IX+ProcCURl2)
0314+  E45B DD 66 11    	LD	H,(IX+ProcCURh2)
0315+  E45E 23          	INC	HL
0316+  E45F DD 75 10    	LD	(IX+ProcCURl2),L
0317+  E462 DD 74 11    	LD	(IX+ProcCURh2),H
0318+  E465 CD 36 86    NxtProc	CALL	PrnProcess
0319+  E468 D1          	POP	DE
0320+  E469 D9          	EXX 
0321+  E46A C1          	POP	BC
0322+  E46B D1          	POP	DE
0323+  E46C E1          	POP	HL
0324+  E46D C9          	RET 
0325+  E46E             ProcessPrn
0326+  E46E BA 00       	DEFW	#00BA
0327+  E470 71 00       	DEFW	#0071
0328+  E472 0C 01       	DEFW	#010C
0329+  E474 00 00       	DEFW	#0000
0330+  E476 00 00       	DEFW	#0000
0331+  E478 00 00       	DEFW	#0000
0332+  E47A 00 00       	DEFW	#0000
0333+  E47C 00 00       	DEFW	#0000
0334+  E47E 00 00       	DEFW	#0000
0335+  E480 4F          	DEFB	#4F
0336+  E481             
0337+  E481             
0338+  E481             
0944   E481             ;[]==========================================================[]
0945   E481             ASCIItab
0946   E481                 DEFW #0000,#0270,#001C,#00E4,#00,#0000,TNewCrPos,#0000
0946   E481 000070021C00E400000000002ED80000
0947   E491                 DEFW #0000,#0050,#00F2,#0100,#01,#0000,About,#0000
0947   E491 00005000F200000101000000D8C60000
0948   E4A1                 DEFW #0050,#00A0,#00F2,#0100,#01,#0000,SaveFile,#0000
0948   E4A1 5000A000F200000101000000FACA0000
0949   E4B1                 DEFW #00A0,#00F0,#00F2,#0100,#01,#0000,ChEditor,#0000
0949   E4B1 A000F000F200000101000000A8C10000
0950   E4C1                 DEFW #01E0,#0230,#00F2,#0100,#01,#0000,PrintFile,#0000
0950   E4C1 E0013002F20000010100000027E20000
0951   E4D1                 DEFW #0230,#0280,#00F2,#0100,#21,#0000,EditorExit,#0000
0951   E4D1 30028002F20000012100000017C20000
0952   E4E1                 DEFW #0270,#0280,#001C,#0024,#03,#0000,TCursorUp,#0000
0952   E4E1 700280021C00240003000000E8D50000
0953   E4F1                 DEFW #0270,#0280,#00DC,#00E4,#03,#0000,TCursorDown,#0000
0953   E4F1 70028002DC00E400030000000BD60000
0954   E501             TBarU	EQU	$+6
0955   E501                 DEFW #0270,#0280,#001C,#0000,#00,#0000,TPageUp,#0000
0955   E501 700280021C0000000000000004D70000
0956   E511             TBarD	EQU	$+4
0957   E511                 DEFW #0270,#0280,#0000,#00E4,#00,#0000,TPageDown,#0000
0957   E511 700280020000E400000000002AD70000
0958   E521                 DEFW #0000,#0010,#00E4,#00EC,#03,#0000,TCursorLeft,#0000
0958   E521 00001000E400EC000300000021D40000
0959   E531                 DEFW #0260,#0270,#00E4,#00EC,#03,#0000,TCursorRight,#0000
0959   E531 60027002E400EC000300000089D40000
0960   E541             TBarL	EQU	$+2
0961   E541                 DEFW #0010,#0000,#00E4,#00EC,#00,#0000,TCursorLeft,#0000
0961   E541 10000000E400EC000000000021D40000
0962   E551             TBarR	EQU	$
0963   E551                 DEFW #0000,#0260,#00E4,#00EC,#00,#0000,TCursorRight,#0000
0963   E551 00006002E400EC000000000089D40000
0964   E561 00 80           DEFW #8000
0965   E563             HEXtab
0966   E563                 DEFW #0000,#0050,#00F2,#0100,#01,#0000,About,#0000
0966   E563 00005000F200000101000000D8C60000
0967   E573                 DEFW #0050,#00A0,#00F2,#0100,#01,#0000,SaveFile,#0000
0967   E573 5000A000F200000101000000FACA0000
0968   E583                 DEFW #00A0,#00F0,#00F2,#0100,#01,#0000,ChEditor,#0000
0968   E583 A000F000F200000101000000A8C10000
0969   E593                 DEFW #00F0,#0140,#00F2,#0100,#01,#0000,HGoTo,#0000
0969   E593 F0004001F2000001010000004CE00000
0970   E5A3                 DEFW #01E0,#0230,#00F2,#0100,#01,#0000,PrintFile,#0000
0970   E5A3 E0013002F20000010100000027E20000
0971   E5B3                 DEFW #0230,#0280,#00F2,#0100,#21,#0000,EditorExit,#0000
0971   E5B3 30028002F20000012100000017C20000
0972   E5C3                 DEFW #0270,#0280,#001C,#0024,#03,#0000,HCursorUp,#0000
0972   E5C3 700280021C0024000300000009DD0000
0973   E5D3                 DEFW #0270,#0280,#00DC,#00E4,#03,#0000,HCursorDown,#0000
0973   E5D3 70028002DC00E400030000002ADD0000
0974   E5E3                 DEFW #0048,#01D8,#001C,#00E4,#00,#0000,HNewHEXPos,#0000
0974   E5E3 4800D8011C00E40000000000DDDE0000
0975   E5F3                 DEFW #01E8,#0268,#001C,#00E4,#00,#0000,HNewASCPos,#0000
0975   E5F3 E80168021C00E40000000000D0DF0000
0976   E603             HBarU	EQU	$+6
0977   E603                 DEFW #0270,#0280,#001C,#0000,#00,#0000,HPageUp,#0000
0977   E603 700280021C00000000000000D9DD0000
0978   E613             HBarD	EQU	$+4
0979   E613                 DEFW #0270,#0280,#0000,#00E4,#00,#0000,HPageDown,#0000
0979   E613 700280020000E40000000000FFDD0000
0980   E623 00 80           DEFW #8000
0981   E625             AboutTab
0982   E625             	DEFW #011C,#0164,#008A,#0098,#21,#0000,AboutExt,#0000
0982   E625 1C0164018A00980021000000C6C70000
0983   E635             	DEFW #0000,#00A0,#0000,#0100,#20,#0000,AboutExt,#0000
0983   E635 0000A0000000000120000000C6C70000
0984   E645             	DEFW #01E0,#0280,#0000,#0100,#20,#0000,AboutExt,#0000
0984   E645 E00180020000000120000000C6C70000
0985   E655             	DEFW #0000,#0280,#0000,#0048,#20,#0000,AboutExt,#0000
0985   E655 000080020000480020000000C6C70000
0986   E665             	DEFW #0000,#0280,#009D,#0100,#20,#0000,AboutExt,#0000
0986   E665 000080029D00000120000000C6C70000
0987   E675 00 80       	DEFW #8000
0988   E677             SureTab
0989   E677             	DEFW #00F0,#0138,#007A,#0088,#021,#0000,SureOkey,#0000
0989   E677 F00038017A00880021000000BFC20000
0990   E687             	DEFW #0148,#0190,#007A,#0088,#021,#0000,SureExit,#0000
0990   E687 480190017A00880021000000C3C20000
0991   E697             	DEFW #0000,#00D0,#0000,#0100,#120,#0000,EditorLoop,#0000
0991   E697 0000D00000000001200100003DC00000
0992   E6A7             	DEFW #01B0,#0280,#0000,#0100,#120,#0000,EditorLoop,#0000
0992   E6A7 B001800200000001200100003DC00000
0993   E6B7             	DEFW #0000,#0280,#0000,#0050,#120,#0000,EditorLoop,#0000
0993   E6B7 0000800200005000200100003DC00000
0994   E6C7             	DEFW #0000,#0280,#008C,#0100,#120,#0000,EditorLoop,#0000
0994   E6C7 000080028C000001200100003DC00000
0995   E6D7 00 80       	DEFW #8000
0996   E6D9             NewFileTab
0997   E6D9             	DEFW #00F0,#0138,#0082,#0090,#021,#0000,NewFExitO,#0000
0997   E6D9 F000380182009000210000006CCA0000
0998   E6E9             	DEFW #0148,#0190,#0082,#0090,#021,#0000,NewFExitC,#0000
0998   E6E9 4801900182009000210000006BCA0000
0999   E6F9             	DEFW #0000,#00C0,#0000,#0100,#020,#0000,NewFExitC,#0000
0999   E6F9 0000C00000000001200000006BCA0000
1000   E709             	DEFW #01C0,#0280,#0000,#0100,#020,#0000,NewFExitC,#0000
1000   E709 C001800200000001200000006BCA0000
1001   E719             	DEFW #0000,#0280,#0000,#0058,#020,#0000,NewFExitC,#0000
1001   E719 0000800200005800200000006BCA0000
1002   E729             	DEFW #0000,#0280,#0094,#0100,#020,#0000,NewFExitC,#0000
1002   E729 0000800294000001200000006BCA0000
1003   E739 00 80       	DEFW #8000
1004   E73B             ;[]==========================================================[]
1005   E73B             end
1006   E73B             	savebin	"..\bin\fnedit.bin",StartOfEditor,end-StartOfEditor
1007   E73B                    ORG     #7F00
1008   7F00             
1009   7F00             
1010   7F00             

Value    Label
------ - -----------------------------------------------------------
0x00FE X BORDER
0x0089   YPORT
0x0082   PAGE0
0x00A2   PAGE1
0x00C2   PAGE2
0x00E2 X PAGE3
0x0009   PanelCol
0x000A   FileCol
0x000B X SFileCol
0x000C X InvSCol
0x0005 X InvPCol
0x0006 X InvICol
0x0000 X BarXl
0x0001 X BarXh
0x0002 X BarYl
0x0003 X BarYh
0x0004 X BarMaxLl
0x0005 X BarMaxLh
0x0006 X BarLENl
0x0007 X BarLENh
0x0008 X BarLEFTl
0x0009 X BarLEFTh
0x000A X BarRGHTl
0x000B X BarRGHTh
0x000C X BarPAGEl
0x000D X BarPAGEh
0x000E X BarMAXl
0x000F X BarMAXh
0x0010 X BarFRSTl
0x0011 X BarFRSTh
0x0000 X ProcXl
0x0001 X ProcXh
0x0002 X ProcYl
0x0003 X ProcYh
0x0004 X ProcMaxLl
0x0005 X ProcMaxLh
0x0006 X ProcCOEFl
0x0007 X ProcCOEFh
0x0008 X ProcCORRl
0x0009 X ProcCORRh
0x000A   ProcMAXl1
0x000B   ProcMAXh1
0x000C   ProcMAXl2
0x000D   ProcMAXh2
0x000E   ProcCURl1
0x000F   ProcCURh1
0x0010   ProcCURl2
0x0011   ProcCURh2
0x0012 X ProcCOLOR
0x8000   WorkBuffer
0x8400   PagesList
0x8603 X ClearScreen
0x8606   MakeWindow
0x8609 X InvertRectan
0x860C   PrnTxtLnIFF
0x860F X PrnTxtLnNorm
0x8612   PrnTxtLnNormC
0x8615   PrnRangPathL
0x8618 X PrnRangPathR
0x861B   PrnRangPathC
0x861E X InputLine
0x8621 X InpLnExtN
0x8624 X InpLnExtC
0x862A   InitScrBar
0x862D   PrnHScrBar
0x8630   PrnVScrBar
0x8633   InitProcess
0x8636   PrnProcess
0x8648   ResFire
0x864B   TestCoords
0x864E   SetCMOSPrint
0x8651 X ResCMOSPrint
0x8654   SetClock
0x8657   SetMouse
0x8669 X MoveBytes
0x866C X MoveBytesUp
0x866F X Mult8
0x8672 X Mult16X8
0x8675 X Mult16
0x8678 X Mult16X16
0x867B X Mult32
0x867E X Divis16X16
0x8681 X Divis24X16
0x8684 X Divis32X16
0x8687 X Divis32
0x868A X ConvNumTxt32
0x868D   ConvNumTxt16
0x8690   ConvNumTxt8
0x8693 X ConvTxtNum32
0x8696 X ConvTxtNum16
0x86A8   DOSError
0xC000   StartOfEditor
0x0000   CursorX
0x0001   StringX
0x0002   CursAddX
0x0003   CursorY
0x0004   LenString
0x0005   PrvLenStr
0x0006   ReadyStr
0x0007   ReadyFile
0x8200   LineBuffer
0x8300   TempBuffer
0x0008   Step
0x000E   CursTimer
0xC000 X FileEditor
0xC802   LoadFile
0xC18F   EditData
0xC18D   EditMode
0xC18E   HEXmode
0xC6CC   CrTimer
0xC197   CurLine
0xC19B   LineShift
0xC19D   PageShift
0xC2D3   InitScreen
0xC034   EditorBegin
0xC3BC   InitStatus
0xC53C   InitFile
0xC60C   PrintPage
0xC03D   EditorLoop
0xC620   ChCursor
0xC0D9   HEditLoop
0xC047 X TEditLoop
0xE481   ASCIItab
0xC217   EditorExit
0xD253   TInsertSymbol
0xC6D8   About
0xCAFA   SaveFile
0xC1A8   ChEditor
0xE227   PrintFile
0xD304   TDeleteSymbol
0xD421   TCursorLeft
0xD489   TCursorRight
0xD5E8   TCursorUp
0xD60B   TCursorDown
0xD57E   THomeString
0xD5C1   TEndString
0xD704   TPageUp
0xD72A   TPageDown
0xD39A   TDeleteWord
0xD4F6   TWordLeft
0xD536   TWordRight
0xD635   TScrollUp
0xD670   TScrollDown
0xD7BF   TBegFile
0xD7DA   TEndFile
0xE563   HEXtab
0xDB16   HPutSymbol
0xE04C   HGoTo
0xDC74   HCursorLeft
0xDC9F   HCursorRight
0xDCE1   HHomeString
0xDCF5   HEndString
0xDD09   HCursorUp
0xDD2A   HCursorDown
0xDDD9   HPageUp
0xDDFF   HPageDown
0xDD5F   HScrollUp
0xDD8B   HScrollDown
0xDE40   HBegFile
0xDE60   HEndFile
0xC15D   EditingFile
0xC199   EquipLines
0xC19F   TempShift
0xC1A1   FileLenght
0xC1A3   EmptyLines
0xC1A4   MemIndef
0xC1A5   FHandle
0xC1A6   ReadLen
0xC1A6   SaveLen
0xC1EC   HEXEdit
0xC1B6 X ASCIIEdit
0xCE97   SearchUp
0xCF9D   GetString
0xD00D   PutString
0xC687   ResCursor
0xC2CB   EditorE
0xC29B   SureLoop
0xE677   SureTab
0xC2C3   SureExit
0xC2BF   SureOkey
0xC47B   InitHEXStatus
0xC599   InitFileHex
0xC54A   InitAlp
0xCF18   SearchDown
0xC5F6   ELines
0xE507   TBarU
0xC5F0   BarPgU
0xE515   TBarD
0xC5F2   BarPgD
0xC5E8   EditVBar
0xC608   CScrnX
0xC5FA   EditHBar
0xC5F8   CLine
0xC60A   CAddX
0xE609   HBarU
0xE617   HBarD
0xE543   TBarL
0xE551   TBarR
0xCCAD   PrnASCIIpage
0xD8D5   PrnHEXpage
0xC616   PrnEDITinfo
0xD15F   PrnASCIIinfo
0xDA43   PrnHEXinfo
0xC6CD   CurCursor
0xC68F   ResCurs
0xC642   SetCurs
0xC634   SetCursor
0xC6CE   CursorPos
0xC6D0   CursBuffer
0xC7A7   AboutLoop
0xE625   AboutTab
0xC7C6   AboutExt
0xC7CC   ScrollSCRup
0xC7D4   ScrlSCRDnUp
0xC7D1   ScrollSCRdown
0xC7EB   ScSCRN1
0xC9B2   NewFile
0xC817   LoadFl0
0xCC93   CorrBigChar
0xC998   LoadExit
0xCC80   ProcessEdit
0xC9A9   NoRead
0xC93B   ReadLp1
0xC9A5   ReadAbort
0xC976   ReadEnd
0xCC5A   NextProcess
0xC991   ReadExit
0xC98D   ReadEn1
0xC9C0   NewFile1
0xCAF3   EError
0xCA48   NewFLoop
0xE6D9   NewFileTab
0xCA6B   NewFExitC
0xCA6C   NewFExitO
0xCA93   ChangeDIR
0xCAAA   NewFileE
0xCAB2   NewFE0
0xCAB9   NewFE1
0xCC49   SaveExit1
0xCBE5   SaveLp1
0xCC19   SaveEnd
0xCC54   SaveAbort
0xCC38   SaveExit
0xCC34   SaveEn1
0xCC7C   NextPr1
0xCC9D   CorrCh1
0xCCB9   PrnASCIIlp
0xCD41   PrnASCIIline
0xCCD9   FillASCII
0xCCF0   FLenASC
0xCCF4   FASCIIe
0xCCEC   FPosASC
0xCD0D   RefrASCIIpage
0xCD1F   RefrASCIIlp
0xCD32   RfASCII
0xCE3B   PrnASCIIstring
0xCD5A   PutASCIIln
0xCD75   PutASCIIlnLp
0xCD83   PutLnA1
0xCD9F   PutLineA1
0xCD97   PutLnA2
0xCE00   PutLnExitA
0xCDD0   PutLineA2
0xCDA7   PutTabA
0xCDCC   PutLnEA1
0xCDD8   PutLineA3
0xCDB4   PutLnEA0
0xCDC2   PutLEA1
0xCDE6   PutLnA3
0xCDFA   PutLnA4
0xCE28   PutLnExA
0xCE61   PrASCIIexit
0xCE4A   PrASCIIstr1
0xCE5D   PrASCIIstr2
0xCE50   PutTabS
0xCE5F   PrASCIIstr3
0xCE72   PrASCIIex1
0xCEA1   SearchUpBeg
0xCEC5   SrchUp0
0xCEDB   SrchUp1
0xCF0E   SrchUpEx
0xCEF1   SearchUpLp
0xCEF5   SearchUpLp1
0xCF00   SrchUp2
0xCF2B   SearchDnBeg
0xCF41   SearchDnLp
0xCF4F   SrchDn0
0xCF69   SrchE1
0xCF61   SrchDn1
0xCF95   SrchEEx
0xCF7C   SrchDnE
0xCF8F   SrchDE1
0xCFB0   GetLine
0xCFEE   GetLnE1
0xCFCF   GetLnLoop
0xCFDD   GetLn1
0xCFEB   GetLnExit
0xD028   PutStr2
0xD01B   PutStr1
0xD075   CorrectFile
0xD035   PutStrN
0xD05D   PutStringLp
0xD06B   PutStr3
0xD0E9   MinusBytes
0xD077 X PlusBytes
0xD153   NoMemSpace
0xD0C5   MovUp1
0xD0BA   MovUp0
0xD0DC   MoveUpE
0xD0D3   LenUp
0xD135   MovFl1
0xD12A   MovFl0
0xD146   MoveFlE
0xD13D   LenFl
0xD241   LineT
0xD247   ColT
0xD24D   FreeT
0xD23D   ReadyNo
0xD23F   ReadyYes
0xD20F   TstLine
0xD222   TstAddX
0xD264   InsSymbol
0xD2DA   BackSpace
0xD295   Enter
0xD27D   NotInsert
0xD2AB   EnterEnd
0xD2F3   BackSp1
0xD32D   AddString
0xD362   AddStr0
0xD383   AddStr2
0xD37A   AddStr1
0xD3D7   DWord1
0xD3EE   DWord2
0xD3C0   DWord0
0xD442   CursLf3
0xD432   CursLf1
0xD43F   CursLf2
0xD445   CursLf4
0xD455   CursLf5
0xD47F   CursLf6
0xD4B5   CursRg3
0xD4A5   CursRg1
0xD4B2   CursRg2
0xD4B8   CursRg4
0xD4CA   CursRg5
0xD4E6   CursRg6
0xD500   WordLf0
0xD517   WordLf1
0xD52D   WordLf2
0xD544   WordRg0
0xD55B   WordRg1
0xD570   WordRg2
0xD5B7   HomeStr
0xD5CE   EndStr1
0xD5D5   EndStr2
0xD6B2   CursorExit
0xD678   ScrlDn1
0xD6D1   CursEx3
0xD6C1   CursEx1
0xD6CE   CursEx2
0xD6D8   CursEx4
0xD6EA   CursEx5
0xD715   PageUp1
0xD755   PageExit
0xD736   PageDn1
0xD780   PageEx3
0xD75C   PageEx1
0xD76A   PageEx2
0xD783   NewPage
0xD7A2   PagePr3
0xD792   PagePr1
0xD79F   PagePr2
0xD7A6   PagePr4
0xD7B8   PagePr5
0xD7E2   EndFl1
0xD811   EndFile1
0xD7F0   EndFl2
0xD7FE X EndFlEx
0xD82E   TNewCrPos
0xD85F   NewPos2
0xD853   NewPos1
0xD8BB   NewPos6
0xD892   NewPos3
0xD89F   NewPos4
0xD8A6   NewPos5
0xD8EB   PrnHEXl
0xD940   PutHLine
0xD921   FillDwnHex
0xD904   PrHEXCr
0xDA03   CursorTab1
0xDA23   CursorTab2
0xD936   FPosHex
0xD93A   FLenHex
0xD95B   PutHLn
0xD9E8   PutHexNumb
0xD9B6   PutHLp2
0xD993   PutHLoop
0xD9A1   PutHLp1
0xD9B9 X FillHex
0xD9D7   FillE2
0xD9C2   FillE1
0xDB04   LineH
0xDB0A   ColH
0xDB10   FreeH
0xDAF1   TstLinH
0xDBFC   HDeleteByte
0xDC61   ChHEXmode
0xDB91   HPutSymbA
0xDB4E   HPutSH1
0xDB61   HPutSH2
0xDBB6   HPrnSymbol
0xDBC1   HPrnS1
0xDBE3   HPrnS2
0xDC35   HDelS1
0xDC5B   EmptyAddr
0xDC91   HCurLf1
0xDCD4   HCurRg1
0xDDBF   HCursorExit
0xDE26   HPageExit
0xDE93   HEnd1
0xDEDD   HNewHEXPos
0xDF68   HNewPosTb
0xDFD0   HNewASCPos
0xE057   HGoToOk
0xE1F6   NewShift
0xE0AA   CursPos
0xE0A4   BuffFlg
0xE074   HGoToRet
0xE11B   PrintHGT
0xE077   HGoToLp
0xE14C   ChangeCurs
0xE1D0   HGTescape
0xE0EB   HGoToSys
0xE188   HGTenter
0xE0D1   HGTdelete
0xE0C1   ClearBuff
0xE0F6   HGTleft
0xE108   HGTright
0xE187   TCursor
0xE169   CurCurs
0xE14C   CurWait
0xE1FC   GetHexNum16
0xE1AC   HGTent1
0xE1FF   GetHNlp
0xE21F   GetHNum
0xE429   PrintTab
0xE46E   ProcessPrn
0xE28F   InitPrn
0xE2F6   PrintHEX
0xE2A7 X PrintASCII
0xE2C8   PrnASCII
0xE2D6   PrnASC
0xE3E2   PrintCHAR
0xE2ED   PrnASCIIext
0xE43B   NxtPrnProc
0xE306   PrintHEXlp
0xE328   PrnHEXline
0xE317   PrintHEXext
0xE322   PrnHEXe
0xE345   PrnHLn
0xE3A6   PrnHLp2
0xE37D   PrnHLoop
0xE38B   PrnHLp1
0xE3A9 X FillHeP
0xE3C7   FillP2
0xE3B2   FillP1
0xE3CC   PrnHEX
0xE3FB   PrnCH1
0xE3FF   PrnCH2
0xE415   PrnCHAR
0xE413   StopPrint
0xE465   NxtProc
0xE73B   end
